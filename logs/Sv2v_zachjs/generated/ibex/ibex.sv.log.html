<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Full ibex core test
rc: 0 (means success: 1)
should_fail: 0
tags: ibex
incdirs: /tmpfs/src/github/sv-tests/third_party/cores/ibex/rtl /tmpfs/src/github/sv-tests/third_party/cores/ibex/shared/rtl
top_module: ibex_core
type: parsing
mode: parsing
files: <a href="../../../../third_party/cores/ibex/shared/rtl/prim_clock_gating.sv.html" target="file-frame">third_party/cores/ibex/shared/rtl/prim_clock_gating.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pkg.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pkg.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_alu.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_alu.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_compressed_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_compressed_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_controller.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_controller.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_cs_registers.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_cs_registers.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_counters.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_counters.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_ex_block.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_ex_block.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_id_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_id_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_if_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_if_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_wb_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_wb_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_load_store_unit.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_load_store_unit.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_slow.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_slow.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_fast.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_fast.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_fetch_fifo.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_fetch_fifo.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pmp.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pmp.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_core.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_core.sv</a> <a href="../../../../third_party/cores/ibex/shared/rtl/prim_assert.sv.html" target="file-frame">third_party/cores/ibex/shared/rtl/prim_assert.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_register_file_fpga.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_register_file_fpga.sv</a>
time_elapsed: 20.656s
ram usage: 110284 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/cores/ibex/rtl -I/tmpfs/src/github/sv-tests/third_party/cores/ibex/shared/rtl <a href="../../../../third_party/cores/ibex/shared/rtl/prim_clock_gating.sv.html" target="file-frame">third_party/cores/ibex/shared/rtl/prim_clock_gating.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pkg.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pkg.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_alu.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_alu.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_compressed_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_compressed_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_controller.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_controller.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_cs_registers.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_cs_registers.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_counters.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_counters.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_ex_block.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_ex_block.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_id_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_id_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_if_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_if_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_wb_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_wb_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_load_store_unit.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_load_store_unit.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_slow.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_slow.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_fast.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_fast.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_fetch_fifo.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_fetch_fifo.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pmp.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pmp.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_core.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_core.sv</a> <a href="../../../../third_party/cores/ibex/shared/rtl/prim_assert.sv.html" target="file-frame">third_party/cores/ibex/shared/rtl/prim_assert.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_register_file_fpga.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_register_file_fpga.sv</a>
module prim_clock_gating (
	clk_i,
	en_i,
	test_en_i,
	clk_o
);
	input clk_i;
	input en_i;
	input test_en_i;
	output wire clk_o;
	reg clk_en;
	always @(*)
		if (clk_i == 1&#39;b0)
			clk_en &lt;= en_i | test_en_i;
	assign clk_o = clk_i &amp; clk_en;
endmodule
module ibex_alu (
	operator_i,
	operand_a_i,
	operand_b_i,
	instr_first_cycle_i,
	multdiv_operand_a_i,
	multdiv_operand_b_i,
	multdiv_sel_i,
	imd_val_q_i,
	imd_val_d_o,
	imd_val_we_o,
	adder_result_o,
	adder_result_ext_o,
	result_o,
	comparison_result_o,
	is_equal_result_o
);
	parameter [0:0] RV32B = 1&#39;b0;
	input wire [5:0] operator_i;
	input wire [31:0] operand_a_i;
	input wire [31:0] operand_b_i;
	input wire instr_first_cycle_i;
	input wire [32:0] multdiv_operand_a_i;
	input wire [32:0] multdiv_operand_b_i;
	input wire multdiv_sel_i;
	input wire [31:0] imd_val_q_i;
	output reg [31:0] imd_val_d_o;
	output reg imd_val_we_o;
	output wire [31:0] adder_result_o;
	output wire [33:0] adder_result_ext_o;
	output reg [31:0] result_o;
	output wire comparison_result_o;
	output wire is_equal_result_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire [31:0] operand_a_rev;
	wire [32:0] operand_b_neg;
	generate
		genvar k;
		for (k = 0; k &lt; 32; k = k + 1) begin : gen_rev_operand_a
			assign operand_a_rev[k] = operand_a_i[31 - k];
		end
	endgenerate
	reg adder_op_b_negate;
	wire [32:0] adder_in_a;
	reg [32:0] adder_in_b;
	wire [31:0] adder_result;
	always @(*) begin
		adder_op_b_negate = 1&#39;b0;
		case (operator_i)
			ALU_SUB, ALU_EQ, ALU_NE, ALU_GE, ALU_GEU, ALU_LT, ALU_LTU, ALU_SLT, ALU_SLTU, ALU_MIN, ALU_MINU, ALU_MAX, ALU_MAXU: adder_op_b_negate = 1&#39;b1;
			default:
				;
		endcase
	end
	assign adder_in_a = (multdiv_sel_i ? multdiv_operand_a_i : {operand_a_i, 1&#39;b1});
	assign operand_b_neg = {operand_b_i, 1&#39;b0} ^ {33 {1&#39;b1}};
	always @(*)
		case (1&#39;b1)
			multdiv_sel_i: adder_in_b = multdiv_operand_b_i;
			adder_op_b_negate: adder_in_b = operand_b_neg;
			default: adder_in_b = {operand_b_i, 1&#39;b0};
		endcase
	assign adder_result_ext_o = $unsigned(adder_in_a) + $unsigned(adder_in_b);
	assign adder_result = adder_result_ext_o[32:1];
	assign adder_result_o = adder_result;
	reg shift_left;
	wire shift_ones;
	wire shift_arith;
	wire shift_funnel;
	wire shift_sbmode;
	wire shift_none;
	wire shift_op_rev;
	wire shift_op_rev8;
	wire shift_op_orc_b;
	wire [5:0] shift_amt;
	wire [5:0] shift_amt_compl;
	assign shift_amt[5] = operand_b_i[5] &amp;&amp; shift_funnel;
	assign shift_amt_compl = 32 - operand_b_i[4:0];
	assign shift_amt[4:0] = (instr_first_cycle_i ? (operand_b_i[5] &amp;&amp; shift_funnel ? shift_amt_compl[4:0] : operand_b_i[4:0]) : (operand_b_i[5] &amp;&amp; shift_funnel ? operand_b_i[4:0] : shift_amt_compl[4:0]));
	assign shift_sbmode = (RV32B ? ((operator_i == ALU_SBSET) || (operator_i == ALU_SBCLR)) || (operator_i == ALU_SBINV) : 1&#39;b0);
	always @(*) begin
		case (operator_i)
			ALU_SLL: shift_left = 1&#39;b1;
			ALU_SLO: shift_left = (RV32B ? 1&#39;b1 : 1&#39;b0);
			ALU_ROL: shift_left = (RV32B ? instr_first_cycle_i : 0);
			ALU_ROR: shift_left = (RV32B ? !instr_first_cycle_i : 0);
			ALU_FSL: shift_left = (RV32B ? (shift_amt[5] ? !instr_first_cycle_i : instr_first_cycle_i) : 1&#39;b0);
			ALU_FSR: shift_left = (RV32B ? (shift_amt[5] ? instr_first_cycle_i : !instr_first_cycle_i) : 1&#39;b0);
			default: shift_left = 1&#39;b0;
		endcase
		if (shift_sbmode)
			shift_left = 1&#39;b1;
	end
	assign shift_arith = operator_i == ALU_SRA;
	assign shift_ones = (RV32B ? (operator_i == ALU_SLO) || (operator_i == ALU_SRO) : 1&#39;b0);
	assign shift_funnel = (RV32B ? (operator_i == ALU_FSL) || (operator_i == ALU_FSR) : 1&#39;b0);
	assign shift_none = (RV32B ? ((operator_i == ALU_REV) || (operator_i == ALU_REV8)) || (operator_i == ALU_ORCB) : 1&#39;b0);
	assign shift_op_rev = (RV32B ? operator_i == ALU_REV : 1&#39;b0);
	assign shift_op_rev8 = (RV32B ? operator_i == ALU_REV8 : 1&#39;b0);
	assign shift_op_orc_b = (RV32B ? operator_i == ALU_ORCB : 1&#39;b0);
	reg [31:0] shift_result;
	reg [32:0] shift_result_ext;
	always @(*) begin
		shift_result = operand_a_i;
		if (shift_op_rev || shift_left)
			shift_result = operand_a_rev;
		if (shift_sbmode)
			shift_result = 32&#39;h8000_0000;
		shift_result_ext = $signed({shift_ones || (shift_arith &amp;&amp; shift_result[31]), shift_result}) &gt;&gt;&gt; shift_amt[4:0];
		if (!shift_none)
			shift_result = shift_result_ext[31:0];
		if (shift_op_orc_b || shift_left) begin
			shift_result = ((shift_op_orc_b ? shift_result : 32&#39;h 0) | ((shift_result &amp; 32&#39;h 55555555) &lt;&lt; 1)) | ((shift_result &amp; 32&#39;h AAAAAAAA) &gt;&gt; 1);
			shift_result = ((shift_op_orc_b ? shift_result : 32&#39;h 0) | ((shift_result &amp; 32&#39;h 33333333) &lt;&lt; 2)) | ((shift_result &amp; 32&#39;h CCCCCCCC) &gt;&gt; 2);
			shift_result = ((shift_op_orc_b ? shift_result : 32&#39;h 0) | ((shift_result &amp; 32&#39;h 0F0F0F0F) &lt;&lt; 4)) | ((shift_result &amp; 32&#39;h F0F0F0F0) &gt;&gt; 4);
		end
		if (shift_op_rev8 || shift_left) begin
			shift_result = ((shift_result &amp; 32&#39;h 00FF00FF) &lt;&lt; 8) | ((shift_result &amp; 32&#39;h FF00FF00) &gt;&gt; 8);
			shift_result = ((shift_result &amp; 32&#39;h 0000FFFF) &lt;&lt; 16) | ((shift_result &amp; 32&#39;h FFFF0000) &gt;&gt; 16);
		end
	end
	wire is_equal;
	reg is_greater_equal;
	reg cmp_signed;
	always @(*)
		case (operator_i)
			ALU_GE, ALU_LT, ALU_SLT, ALU_MIN, ALU_MAX: cmp_signed = 1&#39;b1;
			default: cmp_signed = 1&#39;b0;
		endcase
	assign is_equal = adder_result == 32&#39;b0;
	assign is_equal_result_o = is_equal;
	always @(*)
		if ((operand_a_i[31] ^ operand_b_i[31]) == 1&#39;b0)
			is_greater_equal = adder_result[31] == 1&#39;b0;
		else
			is_greater_equal = operand_a_i[31] ^ cmp_signed;
	reg cmp_result;
	always @(*)
		case (operator_i)
			ALU_EQ: cmp_result = is_equal;
			ALU_NE: cmp_result = ~is_equal;
			ALU_GE, ALU_GEU, ALU_MAX, ALU_MAXU: cmp_result = is_greater_equal;
			ALU_LT, ALU_LTU, ALU_MIN, ALU_MINU, ALU_SLT, ALU_SLTU: cmp_result = ~is_greater_equal;
			default: cmp_result = is_equal;
		endcase
	assign comparison_result_o = cmp_result;
	wire [31:0] minmax_result;
	reg [5:0] bitcnt_result;
	reg [31:0] bwlogic_result;
	reg [31:0] pack_result;
	reg [31:0] multicycle_result;
	reg [31:0] singlebit_result;
	wire bwlogic_or;
	wire bwlogic_and;
	wire [31:0] bwlogic_operand_b;
	wire [31:0] bwlogic_or_result;
	wire [31:0] bwlogic_and_result;
	wire [31:0] bwlogic_xor_result;
	reg bwlogic_op_b_negate;
	always @(*)
		case (operator_i)
			ALU_XNOR, ALU_ORN, ALU_ANDN: bwlogic_op_b_negate = (RV32B ? 1&#39;b1 : 1&#39;b0);
			ALU_CMIX: bwlogic_op_b_negate = (RV32B ? !instr_first_cycle_i : 1&#39;b0);
			default: bwlogic_op_b_negate = 1&#39;b0;
		endcase
	assign bwlogic_operand_b = (bwlogic_op_b_negate ? operand_b_neg[32:1] : operand_b_i);
	assign bwlogic_or_result = operand_a_i | bwlogic_operand_b;
	assign bwlogic_and_result = operand_a_i &amp; bwlogic_operand_b;
	assign bwlogic_xor_result = operand_a_i ^ bwlogic_operand_b;
	assign bwlogic_or = (operator_i == ALU_OR) || (operator_i == ALU_ORN);
	assign bwlogic_and = (operator_i == ALU_AND) || (operator_i == ALU_ANDN);
	always @(*)
		case (1&#39;b1)
			bwlogic_or: bwlogic_result = bwlogic_or_result;
			bwlogic_and: bwlogic_result = bwlogic_and_result;
			default: bwlogic_result = bwlogic_xor_result;
		endcase
	generate
		if (RV32B) begin : g_alu_rvb
			always @(*)
				case (operator_i)
					ALU_CMOV: begin
						imd_val_d_o = operand_a_i;
						multicycle_result = (operand_b_i == 32&#39;h0 ? operand_a_i : imd_val_q_i);
						if (instr_first_cycle_i)
							imd_val_we_o = 1&#39;b1;
						else
							imd_val_we_o = 1&#39;b0;
					end
					ALU_CMIX: begin
						multicycle_result = imd_val_q_i | bwlogic_and_result;
						imd_val_d_o = bwlogic_and_result;
						if (instr_first_cycle_i)
							imd_val_we_o = 1&#39;b1;
						else
							imd_val_we_o = 1&#39;b0;
					end
					ALU_FSR, ALU_FSL, ALU_ROL, ALU_ROR: begin
						if (shift_amt[4:0] == 5&#39;h0)
							multicycle_result = (shift_amt[5] ? operand_a_i : imd_val_q_i);
						else
							multicycle_result = imd_val_q_i | shift_result;
						imd_val_d_o = shift_result;
						if (instr_first_cycle_i)
							imd_val_we_o = 1&#39;b1;
						else
							imd_val_we_o = 1&#39;b0;
					end
					default: begin
						imd_val_d_o = operand_a_i;
						imd_val_we_o = 1&#39;b0;
						multicycle_result = operand_a_i;
					end
				endcase
			always @(*)
				case (operator_i)
					ALU_SBSET: singlebit_result = operand_a_i | shift_result;
					ALU_SBCLR: singlebit_result = operand_a_i &amp; ~shift_result;
					ALU_SBINV: singlebit_result = operand_a_i ^ shift_result;
					default: singlebit_result = {31&#39;h0, shift_result[0]};
				endcase
			assign minmax_result = (cmp_result ? operand_a_i : operand_b_i);
			wire bitcnt_ctz;
			wire bitcnt_pcnt;
			wire [31:0] bitcnt_bits;
			reg [32:0] bitcnt_bit_enable;
			assign bitcnt_ctz = operator_i == ALU_CTZ;
			assign bitcnt_pcnt = operator_i == ALU_PCNT;
			assign bitcnt_bits = (bitcnt_pcnt ? operand_a_i : (bitcnt_ctz ? ~operand_a_i : ~operand_a_rev));
			always @(*) begin
				bitcnt_result = &#39;sd0;
				bitcnt_bit_enable = {32&#39;b0, 1&#39;b1};
				begin : sv2v_autoblock_25
					reg [31:0] i;
					for (i = 0; i &lt; 32; i = i + 1)
						begin : gen_bitcnt_adder
							bitcnt_bit_enable[i + 1] = bitcnt_pcnt || (bitcnt_bit_enable[i] &amp;&amp; bitcnt_bits[i]);
							if (bitcnt_bit_enable[i])
								bitcnt_result[5:0] = bitcnt_result[5:0] + {5&#39;h0, bitcnt_bits[i]};
						end
				end
			end
			wire packu;
			wire packh;
			assign packu = operator_i == ALU_PACKU;
			assign packh = operator_i == ALU_PACKH;
			always @(*)
				case (1&#39;b1)
					packu: pack_result = {operand_b_i[31:16], operand_a_i[31:16]};
					packh: pack_result = {16&#39;h0, operand_b_i[7:0], operand_a_i[7:0]};
					default: pack_result = {operand_b_i[15:0], operand_a_i[15:0]};
				endcase
		end
		else begin : g_no_alu_rvb
			assign minmax_result = &#39;sd0;
			always @(*) bitcnt_result = &#39;sd0;
			always @(*) pack_result = &#39;sd0;
			always @(*) multicycle_result = &#39;sd0;
			always @(*) singlebit_result = &#39;sd0;
			always @(*) imd_val_d_o = &#39;sd0;
			always @(*) imd_val_we_o = &#39;sd0;
		end
	endgenerate
	always @(*) begin
		result_o = &#39;sd0;
		case (operator_i)
			ALU_XOR, ALU_XNOR, ALU_OR, ALU_ORN, ALU_AND, ALU_ANDN: result_o = bwlogic_result;
			ALU_ADD, ALU_SUB: result_o = adder_result;
			ALU_SLL, ALU_SRL, ALU_SRA, ALU_SLO, ALU_SRO, ALU_REV, ALU_REV8, ALU_ORCB: result_o = shift_result;
			ALU_EQ, ALU_NE, ALU_GE, ALU_GEU, ALU_LT, ALU_LTU, ALU_SLT, ALU_SLTU: result_o = {31&#39;h0, cmp_result};
			ALU_MIN, ALU_MAX, ALU_MINU, ALU_MAXU: result_o = minmax_result;
			ALU_CLZ, ALU_CTZ, ALU_PCNT: result_o = {26&#39;h0, bitcnt_result};
			ALU_PACK, ALU_PACKH, ALU_PACKU: result_o = pack_result;
			ALU_CMIX, ALU_CMOV, ALU_FSL, ALU_FSR, ALU_ROL, ALU_ROR: result_o = multicycle_result;
			ALU_SBSET, ALU_SBCLR, ALU_SBINV, ALU_SBEXT: result_o = singlebit_result;
			default:
				;
		endcase
	end
endmodule
module ibex_compressed_decoder (
	clk_i,
	rst_ni,
	valid_i,
	instr_i,
	instr_o,
	is_compressed_o,
	illegal_instr_o
);
	input wire clk_i;
	input wire rst_ni;
	input wire valid_i;
	input wire [31:0] instr_i;
	output reg [31:0] instr_o;
	output wire is_compressed_o;
	output reg illegal_instr_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire unused_valid;
	assign unused_valid = valid_i;
	always @(*) begin
		instr_o = instr_i;
		illegal_instr_o = 1&#39;b0;
		case (instr_i[1:0])
			2&#39;b00:
				case (instr_i[15:13])
					3&#39;b000: begin
						instr_o = {2&#39;b0, instr_i[10:7], instr_i[12:11], instr_i[5], instr_i[6], 2&#39;b00, 5&#39;h02, 3&#39;b000, 2&#39;b01, instr_i[4:2], OPCODE_OP_IMM};
						if (instr_i[12:5] == 8&#39;b0)
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b010: instr_o = {5&#39;b0, instr_i[5], instr_i[12:10], instr_i[6], 2&#39;b00, 2&#39;b01, instr_i[9:7], 3&#39;b010, 2&#39;b01, instr_i[4:2], OPCODE_LOAD};
					3&#39;b110: instr_o = {5&#39;b0, instr_i[5], instr_i[12], 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b010, instr_i[11:10], instr_i[6], 2&#39;b00, OPCODE_STORE};
					3&#39;b001, 3&#39;b011, 3&#39;b100, 3&#39;b101, 3&#39;b111: illegal_instr_o = 1&#39;b1;
					default: illegal_instr_o = 1&#39;b1;
				endcase
			2&#39;b01:
				case (instr_i[15:13])
					3&#39;b000: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], instr_i[11:7], 3&#39;b0, instr_i[11:7], OPCODE_OP_IMM};
					3&#39;b001, 3&#39;b101: instr_o = {instr_i[12], instr_i[8], instr_i[10:9], instr_i[6], instr_i[7], instr_i[2], instr_i[11], instr_i[5:3], {9 {instr_i[12]}}, 4&#39;b0, ~instr_i[15], OPCODE_JAL};
					3&#39;b010: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], 5&#39;b0, 3&#39;b0, instr_i[11:7], OPCODE_OP_IMM};
					3&#39;b011: begin
						instr_o = {{15 {instr_i[12]}}, instr_i[6:2], instr_i[11:7], OPCODE_LUI};
						if (instr_i[11:7] == 5&#39;h02)
							instr_o = {{3 {instr_i[12]}}, instr_i[4:3], instr_i[5], instr_i[2], instr_i[6], 4&#39;b0, 5&#39;h02, 3&#39;b000, 5&#39;h02, OPCODE_OP_IMM};
						if ({instr_i[12], instr_i[6:2]} == 6&#39;b0)
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b100:
						case (instr_i[11:10])
							2&#39;b00, 2&#39;b01: begin
								instr_o = {1&#39;b0, instr_i[10], 5&#39;b0, instr_i[6:2], 2&#39;b01, instr_i[9:7], 3&#39;b101, 2&#39;b01, instr_i[9:7], OPCODE_OP_IMM};
								if (instr_i[12] == 1&#39;b1)
									illegal_instr_o = 1&#39;b1;
							end
							2&#39;b10: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], 2&#39;b01, instr_i[9:7], 3&#39;b111, 2&#39;b01, instr_i[9:7], OPCODE_OP_IMM};
							2&#39;b11:
								case ({instr_i[12], instr_i[6:5]})
									3&#39;b000: instr_o = {2&#39;b01, 5&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b000, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b001: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b100, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b010: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b110, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b011: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b111, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b100, 3&#39;b101, 3&#39;b110, 3&#39;b111: illegal_instr_o = 1&#39;b1;
									default: illegal_instr_o = 1&#39;b1;
								endcase
							default: illegal_instr_o = 1&#39;b1;
						endcase
					3&#39;b110, 3&#39;b111: instr_o = {{4 {instr_i[12]}}, instr_i[6:5], instr_i[2], 5&#39;b0, 2&#39;b01, instr_i[9:7], 2&#39;b00, instr_i[13], instr_i[11:10], instr_i[4:3], instr_i[12], OPCODE_BRANCH};
					default: illegal_instr_o = 1&#39;b1;
				endcase
			2&#39;b10:
				case (instr_i[15:13])
					3&#39;b000: begin
						instr_o = {7&#39;b0, instr_i[6:2], instr_i[11:7], 3&#39;b001, instr_i[11:7], OPCODE_OP_IMM};
						if (instr_i[12] == 1&#39;b1)
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b010: begin
						instr_o = {4&#39;b0, instr_i[3:2], instr_i[12], instr_i[6:4], 2&#39;b00, 5&#39;h02, 3&#39;b010, instr_i[11:7], OPCODE_LOAD};
						if (instr_i[11:7] == 5&#39;b0)
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b100:
						if (instr_i[12] == 1&#39;b0) begin
							if (instr_i[6:2] != 5&#39;b0)
								instr_o = {7&#39;b0, instr_i[6:2], 5&#39;b0, 3&#39;b0, instr_i[11:7], OPCODE_OP};
							else begin
								instr_o = {12&#39;b0, instr_i[11:7], 3&#39;b0, 5&#39;b0, OPCODE_JALR};
								if (instr_i[11:7] == 5&#39;b0)
									illegal_instr_o = 1&#39;b1;
							end
						end
						else if (instr_i[6:2] != 5&#39;b0)
							instr_o = {7&#39;b0, instr_i[6:2], instr_i[11:7], 3&#39;b0, instr_i[11:7], OPCODE_OP};
						else if (instr_i[11:7] == 5&#39;b0)
							instr_o = 32&#39;h00_10_00_73;
						else
							instr_o = {12&#39;b0, instr_i[11:7], 3&#39;b000, 5&#39;b00001, OPCODE_JALR};
					3&#39;b110: instr_o = {4&#39;b0, instr_i[8:7], instr_i[12], instr_i[6:2], 5&#39;h02, 3&#39;b010, instr_i[11:9], 2&#39;b00, OPCODE_STORE};
					3&#39;b001, 3&#39;b011, 3&#39;b101, 3&#39;b111: illegal_instr_o = 1&#39;b1;
					default: illegal_instr_o = 1&#39;b1;
				endcase
			2&#39;b11:
				;
			default: illegal_instr_o = 1&#39;b1;
		endcase
	end
	assign is_compressed_o = instr_i[1:0] != 2&#39;b11;
endmodule
module ibex_controller (
	clk_i,
	rst_ni,
	fetch_enable_i,
	ctrl_busy_o,
	illegal_insn_i,
	ecall_insn_i,
	mret_insn_i,
	dret_insn_i,
	wfi_insn_i,
	ebrk_insn_i,
	csr_pipe_flush_i,
	instr_valid_i,
	instr_i,
	instr_compressed_i,
	instr_is_compressed_i,
	instr_fetch_err_i,
	instr_fetch_err_plus2_i,
	pc_id_i,
	instr_valid_clear_o,
	id_in_ready_o,
	controller_run_o,
	instr_req_o,
	pc_set_o,
	pc_mux_o,
	exc_pc_mux_o,
	exc_cause_o,
	lsu_addr_last_i,
	load_err_i,
	store_err_i,
	wb_exception_o,
	branch_set_i,
	jump_set_i,
	csr_mstatus_mie_i,
	irq_pending_i,
	irqs_i,
	irq_nm_i,
	nmi_mode_o,
	debug_req_i,
	debug_cause_o,
	debug_csr_save_o,
	debug_mode_o,
	debug_single_step_i,
	debug_ebreakm_i,
	debug_ebreaku_i,
	trigger_match_i,
	csr_save_if_o,
	csr_save_id_o,
	csr_save_wb_o,
	csr_restore_mret_id_o,
	csr_restore_dret_id_o,
	csr_save_cause_o,
	csr_mtval_o,
	priv_mode_i,
	csr_mstatus_tw_i,
	stall_id_i,
	stall_wb_i,
	flush_id_o,
	perf_jump_o,
	perf_tbranch_o
);
	parameter [0:0] WritebackStage = 0;
	input wire clk_i;
	input wire rst_ni;
	input wire fetch_enable_i;
	output reg ctrl_busy_o;
	input wire illegal_insn_i;
	input wire ecall_insn_i;
	input wire mret_insn_i;
	input wire dret_insn_i;
	input wire wfi_insn_i;
	input wire ebrk_insn_i;
	input wire csr_pipe_flush_i;
	input wire instr_valid_i;
	input wire [31:0] instr_i;
	input wire [15:0] instr_compressed_i;
	input wire instr_is_compressed_i;
	input wire instr_fetch_err_i;
	input wire instr_fetch_err_plus2_i;
	input wire [31:0] pc_id_i;
	output wire instr_valid_clear_o;
	output wire id_in_ready_o;
	output reg controller_run_o;
	output reg instr_req_o;
	output reg pc_set_o;
	output reg [2:0] pc_mux_o;
	output reg [1:0] exc_pc_mux_o;
	output reg [5:0] exc_cause_o;
	input wire [31:0] lsu_addr_last_i;
	input wire load_err_i;
	input wire store_err_i;
	output wire wb_exception_o;
	input wire branch_set_i;
	input wire jump_set_i;
	input wire csr_mstatus_mie_i;
	input wire irq_pending_i;
	input wire [17:0] irqs_i;
	input wire irq_nm_i;
	output wire nmi_mode_o;
	input wire debug_req_i;
	output reg [2:0] debug_cause_o;
	output reg debug_csr_save_o;
	output wire debug_mode_o;
	input wire debug_single_step_i;
	input wire debug_ebreakm_i;
	input wire debug_ebreaku_i;
	input wire trigger_match_i;
	output reg csr_save_if_o;
	output reg csr_save_id_o;
	output reg csr_save_wb_o;
	output reg csr_restore_mret_id_o;
	output reg csr_restore_dret_id_o;
	output reg csr_save_cause_o;
	output reg [31:0] csr_mtval_o;
	input wire [1:0] priv_mode_i;
	input wire csr_mstatus_tw_i;
	input wire stall_id_i;
	input wire stall_wb_i;
	output wire flush_id_o;
	output reg perf_jump_o;
	output reg perf_tbranch_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	reg [3:0] ctrl_fsm_cs;
	reg [3:0] ctrl_fsm_ns;
	reg nmi_mode_q;
	reg nmi_mode_d;
	reg debug_mode_q;
	reg debug_mode_d;
	reg load_err_q;
	wire load_err_d;
	reg store_err_q;
	wire store_err_d;
	reg exc_req_q;
	wire exc_req_d;
	reg illegal_insn_q;
	wire illegal_insn_d;
	wire stall;
	reg halt_if;
	reg flush_id;
	wire illegal_dret;
	wire illegal_umode;
	wire exc_req_lsu;
	wire special_req_all;
	wire special_req_branch;
	wire enter_debug_mode;
	wire ebreak_into_debug;
	wire handle_irq;
	reg [3:0] mfip_id;
	wire unused_irq_timer;
	wire ecall_insn;
	wire mret_insn;
	wire dret_insn;
	wire wfi_insn;
	wire ebrk_insn;
	wire csr_pipe_flush;
	wire instr_fetch_err;
	localparam [3:0] DECODE = 5;
	always @(negedge clk_i)
		if ((((ctrl_fsm_cs == DECODE) &amp;&amp; instr_valid_i) &amp;&amp; !instr_fetch_err_i) &amp;&amp; illegal_insn_d)
			$display(&#34;%t: Illegal instruction (hart %0x) at PC 0x%h: 0x%h&#34;, $time, ibex_core.hart_id_i, ibex_id_stage.pc_id_i, ibex_id_stage.instr_rdata_i);
	assign load_err_d = load_err_i;
	assign store_err_d = store_err_i;
	assign ecall_insn = ecall_insn_i &amp; instr_valid_i;
	assign mret_insn = mret_insn_i &amp; instr_valid_i;
	assign dret_insn = dret_insn_i &amp; instr_valid_i;
	assign wfi_insn = wfi_insn_i &amp; instr_valid_i;
	assign ebrk_insn = ebrk_insn_i &amp; instr_valid_i;
	assign csr_pipe_flush = csr_pipe_flush_i &amp; instr_valid_i;
	assign instr_fetch_err = instr_fetch_err_i &amp; instr_valid_i;
	assign illegal_dret = dret_insn &amp; ~debug_mode_q;
	assign illegal_umode = (priv_mode_i != PRIV_LVL_M) &amp; (mret_insn | (csr_mstatus_tw_i &amp; wfi_insn));
	localparam [3:0] FLUSH = 6;
	assign illegal_insn_d = ((illegal_insn_i | illegal_dret) | illegal_umode) &amp; (ctrl_fsm_cs != FLUSH);
	assign exc_req_d = (((ecall_insn | ebrk_insn) | illegal_insn_d) | instr_fetch_err) &amp; (ctrl_fsm_cs != FLUSH);
	assign exc_req_lsu = store_err_i | load_err_i;
	assign special_req_all = ((((mret_insn | dret_insn) | wfi_insn) | csr_pipe_flush) | exc_req_d) | exc_req_lsu;
	assign special_req_branch = instr_fetch_err &amp; (ctrl_fsm_cs != FLUSH);
	generate
		if (WritebackStage) assign wb_exception_o = ((load_err_q | store_err_q) | load_err_i) | store_err_i;
		else assign wb_exception_o = 1&#39;b0;
	endgenerate
	assign enter_debug_mode = ((debug_req_i | (debug_single_step_i &amp; instr_valid_i)) | trigger_match_i) &amp; ~debug_mode_q;
	assign ebreak_into_debug = (priv_mode_i == PRIV_LVL_M ? debug_ebreakm_i : (priv_mode_i == PRIV_LVL_U ? debug_ebreaku_i : 1&#39;b0));
	assign handle_irq = (~debug_mode_q &amp; ~nmi_mode_q) &amp; (irq_nm_i | (irq_pending_i &amp; csr_mstatus_mie_i));
	always @(*) begin : gen_mfip_id
		if (irqs_i[14])
			mfip_id = 4&#39;d14;
		else if (irqs_i[13])
			mfip_id = 4&#39;d13;
		else if (irqs_i[12])
			mfip_id = 4&#39;d12;
		else if (irqs_i[11])
			mfip_id = 4&#39;d11;
		else if (irqs_i[10])
			mfip_id = 4&#39;d10;
		else if (irqs_i[9])
			mfip_id = 4&#39;d9;
		else if (irqs_i[8])
			mfip_id = 4&#39;d8;
		else if (irqs_i[7])
			mfip_id = 4&#39;d7;
		else if (irqs_i[6])
			mfip_id = 4&#39;d6;
		else if (irqs_i[5])
			mfip_id = 4&#39;d5;
		else if (irqs_i[5])
			mfip_id = 4&#39;d5;
		else if (irqs_i[4])
			mfip_id = 4&#39;d4;
		else if (irqs_i[3])
			mfip_id = 4&#39;d3;
		else if (irqs_i[2])
			mfip_id = 4&#39;d2;
		else if (irqs_i[1])
			mfip_id = 4&#39;d1;
		else
			mfip_id = 4&#39;d0;
	end
	assign unused_irq_timer = irqs_i[16];
	localparam [3:0] BOOT_SET = 1;
	localparam [3:0] DBG_TAKEN_ID = 9;
	localparam [3:0] DBG_TAKEN_IF = 8;
	localparam [3:0] FIRST_FETCH = 4;
	localparam [3:0] IRQ_TAKEN = 7;
	localparam [3:0] RESET = 0;
	localparam [3:0] SLEEP = 3;
	localparam [3:0] WAIT_SLEEP = 2;
	function automatic [5:0] sv2v_cast_6;
		input reg [5:0] inp;
		sv2v_cast_6 = inp;
	endfunction
	always @(*) begin
		instr_req_o = 1&#39;b1;
		csr_save_if_o = 1&#39;b0;
		csr_save_id_o = 1&#39;b0;
		csr_save_wb_o = 1&#39;b0;
		csr_restore_mret_id_o = 1&#39;b0;
		csr_restore_dret_id_o = 1&#39;b0;
		csr_save_cause_o = 1&#39;b0;
		csr_mtval_o = &#39;sd0;
		pc_mux_o = PC_BOOT;
		pc_set_o = 1&#39;b0;
		exc_pc_mux_o = EXC_PC_IRQ;
		exc_cause_o = EXC_CAUSE_INSN_ADDR_MISA;
		ctrl_fsm_ns = ctrl_fsm_cs;
		ctrl_busy_o = 1&#39;b1;
		halt_if = 1&#39;b0;
		flush_id = 1&#39;b0;
		debug_csr_save_o = 1&#39;b0;
		debug_cause_o = DBG_CAUSE_EBREAK;
		debug_mode_d = debug_mode_q;
		nmi_mode_d = nmi_mode_q;
		perf_tbranch_o = 1&#39;b0;
		perf_jump_o = 1&#39;b0;
		controller_run_o = 1&#39;b0;
		case (ctrl_fsm_cs)
			RESET: begin
				instr_req_o = 1&#39;b0;
				pc_mux_o = PC_BOOT;
				pc_set_o = 1&#39;b1;
				if (fetch_enable_i)
					ctrl_fsm_ns = BOOT_SET;
			end
			BOOT_SET: begin
				instr_req_o = 1&#39;b1;
				pc_mux_o = PC_BOOT;
				pc_set_o = 1&#39;b1;
				ctrl_fsm_ns = FIRST_FETCH;
			end
			WAIT_SLEEP: begin
				ctrl_busy_o = 1&#39;b0;
				instr_req_o = 1&#39;b0;
				halt_if = 1&#39;b1;
				flush_id = 1&#39;b1;
				ctrl_fsm_ns = SLEEP;
			end
			SLEEP: begin
				instr_req_o = 1&#39;b0;
				halt_if = 1&#39;b1;
				flush_id = 1&#39;b1;
				if ((((irq_nm_i || irq_pending_i) || debug_req_i) || debug_mode_q) || debug_single_step_i)
					ctrl_fsm_ns = FIRST_FETCH;
				else
					ctrl_busy_o = 1&#39;b0;
			end
			FIRST_FETCH: begin
				if (id_in_ready_o)
					ctrl_fsm_ns = DECODE;
				if (handle_irq) begin
					ctrl_fsm_ns = IRQ_TAKEN;
					halt_if = 1&#39;b1;
				end
				if (enter_debug_mode) begin
					ctrl_fsm_ns = DBG_TAKEN_IF;
					halt_if = 1&#39;b1;
				end
			end
			DECODE: begin
				controller_run_o = 1&#39;b1;
				pc_mux_o = PC_JUMP;
				if (instr_valid_i) begin
					if (special_req_all) begin
						ctrl_fsm_ns = FLUSH;
						halt_if = 1&#39;b1;
					end
					if ((branch_set_i || jump_set_i) &amp;&amp; ~special_req_branch) begin
						pc_set_o = 1&#39;b1;
						perf_tbranch_o = branch_set_i;
						perf_jump_o = jump_set_i;
					end
					if ((enter_debug_mode || handle_irq) &amp;&amp; stall)
						halt_if = 1&#39;b1;
				end
				if (!stall &amp;&amp; !special_req_all)
					if (enter_debug_mode) begin
						ctrl_fsm_ns = DBG_TAKEN_IF;
						halt_if = 1&#39;b1;
					end
					else if (handle_irq) begin
						ctrl_fsm_ns = IRQ_TAKEN;
						halt_if = 1&#39;b1;
					end
			end
			IRQ_TAKEN: begin
				pc_mux_o = PC_EXC;
				exc_pc_mux_o = EXC_PC_IRQ;
				if (handle_irq) begin
					pc_set_o = 1&#39;b1;
					csr_save_if_o = 1&#39;b1;
					csr_save_cause_o = 1&#39;b1;
					if (irq_nm_i &amp;&amp; !nmi_mode_q) begin
						exc_cause_o = EXC_CAUSE_IRQ_NM;
						nmi_mode_d = 1&#39;b1;
					end
					else if (irqs_i[14-:15] != 15&#39;b0)
						exc_cause_o = sv2v_cast_6({2&#39;b11, mfip_id});
					else if (irqs_i[15])
						exc_cause_o = EXC_CAUSE_IRQ_EXTERNAL_M;
					else if (irqs_i[17])
						exc_cause_o = EXC_CAUSE_IRQ_SOFTWARE_M;
					else
						exc_cause_o = EXC_CAUSE_IRQ_TIMER_M;
				end
				ctrl_fsm_ns = DECODE;
			end
			DBG_TAKEN_IF: begin
				pc_mux_o = PC_EXC;
				exc_pc_mux_o = EXC_PC_DBD;
				if ((debug_single_step_i || debug_req_i) || trigger_match_i) begin
					flush_id = 1&#39;b1;
					pc_set_o = 1&#39;b1;
					csr_save_if_o = 1&#39;b1;
					debug_csr_save_o = 1&#39;b1;
					csr_save_cause_o = 1&#39;b1;
					if (trigger_match_i)
						debug_cause_o = DBG_CAUSE_TRIGGER;
					else if (debug_single_step_i)
						debug_cause_o = DBG_CAUSE_STEP;
					else
						debug_cause_o = DBG_CAUSE_HALTREQ;
					debug_mode_d = 1&#39;b1;
				end
				ctrl_fsm_ns = DECODE;
			end
			DBG_TAKEN_ID: begin
				flush_id = 1&#39;b1;
				pc_mux_o = PC_EXC;
				pc_set_o = 1&#39;b1;
				exc_pc_mux_o = EXC_PC_DBD;
				if (ebreak_into_debug &amp;&amp; !debug_mode_q) begin
					csr_save_cause_o = 1&#39;b1;
					csr_save_id_o = 1&#39;b1;
					debug_csr_save_o = 1&#39;b1;
					debug_cause_o = DBG_CAUSE_EBREAK;
				end
				debug_mode_d = 1&#39;b1;
				ctrl_fsm_ns = DECODE;
			end
			FLUSH: begin
				halt_if = 1&#39;b1;
				flush_id = 1&#39;b1;
				ctrl_fsm_ns = DECODE;
				if ((exc_req_q || store_err_q) || load_err_q) begin
					pc_set_o = 1&#39;b1;
					pc_mux_o = PC_EXC;
					exc_pc_mux_o = (debug_mode_q ? EXC_PC_DBG_EXC : EXC_PC_EXC);
					if (WritebackStage) begin : g_writeback_mepc_save
						csr_save_id_o = ~(store_err_q | load_err_q);
						csr_save_wb_o = store_err_q | load_err_q;
					end
					else begin : g_no_writeback_mepc_save
						csr_save_id_o = 1&#39;b0;
					end
					csr_save_cause_o = 1&#39;b1;
					if (instr_fetch_err) begin
						exc_cause_o = EXC_CAUSE_INSTR_ACCESS_FAULT;
						csr_mtval_o = (instr_fetch_err_plus2_i ? pc_id_i + 32&#39;d2 : pc_id_i);
					end
					else if (illegal_insn_q) begin
						exc_cause_o = EXC_CAUSE_ILLEGAL_INSN;
						csr_mtval_o = (instr_is_compressed_i ? {16&#39;b0, instr_compressed_i} : instr_i);
					end
					else if (ecall_insn)
						exc_cause_o = (priv_mode_i == PRIV_LVL_M ? EXC_CAUSE_ECALL_MMODE : EXC_CAUSE_ECALL_UMODE);
					else if (ebrk_insn) begin
						if (debug_mode_q | ebreak_into_debug) begin
							pc_set_o = 1&#39;b0;
							csr_save_id_o = 1&#39;b0;
							csr_save_cause_o = 1&#39;b0;
							ctrl_fsm_ns = DBG_TAKEN_ID;
							flush_id = 1&#39;b0;
						end
						else
							exc_cause_o = EXC_CAUSE_BREAKPOINT;
					end
					else if (store_err_q) begin
						exc_cause_o = EXC_CAUSE_STORE_ACCESS_FAULT;
						csr_mtval_o = lsu_addr_last_i;
					end
					else begin
						exc_cause_o = EXC_CAUSE_LOAD_ACCESS_FAULT;
						csr_mtval_o = lsu_addr_last_i;
					end
				end
				else if (mret_insn) begin
					pc_mux_o = PC_ERET;
					pc_set_o = 1&#39;b1;
					csr_restore_mret_id_o = 1&#39;b1;
					if (nmi_mode_q)
						nmi_mode_d = 1&#39;b0;
				end
				else if (dret_insn) begin
					pc_mux_o = PC_DRET;
					pc_set_o = 1&#39;b1;
					debug_mode_d = 1&#39;b0;
					csr_restore_dret_id_o = 1&#39;b1;
				end
				else if (wfi_insn)
					ctrl_fsm_ns = WAIT_SLEEP;
				else if (csr_pipe_flush &amp;&amp; handle_irq)
					ctrl_fsm_ns = IRQ_TAKEN;
				if (enter_debug_mode)
					ctrl_fsm_ns = DBG_TAKEN_IF;
			end
			default: begin
				instr_req_o = 1&#39;b0;
				ctrl_fsm_ns = RESET;
			end
		endcase
	end
	assign flush_id_o = flush_id;
	assign debug_mode_o = debug_mode_q;
	assign nmi_mode_o = nmi_mode_q;
	assign stall = stall_id_i | stall_wb_i;
	assign id_in_ready_o = ~stall &amp; ~halt_if;
	assign instr_valid_clear_o = ~(stall | halt_if) | flush_id;
	always @(posedge clk_i or negedge rst_ni) begin : update_regs
		if (!rst_ni) begin
			ctrl_fsm_cs &lt;= RESET;
			nmi_mode_q &lt;= 1&#39;b0;
			debug_mode_q &lt;= 1&#39;b0;
			load_err_q &lt;= 1&#39;b0;
			store_err_q &lt;= 1&#39;b0;
			exc_req_q &lt;= 1&#39;b0;
			illegal_insn_q &lt;= 1&#39;b0;
		end
		else begin
			ctrl_fsm_cs &lt;= ctrl_fsm_ns;
			nmi_mode_q &lt;= nmi_mode_d;
			debug_mode_q &lt;= debug_mode_d;
			load_err_q &lt;= load_err_d;
			store_err_q &lt;= store_err_d;
			exc_req_q &lt;= exc_req_d;
			illegal_insn_q &lt;= illegal_insn_d;
		end
	end
endmodule
module ibex_cs_registers (
	clk_i,
	rst_ni,
	hart_id_i,
	priv_mode_id_o,
	priv_mode_if_o,
	priv_mode_lsu_o,
	csr_mstatus_tw_o,
	csr_mtvec_o,
	csr_mtvec_init_i,
	boot_addr_i,
	csr_access_i,
	csr_addr_i,
	csr_wdata_i,
	csr_op_i,
	csr_op_en_i,
	csr_rdata_o,
	irq_software_i,
	irq_timer_i,
	irq_external_i,
	irq_fast_i,
	nmi_mode_i,
	irq_pending_o,
	irqs_o,
	csr_mstatus_mie_o,
	csr_mepc_o,
	csr_pmp_cfg_o,
	csr_pmp_addr_o,
	debug_mode_i,
	debug_cause_i,
	debug_csr_save_i,
	csr_depc_o,
	debug_single_step_o,
	debug_ebreakm_o,
	debug_ebreaku_o,
	trigger_match_o,
	pc_if_i,
	pc_id_i,
	pc_wb_i,
	data_ind_timing_o,
	icache_enable_o,
	csr_save_if_i,
	csr_save_id_i,
	csr_save_wb_i,
	csr_restore_mret_i,
	csr_restore_dret_i,
	csr_save_cause_i,
	csr_mcause_i,
	csr_mtval_i,
	illegal_csr_insn_o,
	instr_ret_i,
	instr_ret_compressed_i,
	iside_wait_i,
	jump_i,
	branch_i,
	branch_taken_i,
	mem_load_i,
	mem_store_i,
	dside_wait_i,
	mul_wait_i,
	div_wait_i
);
	parameter [0:0] DbgTriggerEn = 0;
	parameter [0:0] DataIndTiming = 1&#39;b0;
	parameter [0:0] ICache = 1&#39;b0;
	parameter [31:0] MHPMCounterNum = 10;
	parameter [31:0] MHPMCounterWidth = 40;
	parameter [0:0] PMPEnable = 0;
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumRegions = 4;
	parameter [0:0] RV32E = 0;
	parameter [0:0] RV32M = 0;
	input wire clk_i;
	input wire rst_ni;
	input wire [31:0] hart_id_i;
	output wire [1:0] priv_mode_id_o;
	output wire [1:0] priv_mode_if_o;
	output wire [1:0] priv_mode_lsu_o;
	output wire csr_mstatus_tw_o;
	output wire [31:0] csr_mtvec_o;
	input wire csr_mtvec_init_i;
	input wire [31:0] boot_addr_i;
	input wire csr_access_i;
	input wire [11:0] csr_addr_i;
	input wire [31:0] csr_wdata_i;
	input wire [1:0] csr_op_i;
	input csr_op_en_i;
	output wire [31:0] csr_rdata_o;
	input wire irq_software_i;
	input wire irq_timer_i;
	input wire irq_external_i;
	input wire [14:0] irq_fast_i;
	input wire nmi_mode_i;
	output wire irq_pending_o;
	output wire [17:0] irqs_o;
	output wire csr_mstatus_mie_o;
	output wire [31:0] csr_mepc_o;
	output wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1) : (PMPNumRegions * 6) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 6 : 0)] csr_pmp_cfg_o;
	output wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1) : (PMPNumRegions * 34) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 34 : 0)] csr_pmp_addr_o;
	input wire debug_mode_i;
	input wire [2:0] debug_cause_i;
	input wire debug_csr_save_i;
	output wire [31:0] csr_depc_o;
	output wire debug_single_step_o;
	output wire debug_ebreakm_o;
	output wire debug_ebreaku_o;
	output wire trigger_match_o;
	input wire [31:0] pc_if_i;
	input wire [31:0] pc_id_i;
	input wire [31:0] pc_wb_i;
	output wire data_ind_timing_o;
	output wire icache_enable_o;
	input wire csr_save_if_i;
	input wire csr_save_id_i;
	input wire csr_save_wb_i;
	input wire csr_restore_mret_i;
	input wire csr_restore_dret_i;
	input wire csr_save_cause_i;
	input wire [5:0] csr_mcause_i;
	input wire [31:0] csr_mtval_i;
	output wire illegal_csr_insn_o;
	input wire instr_ret_i;
	input wire instr_ret_compressed_i;
	input wire iside_wait_i;
	input wire jump_i;
	input wire branch_i;
	input wire branch_taken_i;
	input wire mem_load_i;
	input wire mem_store_i;
	input wire dside_wait_i;
	input wire mul_wait_i;
	input wire div_wait_i;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [1:0] MXL = 2&#39;d1;
	function automatic [31:0] sv2v_cast_32;
		input reg [31:0] inp;
		sv2v_cast_32 = inp;
	endfunction
	localparam [31:0] MISA_VALUE = ((((((((((0 | 4) | 0) | (sv2v_cast_32(RV32E) &lt;&lt; 4)) | 0) | (sv2v_cast_32(!RV32E) &lt;&lt; 8)) | (sv2v_cast_32(RV32M) &lt;&lt; 12)) | 0) | 0) | 1048576) | 0) | (sv2v_cast_32(MXL) &lt;&lt; 30);
	reg [31:0] exception_pc;
	reg [1:0] priv_lvl_q;
	reg [1:0] priv_lvl_d;
	reg [5:0] mstatus_q;
	reg [5:0] mstatus_d;
	reg [17:0] mie_q;
	reg [17:0] mie_d;
	reg [31:0] mscratch_q;
	reg [31:0] mscratch_d;
	reg [31:0] mepc_q;
	reg [31:0] mepc_d;
	reg [5:0] mcause_q;
	reg [5:0] mcause_d;
	reg [31:0] mtval_q;
	reg [31:0] mtval_d;
	reg [31:0] mtvec_q;
	reg [31:0] mtvec_d;
	wire [17:0] mip;
	reg [31:0] dcsr_q;
	reg [31:0] dcsr_d;
	reg [31:0] depc_q;
	reg [31:0] depc_d;
	reg [31:0] dscratch0_q;
	reg [31:0] dscratch0_d;
	reg [31:0] dscratch1_q;
	reg [31:0] dscratch1_d;
	reg [2:0] mstack_q;
	reg [2:0] mstack_d;
	reg [31:0] mstack_epc_q;
	reg [31:0] mstack_epc_d;
	reg [5:0] mstack_cause_q;
	reg [5:0] mstack_cause_d;
	reg [31:0] pmp_addr_rdata [0:PMP_MAX_REGIONS - 1];
	wire [PMP_CFG_W - 1:0] pmp_cfg_rdata [0:PMP_MAX_REGIONS - 1];
	wire [31:0] mcountinhibit;
	reg [MHPMCounterNum + 2:0] mcountinhibit_d;
	reg [MHPMCounterNum + 2:0] mcountinhibit_q;
	reg mcountinhibit_we;
	wire [2047:0] mhpmcounter;
	reg [31:0] mhpmcounter_we;
	reg [31:0] mhpmcounterh_we;
	reg [31:0] mhpmcounter_incr;
	reg [31:0] mhpmevent [0:31];
	wire [4:0] mhpmcounter_idx;
	wire [31:0] tselect_rdata;
	wire [31:0] tmatch_control_rdata;
	wire [31:0] tmatch_value_rdata;
	wire [31:0] cpuctrl_rdata;
	wire [31:0] cpuctrl_wdata;
	reg [31:0] csr_wdata_int;
	reg [31:0] csr_rdata_int;
	wire csr_we_int;
	wire csr_wreq;
	reg illegal_csr;
	wire illegal_csr_priv;
	wire illegal_csr_write;
	wire [7:0] unused_boot_addr;
	wire [2:0] unused_csr_addr;
	assign unused_boot_addr = boot_addr_i[7:0];
	wire [11:0] csr_addr;
	assign csr_addr = csr_addr_i;
	assign unused_csr_addr = csr_addr[7:5];
	assign mhpmcounter_idx = csr_addr[4:0];
	assign illegal_csr_priv = csr_addr[9:8] &gt; priv_lvl_q;
	assign illegal_csr_write = (csr_addr[11:10] == 2&#39;b11) &amp;&amp; csr_wreq;
	assign illegal_csr_insn_o = csr_access_i &amp; ((illegal_csr | illegal_csr_write) | illegal_csr_priv);
	assign mip[17] = irq_software_i;
	assign mip[16] = irq_timer_i;
	assign mip[15] = irq_external_i;
	assign mip[14-:15] = irq_fast_i;
	always @(*) begin
		csr_rdata_int = &#39;sd0;
		illegal_csr = 1&#39;b0;
		case (csr_addr_i)
			CSR_MHARTID: csr_rdata_int = hart_id_i;
			CSR_MSTATUS: begin
				csr_rdata_int = &#39;sd0;
				csr_rdata_int[CSR_MSTATUS_MIE_BIT] = mstatus_q[5];
				csr_rdata_int[CSR_MSTATUS_MPIE_BIT] = mstatus_q[4];
				csr_rdata_int[CSR_MSTATUS_MPP_BIT_HIGH:CSR_MSTATUS_MPP_BIT_LOW] = mstatus_q[3-:2];
				csr_rdata_int[CSR_MSTATUS_MPRV_BIT] = mstatus_q[1];
				csr_rdata_int[CSR_MSTATUS_TW_BIT] = mstatus_q[0];
			end
			CSR_MISA: csr_rdata_int = MISA_VALUE;
			CSR_MIE: begin
				csr_rdata_int = &#39;sd0;
				csr_rdata_int[CSR_MSIX_BIT] = mie_q[17];
				csr_rdata_int[CSR_MTIX_BIT] = mie_q[16];
				csr_rdata_int[CSR_MEIX_BIT] = mie_q[15];
				csr_rdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW] = mie_q[14-:15];
			end
			CSR_MSCRATCH: csr_rdata_int = mscratch_q;
			CSR_MTVEC: csr_rdata_int = mtvec_q;
			CSR_MEPC: csr_rdata_int = mepc_q;
			CSR_MCAUSE: csr_rdata_int = {mcause_q[5], 26&#39;b0, mcause_q[4:0]};
			CSR_MTVAL: csr_rdata_int = mtval_q;
			CSR_MIP: begin
				csr_rdata_int = &#39;sd0;
				csr_rdata_int[CSR_MSIX_BIT] = mip[17];
				csr_rdata_int[CSR_MTIX_BIT] = mip[16];
				csr_rdata_int[CSR_MEIX_BIT] = mip[15];
				csr_rdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW] = mip[14-:15];
			end
			CSR_PMPCFG0: csr_rdata_int = {pmp_cfg_rdata[3], pmp_cfg_rdata[2], pmp_cfg_rdata[1], pmp_cfg_rdata[0]};
			CSR_PMPCFG1: csr_rdata_int = {pmp_cfg_rdata[7], pmp_cfg_rdata[6], pmp_cfg_rdata[5], pmp_cfg_rdata[4]};
			CSR_PMPCFG2: csr_rdata_int = {pmp_cfg_rdata[11], pmp_cfg_rdata[10], pmp_cfg_rdata[9], pmp_cfg_rdata[8]};
			CSR_PMPCFG3: csr_rdata_int = {pmp_cfg_rdata[15], pmp_cfg_rdata[14], pmp_cfg_rdata[13], pmp_cfg_rdata[12]};
			CSR_PMPADDR0: csr_rdata_int = pmp_addr_rdata[0];
			CSR_PMPADDR1: csr_rdata_int = pmp_addr_rdata[1];
			CSR_PMPADDR2: csr_rdata_int = pmp_addr_rdata[2];
			CSR_PMPADDR3: csr_rdata_int = pmp_addr_rdata[3];
			CSR_PMPADDR4: csr_rdata_int = pmp_addr_rdata[4];
			CSR_PMPADDR5: csr_rdata_int = pmp_addr_rdata[5];
			CSR_PMPADDR6: csr_rdata_int = pmp_addr_rdata[6];
			CSR_PMPADDR7: csr_rdata_int = pmp_addr_rdata[7];
			CSR_PMPADDR8: csr_rdata_int = pmp_addr_rdata[8];
			CSR_PMPADDR9: csr_rdata_int = pmp_addr_rdata[9];
			CSR_PMPADDR10: csr_rdata_int = pmp_addr_rdata[10];
			CSR_PMPADDR11: csr_rdata_int = pmp_addr_rdata[11];
			CSR_PMPADDR12: csr_rdata_int = pmp_addr_rdata[12];
			CSR_PMPADDR13: csr_rdata_int = pmp_addr_rdata[13];
			CSR_PMPADDR14: csr_rdata_int = pmp_addr_rdata[14];
			CSR_PMPADDR15: csr_rdata_int = pmp_addr_rdata[15];
			CSR_DCSR: begin
				csr_rdata_int = dcsr_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DPC: begin
				csr_rdata_int = depc_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DSCRATCH0: begin
				csr_rdata_int = dscratch0_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DSCRATCH1: begin
				csr_rdata_int = dscratch1_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_MCOUNTINHIBIT: csr_rdata_int = mcountinhibit;
			CSR_MHPMEVENT3, CSR_MHPMEVENT4, CSR_MHPMEVENT5, CSR_MHPMEVENT6, CSR_MHPMEVENT7, CSR_MHPMEVENT8, CSR_MHPMEVENT9, CSR_MHPMEVENT10, CSR_MHPMEVENT11, CSR_MHPMEVENT12, CSR_MHPMEVENT13, CSR_MHPMEVENT14, CSR_MHPMEVENT15, CSR_MHPMEVENT16, CSR_MHPMEVENT17, CSR_MHPMEVENT18, CSR_MHPMEVENT19, CSR_MHPMEVENT20, CSR_MHPMEVENT21, CSR_MHPMEVENT22, CSR_MHPMEVENT23, CSR_MHPMEVENT24, CSR_MHPMEVENT25, CSR_MHPMEVENT26, CSR_MHPMEVENT27, CSR_MHPMEVENT28, CSR_MHPMEVENT29, CSR_MHPMEVENT30, CSR_MHPMEVENT31: csr_rdata_int = mhpmevent[mhpmcounter_idx];
			CSR_MCYCLE, CSR_MINSTRET, CSR_MHPMCOUNTER3, CSR_MHPMCOUNTER4, CSR_MHPMCOUNTER5, CSR_MHPMCOUNTER6, CSR_MHPMCOUNTER7, CSR_MHPMCOUNTER8, CSR_MHPMCOUNTER9, CSR_MHPMCOUNTER10, CSR_MHPMCOUNTER11, CSR_MHPMCOUNTER12, CSR_MHPMCOUNTER13, CSR_MHPMCOUNTER14, CSR_MHPMCOUNTER15, CSR_MHPMCOUNTER16, CSR_MHPMCOUNTER17, CSR_MHPMCOUNTER18, CSR_MHPMCOUNTER19, CSR_MHPMCOUNTER20, CSR_MHPMCOUNTER21, CSR_MHPMCOUNTER22, CSR_MHPMCOUNTER23, CSR_MHPMCOUNTER24, CSR_MHPMCOUNTER25, CSR_MHPMCOUNTER26, CSR_MHPMCOUNTER27, CSR_MHPMCOUNTER28, CSR_MHPMCOUNTER29, CSR_MHPMCOUNTER30, CSR_MHPMCOUNTER31: csr_rdata_int = mhpmcounter[((31 - mhpmcounter_idx) * 64) + 31-:32];
			CSR_MCYCLEH, CSR_MINSTRETH, CSR_MHPMCOUNTER3H, CSR_MHPMCOUNTER4H, CSR_MHPMCOUNTER5H, CSR_MHPMCOUNTER6H, CSR_MHPMCOUNTER7H, CSR_MHPMCOUNTER8H, CSR_MHPMCOUNTER9H, CSR_MHPMCOUNTER10H, CSR_MHPMCOUNTER11H, CSR_MHPMCOUNTER12H, CSR_MHPMCOUNTER13H, CSR_MHPMCOUNTER14H, CSR_MHPMCOUNTER15H, CSR_MHPMCOUNTER16H, CSR_MHPMCOUNTER17H, CSR_MHPMCOUNTER18H, CSR_MHPMCOUNTER19H, CSR_MHPMCOUNTER20H, CSR_MHPMCOUNTER21H, CSR_MHPMCOUNTER22H, CSR_MHPMCOUNTER23H, CSR_MHPMCOUNTER24H, CSR_MHPMCOUNTER25H, CSR_MHPMCOUNTER26H, CSR_MHPMCOUNTER27H, CSR_MHPMCOUNTER28H, CSR_MHPMCOUNTER29H, CSR_MHPMCOUNTER30H, CSR_MHPMCOUNTER31H: csr_rdata_int = mhpmcounter[((31 - mhpmcounter_idx) * 64) + 63-:32];
			CSR_TSELECT: begin
				csr_rdata_int = tselect_rdata;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_TDATA1: begin
				csr_rdata_int = tmatch_control_rdata;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_TDATA2: begin
				csr_rdata_int = tmatch_value_rdata;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_TDATA3: begin
				csr_rdata_int = &#39;sd0;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_MCONTEXT: begin
				csr_rdata_int = &#39;sd0;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_SCONTEXT: begin
				csr_rdata_int = &#39;sd0;
				illegal_csr = ~DbgTriggerEn;
			end
			CSR_CPUCTRL: csr_rdata_int = cpuctrl_rdata;
			default: illegal_csr = 1&#39;b1;
		endcase
	end
	function automatic [1:0] sv2v_cast_2;
		input reg [1:0] inp;
		sv2v_cast_2 = inp;
	endfunction
	always @(*) begin
		exception_pc = pc_id_i;
		priv_lvl_d = priv_lvl_q;
		mstatus_d = mstatus_q;
		mie_d = mie_q;
		mscratch_d = mscratch_q;
		mepc_d = mepc_q;
		mcause_d = mcause_q;
		mtval_d = mtval_q;
		mtvec_d = (csr_mtvec_init_i ? {boot_addr_i[31:8], 6&#39;b0, 2&#39;b01} : mtvec_q);
		dcsr_d = dcsr_q;
		depc_d = depc_q;
		dscratch0_d = dscratch0_q;
		dscratch1_d = dscratch1_q;
		mstack_d = mstack_q;
		mstack_epc_d = mstack_epc_q;
		mstack_cause_d = mstack_cause_q;
		mcountinhibit_we = 1&#39;b0;
		mhpmcounter_we = &#39;sd0;
		mhpmcounterh_we = &#39;sd0;
		if (csr_we_int)
			case (csr_addr_i)
				CSR_MSTATUS: begin
					mstatus_d = sv2v_struct_BF3E9(csr_wdata_int[CSR_MSTATUS_MIE_BIT], csr_wdata_int[CSR_MSTATUS_MPIE_BIT], sv2v_cast_2(csr_wdata_int[CSR_MSTATUS_MPP_BIT_HIGH:CSR_MSTATUS_MPP_BIT_LOW]), csr_wdata_int[CSR_MSTATUS_MPRV_BIT], csr_wdata_int[CSR_MSTATUS_TW_BIT]);
					if ((mstatus_d[3-:2] != PRIV_LVL_M) &amp;&amp; (mstatus_d[3-:2] != PRIV_LVL_U))
						mstatus_d[3-:2] = PRIV_LVL_M;
				end
				CSR_MIE: begin
					mie_d[17] = csr_wdata_int[CSR_MSIX_BIT];
					mie_d[16] = csr_wdata_int[CSR_MTIX_BIT];
					mie_d[15] = csr_wdata_int[CSR_MEIX_BIT];
					mie_d[14-:15] = csr_wdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW];
				end
				CSR_MSCRATCH: mscratch_d = csr_wdata_int;
				CSR_MEPC: mepc_d = {csr_wdata_int[31:1], 1&#39;b0};
				CSR_MCAUSE: mcause_d = {csr_wdata_int[31], csr_wdata_int[4:0]};
				CSR_MTVAL: mtval_d = csr_wdata_int;
				CSR_MTVEC: mtvec_d = {csr_wdata_int[31:8], 6&#39;b0, 2&#39;b01};
				CSR_DCSR: begin
					dcsr_d = csr_wdata_int;
					dcsr_d[31-:4] = XDEBUGVER_STD;
					if ((dcsr_d[1-:2] != PRIV_LVL_M) &amp;&amp; (dcsr_d[1-:2] != PRIV_LVL_U))
						dcsr_d[1-:2] = PRIV_LVL_M;
					dcsr_d[3] = 1&#39;b0;
					dcsr_d[4] = 1&#39;b0;
					dcsr_d[10] = 1&#39;b0;
					dcsr_d[9] = 1&#39;b0;
					dcsr_d[5] = 1&#39;b0;
					dcsr_d[14] = 1&#39;b0;
					dcsr_d[27-:12] = 12&#39;h0;
				end
				CSR_DPC: depc_d = {csr_wdata_int[31:1], 1&#39;b0};
				CSR_DSCRATCH0: dscratch0_d = csr_wdata_int;
				CSR_DSCRATCH1: dscratch1_d = csr_wdata_int;
				CSR_MCOUNTINHIBIT: mcountinhibit_we = 1&#39;b1;
				CSR_MCYCLE, CSR_MINSTRET, CSR_MHPMCOUNTER3, CSR_MHPMCOUNTER4, CSR_MHPMCOUNTER5, CSR_MHPMCOUNTER6, CSR_MHPMCOUNTER7, CSR_MHPMCOUNTER8, CSR_MHPMCOUNTER9, CSR_MHPMCOUNTER10, CSR_MHPMCOUNTER11, CSR_MHPMCOUNTER12, CSR_MHPMCOUNTER13, CSR_MHPMCOUNTER14, CSR_MHPMCOUNTER15, CSR_MHPMCOUNTER16, CSR_MHPMCOUNTER17, CSR_MHPMCOUNTER18, CSR_MHPMCOUNTER19, CSR_MHPMCOUNTER20, CSR_MHPMCOUNTER21, CSR_MHPMCOUNTER22, CSR_MHPMCOUNTER23, CSR_MHPMCOUNTER24, CSR_MHPMCOUNTER25, CSR_MHPMCOUNTER26, CSR_MHPMCOUNTER27, CSR_MHPMCOUNTER28, CSR_MHPMCOUNTER29, CSR_MHPMCOUNTER30, CSR_MHPMCOUNTER31: mhpmcounter_we[mhpmcounter_idx] = 1&#39;b1;
				CSR_MCYCLEH, CSR_MINSTRETH, CSR_MHPMCOUNTER3H, CSR_MHPMCOUNTER4H, CSR_MHPMCOUNTER5H, CSR_MHPMCOUNTER6H, CSR_MHPMCOUNTER7H, CSR_MHPMCOUNTER8H, CSR_MHPMCOUNTER9H, CSR_MHPMCOUNTER10H, CSR_MHPMCOUNTER11H, CSR_MHPMCOUNTER12H, CSR_MHPMCOUNTER13H, CSR_MHPMCOUNTER14H, CSR_MHPMCOUNTER15H, CSR_MHPMCOUNTER16H, CSR_MHPMCOUNTER17H, CSR_MHPMCOUNTER18H, CSR_MHPMCOUNTER19H, CSR_MHPMCOUNTER20H, CSR_MHPMCOUNTER21H, CSR_MHPMCOUNTER22H, CSR_MHPMCOUNTER23H, CSR_MHPMCOUNTER24H, CSR_MHPMCOUNTER25H, CSR_MHPMCOUNTER26H, CSR_MHPMCOUNTER27H, CSR_MHPMCOUNTER28H, CSR_MHPMCOUNTER29H, CSR_MHPMCOUNTER30H, CSR_MHPMCOUNTER31H: mhpmcounterh_we[mhpmcounter_idx] = 1&#39;b1;
				default:
					;
			endcase
		case (1&#39;b1)
			csr_save_cause_i: begin
				case (1&#39;b1)
					csr_save_if_i: exception_pc = pc_if_i;
					csr_save_id_i: exception_pc = pc_id_i;
					csr_save_wb_i: exception_pc = pc_wb_i;
					default:
						;
				endcase
				priv_lvl_d = PRIV_LVL_M;
				if (debug_csr_save_i) begin
					dcsr_d[1-:2] = priv_lvl_q;
					dcsr_d[8-:3] = debug_cause_i;
					depc_d = exception_pc;
				end
				else if (!debug_mode_i) begin
					mtval_d = csr_mtval_i;
					mstatus_d[5] = 1&#39;b0;
					mstatus_d[4] = mstatus_q[5];
					mstatus_d[3-:2] = priv_lvl_q;
					mepc_d = exception_pc;
					mcause_d = csr_mcause_i;
					mstack_d[2] = mstatus_q[4];
					mstack_d[1-:2] = mstatus_q[3-:2];
					mstack_epc_d = mepc_q;
					mstack_cause_d = mcause_q;
				end
			end
			csr_restore_dret_i: priv_lvl_d = dcsr_q[1-:2];
			csr_restore_mret_i: begin
				priv_lvl_d = mstatus_q[3-:2];
				mstatus_d[5] = mstatus_q[4];
				if (nmi_mode_i) begin
					mstatus_d[4] = mstack_q[2];
					mstatus_d[3-:2] = mstack_q[1-:2];
					mepc_d = mstack_epc_q;
					mcause_d = mstack_cause_q;
				end
				else begin
					mstatus_d[4] = 1&#39;b1;
					mstatus_d[3-:2] = PRIV_LVL_U;
				end
			end
			default:
				;
		endcase
	end
	always @(*)
		case (csr_op_i)
			CSR_OP_WRITE: csr_wdata_int = csr_wdata_i;
			CSR_OP_SET: csr_wdata_int = csr_wdata_i | csr_rdata_o;
			CSR_OP_CLEAR: csr_wdata_int = ~csr_wdata_i &amp; csr_rdata_o;
			CSR_OP_READ: csr_wdata_int = csr_wdata_i;
			default: csr_wdata_int = csr_wdata_i;
		endcase
	assign csr_wreq = csr_op_en_i &amp; |{((CSR_OP_WRITE ^ (csr_op_i ^ csr_op_i)) === (csr_op_i ^ (CSR_OP_WRITE ^ CSR_OP_WRITE))) &amp; ((((csr_op_i ^ csr_op_i) ^ (CSR_OP_WRITE ^ CSR_OP_WRITE)) === (CSR_OP_WRITE ^ CSR_OP_WRITE)) | 1&#39;bx), ((CSR_OP_SET ^ (csr_op_i ^ csr_op_i)) === (csr_op_i ^ (CSR_OP_SET ^ CSR_OP_SET))) &amp; ((((csr_op_i ^ csr_op_i) ^ (CSR_OP_SET ^ CSR_OP_SET)) === (CSR_OP_SET ^ CSR_OP_SET)) | 1&#39;bx), ((CSR_OP_CLEAR ^ (csr_op_i ^ csr_op_i)) === (csr_op_i ^ (CSR_OP_CLEAR ^ CSR_OP_CLEAR))) &amp; ((((csr_op_i ^ csr_op_i) ^ (CSR_OP_CLEAR ^ CSR_OP_CLEAR)) === (CSR_OP_CLEAR ^ CSR_OP_CLEAR)) | 1&#39;bx)};
	assign csr_we_int = csr_wreq &amp; ~illegal_csr_insn_o;
	assign csr_rdata_o = csr_rdata_int;
	assign csr_mepc_o = mepc_q;
	assign csr_depc_o = depc_q;
	assign csr_mtvec_o = mtvec_q;
	assign csr_mstatus_mie_o = mstatus_q[5];
	assign csr_mstatus_tw_o = mstatus_q[0];
	assign debug_single_step_o = dcsr_q[2];
	assign debug_ebreakm_o = dcsr_q[15];
	assign debug_ebreaku_o = dcsr_q[12];
	assign irqs_o = mip &amp; mie_q;
	assign irq_pending_o = |irqs_o;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			priv_lvl_q &lt;= PRIV_LVL_M;
			mstatus_q &lt;= sv2v_struct_BF3E9(1&#39;b0, 1&#39;b1, PRIV_LVL_U, 1&#39;b0, 1&#39;b0);
			mie_q &lt;= &#39;sd0;
			mscratch_q &lt;= &#39;sd0;
			mepc_q &lt;= &#39;sd0;
			mcause_q &lt;= &#39;sd0;
			mtval_q &lt;= &#39;sd0;
			mtvec_q &lt;= 32&#39;b01;
			dcsr_q &lt;= sv2v_struct_996E9(XDEBUGVER_STD, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, DBG_CAUSE_NONE, &#39;sd0, &#39;sd0, &#39;sd0, &#39;sd0, PRIV_LVL_M);
			depc_q &lt;= &#39;sd0;
			dscratch0_q &lt;= &#39;sd0;
			dscratch1_q &lt;= &#39;sd0;
			mstack_q &lt;= sv2v_struct_70E1D(1&#39;b1, PRIV_LVL_U);
			mstack_epc_q &lt;= &#39;sd0;
			mstack_cause_q &lt;= &#39;sd0;
		end
		else begin
			priv_lvl_q &lt;= priv_lvl_d;
			mstatus_q &lt;= mstatus_d;
			mie_q &lt;= mie_d;
			mscratch_q &lt;= mscratch_d;
			mepc_q &lt;= mepc_d;
			mcause_q &lt;= mcause_d;
			mtval_q &lt;= mtval_d;
			mtvec_q &lt;= mtvec_d;
			dcsr_q &lt;= dcsr_d;
			depc_q &lt;= depc_d;
			dscratch0_q &lt;= dscratch0_d;
			dscratch1_q &lt;= dscratch1_d;
			mstack_q &lt;= mstack_d;
			mstack_epc_q &lt;= mstack_epc_d;
			mstack_cause_q &lt;= mstack_cause_d;
		end
	assign priv_mode_id_o = priv_lvl_q;
	assign priv_mode_if_o = priv_lvl_d;
	assign priv_mode_lsu_o = (mstatus_q[1] ? mstatus_q[3-:2] : priv_lvl_q);
	function automatic [5:0] sv2v_cast_6;
		input reg [5:0] inp;
		sv2v_cast_6 = inp;
	endfunction
	generate
		genvar i;
		if (PMPEnable) begin : g_pmp_registers
			reg [5:0] pmp_cfg [0:PMPNumRegions - 1];
			reg [5:0] pmp_cfg_wdata [0:PMPNumRegions - 1];
			reg [31:0] pmp_addr [0:PMPNumRegions - 1];
			wire [PMPNumRegions - 1:0] pmp_cfg_we;
			wire [PMPNumRegions - 1:0] pmp_addr_we;
			for (i = 0; i &lt; PMP_MAX_REGIONS; i = i + 1) begin : g_exp_rd_data
				if (i &lt; PMPNumRegions) begin : g_implemented_regions
					assign pmp_cfg_rdata[i] = {pmp_cfg[i][5], 2&#39;b00, pmp_cfg[i][4-:2], pmp_cfg[i][2], pmp_cfg[i][1], pmp_cfg[i][0]};
					if (PMPGranularity == 0) begin : g_pmp_g0
						always @(*) pmp_addr_rdata[i] = pmp_addr[i];
					end
					else if (PMPGranularity == 1) begin : g_pmp_g1
						always @(*) begin
							pmp_addr_rdata[i] = pmp_addr[i];
							if ((pmp_cfg[i][4-:2] == PMP_MODE_OFF) || (pmp_cfg[i][4-:2] == PMP_MODE_TOR))
								pmp_addr_rdata[i][PMPGranularity - 1:0] = &#39;sd0;
						end
					end
					else begin : g_pmp_g2
						always @(*) begin
							pmp_addr_rdata[i] = pmp_addr[i];
							if ((pmp_cfg[i][4-:2] == PMP_MODE_OFF) || (pmp_cfg[i][4-:2] == PMP_MODE_TOR))
								pmp_addr_rdata[i][PMPGranularity - 1:0] = &#39;sd0;
							else if (pmp_cfg[i][4-:2] == PMP_MODE_NAPOT)
								pmp_addr_rdata[i][PMPGranularity - 2:0] = -&#39;sd1;
						end
					end
				end
				else begin : g_other_regions
					assign pmp_cfg_rdata[i] = &#39;sd0;
					always @(*) pmp_addr_rdata[i] = &#39;sd0;
				end
			end
			for (i = 0; i &lt; PMPNumRegions; i = i + 1) begin : g_pmp_csrs
				assign pmp_cfg_we[i] = (csr_we_int &amp; ~pmp_cfg[i][5]) &amp; (csr_addr == (CSR_OFF_PMP_CFG + (i[11:0] &gt;&gt; 2)));
				always @(*) pmp_cfg_wdata[i][5] = csr_wdata_int[((i % 4) * PMP_CFG_W) + 7];
				always @(*)
					case (csr_wdata_int[((i % 4) * PMP_CFG_W) + 3+:2])
						2&#39;b00: pmp_cfg_wdata[i][4-:2] = PMP_MODE_OFF;
						2&#39;b01: pmp_cfg_wdata[i][4-:2] = PMP_MODE_TOR;
						2&#39;b10: pmp_cfg_wdata[i][4-:2] = (PMPGranularity == 0 ? PMP_MODE_NA4 : PMP_MODE_OFF);
						2&#39;b11: pmp_cfg_wdata[i][4-:2] = PMP_MODE_NAPOT;
						default: pmp_cfg_wdata[i][4-:2] = PMP_MODE_OFF;
					endcase
				always @(*) pmp_cfg_wdata[i][2] = csr_wdata_int[((i % 4) * PMP_CFG_W) + 2];
				always @(*) pmp_cfg_wdata[i][1] = &amp;csr_wdata_int[(i % 4) * PMP_CFG_W+:2];
				always @(*) pmp_cfg_wdata[i][0] = csr_wdata_int[(i % 4) * PMP_CFG_W];
				always @(posedge clk_i or negedge rst_ni)
					if (!rst_ni)
						pmp_cfg[i] &lt;= sv2v_cast_6(&#39;b0);
					else if (pmp_cfg_we[i])
						pmp_cfg[i] &lt;= pmp_cfg_wdata[i];
				if (i &lt; (PMPNumRegions - 1)) begin : g_lower
					assign pmp_addr_we[i] = ((csr_we_int &amp; ~pmp_cfg[i][5]) &amp; (pmp_cfg[i + 1][4-:2] != PMP_MODE_TOR)) &amp; (csr_addr == (CSR_OFF_PMP_ADDR + i[11:0]));
				end
				else begin : g_upper
					assign pmp_addr_we[i] = (csr_we_int &amp; ~pmp_cfg[i][5]) &amp; (csr_addr == (CSR_OFF_PMP_ADDR + i[11:0]));
				end
				always @(posedge clk_i or negedge rst_ni)
					if (!rst_ni)
						pmp_addr[i] &lt;= &#39;b0;
					else if (pmp_addr_we[i])
						pmp_addr[i] &lt;= csr_wdata_int;
				assign csr_pmp_cfg_o[(0 &gt;= (PMPNumRegions - 1) ? i : (PMPNumRegions - 1) - i) * 6+:6] = pmp_cfg[i];
				assign csr_pmp_addr_o[(0 &gt;= (PMPNumRegions - 1) ? i : (PMPNumRegions - 1) - i) * 34+:34] = {pmp_addr[i], 2&#39;b00};
			end
		end
		else begin : g_no_pmp_tieoffs
			for (i = 0; i &lt; PMP_MAX_REGIONS; i = i + 1) begin : g_rdata
				always @(*) pmp_addr_rdata[i] = &#39;sd0;
				assign pmp_cfg_rdata[i] = &#39;sd0;
			end
			for (i = 0; i &lt; PMPNumRegions; i = i + 1) begin : g_outputs
				assign csr_pmp_cfg_o[(0 &gt;= (PMPNumRegions - 1) ? i : (PMPNumRegions - 1) - i) * 6+:6] = sv2v_cast_6(1&#39;b0);
				assign csr_pmp_addr_o[(0 &gt;= (PMPNumRegions - 1) ? i : (PMPNumRegions - 1) - i) * 34+:34] = &#39;sd0;
			end
		end
	endgenerate
	always @(*) begin : mcountinhibit_update
		if (mcountinhibit_we == 1&#39;b1)
			mcountinhibit_d = {csr_wdata_int[MHPMCounterNum + 2:2], 1&#39;b0, csr_wdata_int[0]};
		else
			mcountinhibit_d = mcountinhibit_q;
	end
	always @(*) begin : gen_mhpmcounter_incr
		begin : sv2v_autoblock_26
			reg [31:0] i;
			for (i = 0; i &lt; 32; i = i + 1)
				begin : gen_mhpmcounter_incr_inactive
					mhpmcounter_incr[i] = 1&#39;b0;
				end
		end
		mhpmcounter_incr[0] = 1&#39;b1;
		mhpmcounter_incr[1] = 1&#39;b0;
		mhpmcounter_incr[2] = instr_ret_i;
		mhpmcounter_incr[3] = dside_wait_i;
		mhpmcounter_incr[4] = iside_wait_i;
		mhpmcounter_incr[5] = mem_load_i;
		mhpmcounter_incr[6] = mem_store_i;
		mhpmcounter_incr[7] = jump_i;
		mhpmcounter_incr[8] = branch_i;
		mhpmcounter_incr[9] = branch_taken_i;
		mhpmcounter_incr[10] = instr_ret_compressed_i;
		mhpmcounter_incr[11] = mul_wait_i;
		mhpmcounter_incr[12] = div_wait_i;
	end
	always @(*) begin : gen_mhpmevent
		begin : sv2v_autoblock_27
			reg signed [31:0] i;
			for (i = 0; i &lt; 32; i = i + 1)
				begin : gen_mhpmevent_active
					mhpmevent[i] = &#39;sd0;
					mhpmevent[i][i] = 1&#39;b1;
				end
		end
		mhpmevent[1] = &#39;sd0;
		begin : sv2v_autoblock_28
			reg [31:0] i;
			for (i = 3 + MHPMCounterNum; i &lt; 32; i = i + 1)
				begin : gen_mhpmevent_inactive
					mhpmevent[i] = &#39;sd0;
				end
		end
	end
	ibex_counters #(
		.MaxNumCounters(1),
		.NumCounters(1),
		.CounterWidth(64)
	) mcycle_counter_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.counter_inc_i(mhpmcounter_incr[0] &amp; ~mcountinhibit[0]),
		.counterh_we_i(mhpmcounterh_we[0]),
		.counter_we_i(mhpmcounter_we[0]),
		.counter_val_i(csr_wdata_int),
		.counter_val_o(mhpmcounter[1984+:64])
	);
	ibex_counters #(
		.MaxNumCounters(1),
		.NumCounters(1),
		.CounterWidth(64)
	) minstret_counter_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.counter_inc_i(mhpmcounter_incr[2] &amp; ~mcountinhibit[2]),
		.counterh_we_i(mhpmcounterh_we[2]),
		.counter_we_i(mhpmcounter_we[2]),
		.counter_val_i(csr_wdata_int),
		.counter_val_o(mhpmcounter[1856+:64])
	);
	assign mhpmcounter[1920+:64] = &#39;sd0;
	ibex_counters #(
		.MaxNumCounters(29),
		.NumCounters(MHPMCounterNum),
		.CounterWidth(MHPMCounterWidth)
	) mcounters_variable_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.counter_inc_i(mhpmcounter_incr[31:3] &amp; ~mcountinhibit[31:3]),
		.counterh_we_i(mhpmcounterh_we[31:3]),
		.counter_we_i(mhpmcounter_we[31:3]),
		.counter_val_i(csr_wdata_int),
		.counter_val_o(mhpmcounter[0+:1856])
	);
	generate
		if (MHPMCounterNum &lt; 29) begin : g_mcountinhibit_reduced
			assign mcountinhibit = {{29 - MHPMCounterNum {1&#39;b1}}, mcountinhibit_q};
		end
		else begin : g_mcountinhibit_full
			assign mcountinhibit = mcountinhibit_q;
		end
	endgenerate
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			mcountinhibit_q &lt;= &#39;sd0;
		else
			mcountinhibit_q &lt;= mcountinhibit_d;
	generate
		if (DbgTriggerEn) begin : gen_trigger_regs
			wire tmatch_control_d;
			reg tmatch_control_q;
			wire [31:0] tmatch_value_d;
			reg [31:0] tmatch_value_q;
			wire tmatch_control_we;
			wire tmatch_value_we;
			assign tmatch_control_we = (csr_we_int &amp; debug_mode_i) &amp; (csr_addr_i == CSR_TDATA1);
			assign tmatch_value_we = (csr_we_int &amp; debug_mode_i) &amp; (csr_addr_i == CSR_TDATA2);
			assign tmatch_control_d = (tmatch_control_we ? csr_wdata_int[2] : tmatch_control_q);
			assign tmatch_value_d = csr_wdata_int[31:0];
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					tmatch_control_q &lt;= &#39;b0;
				else
					tmatch_control_q &lt;= tmatch_control_d;
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					tmatch_value_q &lt;= &#39;b0;
				else if (tmatch_value_we)
					tmatch_value_q &lt;= tmatch_value_d;
			assign tselect_rdata = &#39;b0;
			assign tmatch_control_rdata = {4&#39;h2, 1&#39;b1, 6&#39;h00, 1&#39;b0, 1&#39;b0, 1&#39;b0, 2&#39;b00, 4&#39;h1, 1&#39;b0, 4&#39;h0, 1&#39;b1, 1&#39;b0, 1&#39;b0, 1&#39;b1, tmatch_control_q, 1&#39;b0, 1&#39;b0};
			assign tmatch_value_rdata = tmatch_value_q;
			assign trigger_match_o = tmatch_control_q &amp; (pc_if_i[31:0] == tmatch_value_q[31:0]);
		end
		else begin : gen_no_trigger_regs
			assign tselect_rdata = &#39;b0;
			assign tmatch_control_rdata = &#39;b0;
			assign tmatch_value_rdata = &#39;b0;
			assign trigger_match_o = &#39;b0;
		end
	endgenerate
	assign cpuctrl_rdata[31-:30] = &#39;sd0;
	assign cpuctrl_wdata = sv2v_cast_32(csr_wdata_int);
	generate
		if (DataIndTiming) begin : gen_dit
			wire data_ind_timing_d;
			reg data_ind_timing_q;
			assign data_ind_timing_d = (csr_we_int &amp;&amp; (csr_addr == CSR_CPUCTRL) ? cpuctrl_wdata[1] : data_ind_timing_q);
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					data_ind_timing_q &lt;= 1&#39;b0;
				else
					data_ind_timing_q &lt;= data_ind_timing_d;
			assign cpuctrl_rdata[1] = data_ind_timing_q;
		end
		else begin : gen_no_dit
			wire unused_dit;
			assign unused_dit = cpuctrl_wdata[1];
			assign cpuctrl_rdata[1] = 1&#39;b0;
		end
	endgenerate
	assign data_ind_timing_o = cpuctrl_rdata[1];
	generate
		if (ICache) begin : gen_icache_enable
			wire icache_enable_d;
			reg icache_enable_q;
			assign icache_enable_d = (csr_we_int &amp; (csr_addr == CSR_CPUCTRL) ? cpuctrl_wdata[0] : icache_enable_q);
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					icache_enable_q &lt;= 1&#39;b0;
				else
					icache_enable_q &lt;= icache_enable_d;
			assign cpuctrl_rdata[0] = icache_enable_q;
		end
		else begin : gen_no_icache
			wire unused_icen;
			assign unused_icen = cpuctrl_wdata[0];
			assign cpuctrl_rdata[0] = 1&#39;b0;
		end
	endgenerate
	assign icache_enable_o = cpuctrl_rdata[0];
	wire [31:2] unused_cpuctrl;
	assign unused_cpuctrl = cpuctrl_wdata[31:2];
	function automatic [5:0] sv2v_struct_BF3E9;
		input reg mie;
		input reg mpie;
		input reg [1:0] mpp;
		input reg mprv;
		input reg tw;
		sv2v_struct_BF3E9 = {mie, mpie, mpp, mprv, tw};
	endfunction
	function automatic [2:0] sv2v_struct_70E1D;
		input reg mpie;
		input reg [1:0] mpp;
		sv2v_struct_70E1D = {mpie, mpp};
	endfunction
	function automatic [31:0] sv2v_struct_996E9;
		input reg [3:0] xdebugver;
		input reg [11:0] zero2;
		input reg ebreakm;
		input reg zero1;
		input reg ebreaks;
		input reg ebreaku;
		input reg stepie;
		input reg stopcount;
		input reg stoptime;
		input reg [2:0] cause;
		input reg zero0;
		input reg mprven;
		input reg nmip;
		input reg step;
		input reg [1:0] prv;
		sv2v_struct_996E9 = {xdebugver, zero2, ebreakm, zero1, ebreaks, ebreaku, stepie, stopcount, stoptime, cause, zero0, mprven, nmip, step, prv};
	endfunction
endmodule
module ibex_counters (
	clk_i,
	rst_ni,
	counter_inc_i,
	counterh_we_i,
	counter_we_i,
	counter_val_i,
	counter_val_o
);
	parameter signed [31:0] MaxNumCounters = 29;
	parameter signed [31:0] NumCounters = 0;
	parameter signed [31:0] CounterWidth = 32;
	input clk_i;
	input rst_ni;
	input wire [MaxNumCounters - 1:0] counter_inc_i;
	input wire [MaxNumCounters - 1:0] counterh_we_i;
	input wire [MaxNumCounters - 1:0] counter_we_i;
	input wire [31:0] counter_val_i;
	output wire [(0 &gt;= (MaxNumCounters - 1) ? ((2 - MaxNumCounters) * 64) + (((MaxNumCounters - 1) * 64) - 1) : (MaxNumCounters * 64) + -1):(0 &gt;= (MaxNumCounters - 1) ? (MaxNumCounters - 1) * 64 : 0)] counter_val_o;
	wire [(0 &gt;= (MaxNumCounters - 1) ? ((2 - MaxNumCounters) * 64) + (((MaxNumCounters - 1) * 64) - 1) : (MaxNumCounters * 64) + -1):(0 &gt;= (MaxNumCounters - 1) ? (MaxNumCounters - 1) * 64 : 0)] counter;
	assign counter_val_o = counter;
	generate
		genvar i;
		for (i = 0; i &lt; MaxNumCounters; i = i + 1) begin : g_counter
			if (i &lt; NumCounters) begin : g_counter_exists
				reg [63:0] counter_upd;
				reg [63:0] counter_load;
				reg we;
				reg [CounterWidth - 1:0] counter_d;
				always @(*) begin
					we = counter_we_i[i] | counterh_we_i[i];
					counter_load[63:32] = counter[((0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64) + 63-:32];
					counter_load[31:0] = counter_val_i;
					if (counterh_we_i[i]) begin
						counter_load[63:32] = counter_val_i;
						counter_load[31:0] = counter[((0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64) + 31-:32];
					end
					counter_upd = counter[(0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64+:64] + 64&#39;h1;
					if (we)
						counter_d = counter_load[CounterWidth - 1:0];
					else if (counter_inc_i[i])
						counter_d = counter_upd[CounterWidth - 1:0];
					else
						counter_d = counter[((0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64) + (CounterWidth &gt;= 1 ? CounterWidth - 1 : ((CounterWidth - 1) + (CounterWidth &gt;= 1 ? CounterWidth : 2 - CounterWidth)) - 1)-:(CounterWidth &gt;= 1 ? CounterWidth : 2 - CounterWidth)];
				end
				reg [CounterWidth - 1:0] counter_q;
				always @(posedge clk_i or negedge rst_ni)
					if (!rst_ni)
						counter_q &lt;= &#39;sd0;
					else
						counter_q &lt;= counter_d;
				if (CounterWidth &lt; 64) begin : g_counter_narrow
					assign counter[((0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64) + (CounterWidth &gt;= 1 ? CounterWidth - 1 : ((CounterWidth - 1) + (CounterWidth &gt;= 1 ? CounterWidth : 2 - CounterWidth)) - 1)-:(CounterWidth &gt;= 1 ? CounterWidth : 2 - CounterWidth)] = counter_q;
					assign counter[((0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64) + (63 &gt;= CounterWidth ? 63 : (63 + (63 &gt;= CounterWidth ? 64 - CounterWidth : (CounterWidth - 63) + 1)) - 1)-:(63 &gt;= CounterWidth ? 64 - CounterWidth : (CounterWidth - 63) + 1)] = &#39;sd0;
				end
				else begin : g_counter_full
					assign counter[(0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64+:64] = counter_q;
				end
			end
			else begin : g_no_counter
				assign counter[(0 &gt;= (MaxNumCounters - 1) ? i : (MaxNumCounters - 1) - i) * 64+:64] = &#39;sd0;
			end
		end
	endgenerate
endmodule
module ibex_decoder (
	clk_i,
	rst_ni,
	illegal_insn_o,
	ebrk_insn_o,
	mret_insn_o,
	dret_insn_o,
	ecall_insn_o,
	wfi_insn_o,
	jump_set_o,
	branch_taken_i,
	icache_inval_o,
	instr_first_cycle_i,
	instr_rdata_i,
	instr_rdata_alu_i,
	illegal_c_insn_i,
	imm_a_mux_sel_o,
	imm_b_mux_sel_o,
	bt_a_mux_sel_o,
	bt_b_mux_sel_o,
	imm_i_type_o,
	imm_s_type_o,
	imm_b_type_o,
	imm_u_type_o,
	imm_j_type_o,
	zimm_rs1_type_o,
	rf_wdata_sel_o,
	rf_we_o,
	rf_raddr_a_o,
	rf_raddr_b_o,
	rf_waddr_o,
	rf_ren_a_o,
	rf_ren_b_o,
	alu_operator_o,
	alu_op_a_mux_sel_o,
	alu_op_b_mux_sel_o,
	alu_multicycle_o,
	mult_en_o,
	div_en_o,
	multdiv_sel_o,
	multdiv_operator_o,
	multdiv_signed_mode_o,
	csr_access_o,
	csr_op_o,
	data_req_o,
	data_we_o,
	data_type_o,
	data_sign_extension_o,
	jump_in_dec_o,
	branch_in_dec_o
);
	parameter [0:0] RV32E = 0;
	parameter [0:0] RV32M = 1;
	parameter [0:0] RV32B = 0;
	parameter [0:0] BranchTargetALU = 0;
	input wire clk_i;
	input wire rst_ni;
	output wire illegal_insn_o;
	output reg ebrk_insn_o;
	output reg mret_insn_o;
	output reg dret_insn_o;
	output reg ecall_insn_o;
	output reg wfi_insn_o;
	output reg jump_set_o;
	input wire branch_taken_i;
	output reg icache_inval_o;
	input wire instr_first_cycle_i;
	input wire [31:0] instr_rdata_i;
	input wire [31:0] instr_rdata_alu_i;
	input wire illegal_c_insn_i;
	output reg imm_a_mux_sel_o;
	output reg [2:0] imm_b_mux_sel_o;
	output reg [1:0] bt_a_mux_sel_o;
	output reg [2:0] bt_b_mux_sel_o;
	output wire [31:0] imm_i_type_o;
	output wire [31:0] imm_s_type_o;
	output wire [31:0] imm_b_type_o;
	output wire [31:0] imm_u_type_o;
	output wire [31:0] imm_j_type_o;
	output wire [31:0] zimm_rs1_type_o;
	output reg rf_wdata_sel_o;
	output wire rf_we_o;
	output wire [4:0] rf_raddr_a_o;
	output wire [4:0] rf_raddr_b_o;
	output wire [4:0] rf_waddr_o;
	output reg rf_ren_a_o;
	output reg rf_ren_b_o;
	output reg [5:0] alu_operator_o;
	output reg [1:0] alu_op_a_mux_sel_o;
	output reg alu_op_b_mux_sel_o;
	output reg alu_multicycle_o;
	output reg mult_en_o;
	output reg div_en_o;
	output reg multdiv_sel_o;
	output reg [1:0] multdiv_operator_o;
	output reg [1:0] multdiv_signed_mode_o;
	output reg csr_access_o;
	output reg [1:0] csr_op_o;
	output reg data_req_o;
	output reg data_we_o;
	output reg [1:0] data_type_o;
	output reg data_sign_extension_o;
	output reg jump_in_dec_o;
	output reg branch_in_dec_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	reg illegal_insn;
	wire illegal_reg_rv32e;
	reg csr_illegal;
	reg rf_we;
	wire [31:0] instr;
	wire [31:0] instr_alu;
	reg use_rs3;
	reg [1:0] csr_op;
	reg [6:0] opcode;
	reg [6:0] opcode_alu;
	assign instr = instr_rdata_i;
	assign instr_alu = instr_rdata_alu_i;
	assign imm_i_type_o = {{20 {instr[31]}}, instr[31:20]};
	assign imm_s_type_o = {{20 {instr[31]}}, instr[31:25], instr[11:7]};
	assign imm_b_type_o = {{19 {instr[31]}}, instr[31], instr[7], instr[30:25], instr[11:8], 1&#39;b0};
	assign imm_u_type_o = {instr[31:12], 12&#39;b0};
	assign imm_j_type_o = {{12 {instr[31]}}, instr[19:12], instr[20], instr[30:21], 1&#39;b0};
	assign zimm_rs1_type_o = {27&#39;b0, instr[19:15]};
	assign rf_raddr_a_o = (use_rs3 ? instr[31:27] : instr[19:15]);
	assign rf_raddr_b_o = instr[24:20];
	assign rf_waddr_o = instr[11:07];
	generate
		if (RV32E) begin : gen_rv32e_reg_check_active
			assign illegal_reg_rv32e = ((rf_raddr_a_o[4] &amp; (alu_op_a_mux_sel_o == OP_A_REG_A)) | (rf_raddr_b_o[4] &amp; (alu_op_b_mux_sel_o == OP_B_REG_B))) | (rf_waddr_o[4] &amp; rf_we);
		end
		else begin : gen_rv32e_reg_check_inactive
			assign illegal_reg_rv32e = 1&#39;b0;
		end
	endgenerate
	always @(*) begin : csr_operand_check
		csr_op_o = csr_op;
		if (((csr_op == CSR_OP_SET) || (csr_op == CSR_OP_CLEAR)) &amp;&amp; (instr[19:15] == &#39;sd0))
			csr_op_o = CSR_OP_READ;
	end
	function automatic [6:0] sv2v_cast_7;
		input reg [6:0] inp;
		sv2v_cast_7 = inp;
	endfunction
	always @(*) begin
		jump_in_dec_o = 1&#39;b0;
		jump_set_o = 1&#39;b0;
		branch_in_dec_o = 1&#39;b0;
		icache_inval_o = 1&#39;b0;
		mult_en_o = 1&#39;b0;
		div_en_o = 1&#39;b0;
		multdiv_operator_o = MD_OP_MULL;
		multdiv_signed_mode_o = 2&#39;b00;
		rf_wdata_sel_o = RF_WD_EX;
		rf_we = 1&#39;b0;
		rf_ren_a_o = 1&#39;b0;
		rf_ren_b_o = 1&#39;b0;
		csr_access_o = 1&#39;b0;
		csr_illegal = 1&#39;b0;
		csr_op = CSR_OP_READ;
		data_we_o = 1&#39;b0;
		data_type_o = 2&#39;b00;
		data_sign_extension_o = 1&#39;b0;
		data_req_o = 1&#39;b0;
		illegal_insn = 1&#39;b0;
		ebrk_insn_o = 1&#39;b0;
		mret_insn_o = 1&#39;b0;
		dret_insn_o = 1&#39;b0;
		ecall_insn_o = 1&#39;b0;
		wfi_insn_o = 1&#39;b0;
		opcode = sv2v_cast_7(instr[6:0]);
		case (opcode)
			OPCODE_JAL: begin
				jump_in_dec_o = 1&#39;b1;
				if (instr_first_cycle_i) begin
					rf_we = BranchTargetALU;
					jump_set_o = 1&#39;b1;
				end
				else
					rf_we = 1&#39;b1;
			end
			OPCODE_JALR: begin
				jump_in_dec_o = 1&#39;b1;
				if (instr_first_cycle_i) begin
					rf_we = BranchTargetALU;
					jump_set_o = 1&#39;b1;
				end
				else
					rf_we = 1&#39;b1;
				if (instr[14:12] != 3&#39;b0)
					illegal_insn = 1&#39;b1;
				rf_ren_a_o = 1&#39;b1;
			end
			OPCODE_BRANCH: begin
				branch_in_dec_o = 1&#39;b1;
				case (instr[14:12])
					3&#39;b000, 3&#39;b001, 3&#39;b100, 3&#39;b101, 3&#39;b110, 3&#39;b111: illegal_insn = 1&#39;b0;
					default: illegal_insn = 1&#39;b1;
				endcase
				rf_ren_a_o = 1&#39;b1;
				rf_ren_b_o = 1&#39;b1;
			end
			OPCODE_STORE: begin
				rf_ren_a_o = 1&#39;b1;
				rf_ren_b_o = 1&#39;b1;
				data_req_o = 1&#39;b1;
				data_we_o = 1&#39;b1;
				if (instr[14])
					illegal_insn = 1&#39;b1;
				case (instr[13:12])
					2&#39;b00: data_type_o = 2&#39;b10;
					2&#39;b01: data_type_o = 2&#39;b01;
					2&#39;b10: data_type_o = 2&#39;b00;
					default: illegal_insn = 1&#39;b1;
				endcase
			end
			OPCODE_LOAD: begin
				rf_ren_a_o = 1&#39;b1;
				data_req_o = 1&#39;b1;
				data_type_o = 2&#39;b00;
				data_sign_extension_o = ~instr[14];
				case (instr[13:12])
					2&#39;b00: data_type_o = 2&#39;b10;
					2&#39;b01: data_type_o = 2&#39;b01;
					2&#39;b10: begin
						data_type_o = 2&#39;b00;
						if (instr[14])
							illegal_insn = 1&#39;b1;
					end
					default: illegal_insn = 1&#39;b1;
				endcase
			end
			OPCODE_LUI: rf_we = 1&#39;b1;
			OPCODE_AUIPC: rf_we = 1&#39;b1;
			OPCODE_OP_IMM: begin
				rf_ren_a_o = 1&#39;b1;
				rf_we = 1&#39;b1;
				case (instr[14:12])
					3&#39;b000, 3&#39;b010, 3&#39;b011, 3&#39;b100, 3&#39;b110, 3&#39;b111: illegal_insn = 1&#39;b0;
					3&#39;b001:
						case (instr[31:27])
							5&#39;b0_0000: illegal_insn = 1&#39;b0;
							5&#39;b0_0100, 5&#39;b0_1001, 5&#39;b0_0101, 5&#39;b0_1101: illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
							5&#39;b0_1100:
								case (instr[26:20])
									7&#39;b00_00000, 7&#39;b00_00001, 7&#39;b00_00010: illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
									default: illegal_insn = 1&#39;b1;
								endcase
							default: illegal_insn = 1&#39;b1;
						endcase
					3&#39;b101:
						if (instr[26])
							illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
						else
							case (instr[31:27])
								5&#39;b0_0000, 5&#39;b0_1000: illegal_insn = 1&#39;b0;
								5&#39;b0_0100, 5&#39;b0_1100, 5&#39;b0_1001: illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
								5&#39;b0_1101:
									case (instr[24:20])
										5&#39;b1_1111, 5&#39;b1_1000: illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
										default: illegal_insn = 1&#39;b1;
									endcase
								5&#39;b0_0101:
									if (instr[24:20] == 5&#39;b0_0111)
										illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
									else
										illegal_insn = 1&#39;b1;
								default: illegal_insn = 1&#39;b1;
							endcase
					default: illegal_insn = 1&#39;b1;
				endcase
			end
			OPCODE_OP: begin
				rf_ren_a_o = 1&#39;b1;
				rf_ren_b_o = 1&#39;b1;
				rf_we = 1&#39;b1;
				if ({instr[26], instr[13:12]} == {1&#39;b1, 2&#39;b01})
					illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
				else
					case ({instr[31:25], instr[14:12]})
						{7&#39;b000_0000, 3&#39;b000}, {7&#39;b010_0000, 3&#39;b000}, {7&#39;b000_0000, 3&#39;b010}, {7&#39;b000_0000, 3&#39;b011}, {7&#39;b000_0000, 3&#39;b100}, {7&#39;b000_0000, 3&#39;b110}, {7&#39;b000_0000, 3&#39;b111}, {7&#39;b000_0000, 3&#39;b001}, {7&#39;b000_0000, 3&#39;b101}, {7&#39;b010_0000, 3&#39;b101}: illegal_insn = 1&#39;b0;
						{7&#39;b010_0000, 3&#39;b111}, {7&#39;b010_0000, 3&#39;b110}, {7&#39;b010_0000, 3&#39;b100}, {7&#39;b001_0000, 3&#39;b001}, {7&#39;b001_0000, 3&#39;b101}, {7&#39;b011_0000, 3&#39;b001}, {7&#39;b011_0000, 3&#39;b101}, {7&#39;b000_0101, 3&#39;b100}, {7&#39;b000_0101, 3&#39;b101}, {7&#39;b000_0101, 3&#39;b110}, {7&#39;b000_0101, 3&#39;b111}, {7&#39;b000_0100, 3&#39;b100}, {7&#39;b010_0100, 3&#39;b100}, {7&#39;b000_0100, 3&#39;b111}, {7&#39;b010_0100, 3&#39;b001}, {7&#39;b001_0100, 3&#39;b001}, {7&#39;b011_0100, 3&#39;b001}, {7&#39;b010_0100, 3&#39;b101}: illegal_insn = (RV32B ? 1&#39;b0 : 1&#39;b1);
						{7&#39;b000_0001, 3&#39;b000}: begin
							multdiv_operator_o = MD_OP_MULL;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b001}: begin
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b010}: begin
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b01;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b011}: begin
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b100}: begin
							multdiv_operator_o = MD_OP_DIV;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b101}: begin
							multdiv_operator_o = MD_OP_DIV;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b110}: begin
							multdiv_operator_o = MD_OP_REM;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{7&#39;b000_0001, 3&#39;b111}: begin
							multdiv_operator_o = MD_OP_REM;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						default: illegal_insn = 1&#39;b1;
					endcase
			end
			OPCODE_MISC_MEM:
				case (instr[14:12])
					3&#39;b000: rf_we = 1&#39;b0;
					3&#39;b001: begin
						jump_in_dec_o = 1&#39;b1;
						rf_we = 1&#39;b0;
						if (instr_first_cycle_i) begin
							jump_set_o = 1&#39;b1;
							icache_inval_o = 1&#39;b1;
						end
					end
					default: illegal_insn = 1&#39;b1;
				endcase
			OPCODE_SYSTEM:
				if (instr[14:12] == 3&#39;b000) begin
					case (instr[31:20])
						12&#39;h000: ecall_insn_o = 1&#39;b1;
						12&#39;h001: ebrk_insn_o = 1&#39;b1;
						12&#39;h302: mret_insn_o = 1&#39;b1;
						12&#39;h7b2: dret_insn_o = 1&#39;b1;
						12&#39;h105: wfi_insn_o = 1&#39;b1;
						default: illegal_insn = 1&#39;b1;
					endcase
					if ((instr[19:15] != 5&#39;b0) || (instr[11:07] != 5&#39;b0))
						illegal_insn = 1&#39;b1;
				end
				else begin
					csr_access_o = 1&#39;b1;
					rf_wdata_sel_o = RF_WD_CSR;
					rf_we = 1&#39;b1;
					if (~instr[14])
						rf_ren_a_o = 1&#39;b1;
					case (instr[13:12])
						2&#39;b01: csr_op = CSR_OP_WRITE;
						2&#39;b10: csr_op = CSR_OP_SET;
						2&#39;b11: csr_op = CSR_OP_CLEAR;
						default: csr_illegal = 1&#39;b1;
					endcase
					illegal_insn = csr_illegal;
				end
			default: illegal_insn = 1&#39;b1;
		endcase
		if (illegal_c_insn_i)
			illegal_insn = 1&#39;b1;
		if (illegal_insn) begin
			rf_we = 1&#39;b0;
			data_req_o = 1&#39;b0;
			data_we_o = 1&#39;b0;
			mult_en_o = 1&#39;b0;
			div_en_o = 1&#39;b0;
			jump_in_dec_o = 1&#39;b0;
			jump_set_o = 1&#39;b0;
			branch_in_dec_o = 1&#39;b0;
			csr_access_o = 1&#39;b0;
		end
	end
	always @(*) begin
		alu_operator_o = ALU_SLTU;
		alu_op_a_mux_sel_o = OP_A_IMM;
		alu_op_b_mux_sel_o = OP_B_IMM;
		imm_a_mux_sel_o = IMM_A_ZERO;
		imm_b_mux_sel_o = IMM_B_I;
		bt_a_mux_sel_o = OP_A_CURRPC;
		bt_b_mux_sel_o = IMM_B_I;
		multdiv_sel_o = 1&#39;b0;
		opcode_alu = sv2v_cast_7(instr_alu[6:0]);
		use_rs3 = 1&#39;b0;
		alu_multicycle_o = 1&#39;b0;
		case (opcode_alu)
			OPCODE_JAL: begin
				if (BranchTargetALU) begin
					bt_a_mux_sel_o = OP_A_CURRPC;
					bt_b_mux_sel_o = IMM_B_J;
				end
				if (instr_first_cycle_i &amp;&amp; !BranchTargetALU) begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_J;
					alu_operator_o = ALU_ADD;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_INCR_PC;
					alu_operator_o = ALU_ADD;
				end
			end
			OPCODE_JALR: begin
				if (BranchTargetALU) begin
					bt_a_mux_sel_o = OP_A_REG_A;
					bt_b_mux_sel_o = IMM_B_I;
				end
				if (instr_first_cycle_i &amp;&amp; !BranchTargetALU) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_I;
					alu_operator_o = ALU_ADD;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_INCR_PC;
					alu_operator_o = ALU_ADD;
				end
			end
			OPCODE_BRANCH: begin
				case (instr_alu[14:12])
					3&#39;b000: alu_operator_o = ALU_EQ;
					3&#39;b001: alu_operator_o = ALU_NE;
					3&#39;b100: alu_operator_o = ALU_LT;
					3&#39;b101: alu_operator_o = ALU_GE;
					3&#39;b110: alu_operator_o = ALU_LTU;
					3&#39;b111: alu_operator_o = ALU_GEU;
					default:
						;
				endcase
				if (BranchTargetALU) begin
					bt_a_mux_sel_o = OP_A_CURRPC;
					bt_b_mux_sel_o = (branch_taken_i ? IMM_B_B : IMM_B_INCR_PC);
				end
				if (instr_first_cycle_i) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_REG_B;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = (branch_taken_i ? IMM_B_B : IMM_B_INCR_PC);
					alu_operator_o = ALU_ADD;
				end
			end
			OPCODE_STORE: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_REG_B;
				alu_operator_o = ALU_ADD;
				if (!instr_alu[14]) begin
					imm_b_mux_sel_o = IMM_B_S;
					alu_op_b_mux_sel_o = OP_B_IMM;
				end
			end
			OPCODE_LOAD: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_operator_o = ALU_ADD;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_I;
			end
			OPCODE_LUI: begin
				alu_op_a_mux_sel_o = OP_A_IMM;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_a_mux_sel_o = IMM_A_ZERO;
				imm_b_mux_sel_o = IMM_B_U;
				alu_operator_o = ALU_ADD;
			end
			OPCODE_AUIPC: begin
				alu_op_a_mux_sel_o = OP_A_CURRPC;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_U;
				alu_operator_o = ALU_ADD;
			end
			OPCODE_OP_IMM: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_I;
				case (instr_alu[14:12])
					3&#39;b000: alu_operator_o = ALU_ADD;
					3&#39;b010: alu_operator_o = ALU_SLT;
					3&#39;b011: alu_operator_o = ALU_SLTU;
					3&#39;b100: alu_operator_o = ALU_XOR;
					3&#39;b110: alu_operator_o = ALU_OR;
					3&#39;b111: alu_operator_o = ALU_AND;
					3&#39;b001:
						if (RV32B)
							case (instr[31:27])
								5&#39;b0_0000: alu_operator_o = ALU_SLL;
								5&#39;b0_0100: alu_operator_o = ALU_SLO;
								5&#39;b0_1001: alu_operator_o = ALU_SBCLR;
								5&#39;b0_0101: alu_operator_o = ALU_SBSET;
								5&#39;b0_1101: alu_operator_o = ALU_SBINV;
								5&#39;b0_1100:
									case (instr[26:20])
										7&#39;b000_0000: alu_operator_o = ALU_CLZ;
										7&#39;b000_0001: alu_operator_o = ALU_CTZ;
										7&#39;b000_0010: alu_operator_o = ALU_PCNT;
										default:
											;
									endcase
								default:
									;
							endcase
						else
							alu_operator_o = ALU_SLL;
					3&#39;b101:
						if (RV32B) begin
							if (instr_alu[26] == 1&#39;b1) begin
								alu_operator_o = ALU_FSR;
								alu_multicycle_o = 1&#39;b1;
								if (instr_first_cycle_i)
									use_rs3 = 1&#39;b0;
								else
									use_rs3 = 1&#39;b1;
							end
							else
								case (instr_alu[31:27])
									5&#39;b0_0000: alu_operator_o = ALU_SRL;
									5&#39;b0_1000: alu_operator_o = ALU_SRA;
									5&#39;b0_0100: alu_operator_o = ALU_SRO;
									5&#39;b0_1001: alu_operator_o = ALU_SBEXT;
									5&#39;b0_1100: begin
										alu_operator_o = ALU_ROR;
										alu_multicycle_o = 1&#39;b1;
									end
									5&#39;b0_1101:
										if (instr_alu[24:20] == 5&#39;b1_1111)
											alu_operator_o = ALU_REV;
										else if (instr_alu[24:20] == 5&#39;b11000)
											alu_operator_o = ALU_REV8;
									5&#39;b0_0101:
										if (instr_alu[24:20] == 5&#39;b0_0111)
											alu_operator_o = ALU_ORCB;
									default:
										;
								endcase
						end
						else if (instr_alu[31:27] == 5&#39;b0_0000)
							alu_operator_o = ALU_SRL;
						else if (instr_alu[31:27] == 5&#39;b0_1000)
							alu_operator_o = ALU_SRA;
					default:
						;
				endcase
			end
			OPCODE_OP: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_REG_B;
				if (instr_alu[26]) begin
					if (RV32B)
						case ({instr_alu[26:25], instr_alu[14:12]})
							{2&#39;b11, 3&#39;b001}: begin
								alu_operator_o = ALU_CMIX;
								alu_multicycle_o = 1&#39;b1;
								if (instr_first_cycle_i)
									use_rs3 = 1&#39;b0;
								else
									use_rs3 = 1&#39;b1;
							end
							{2&#39;b11, 3&#39;b101}: begin
								alu_operator_o = ALU_CMOV;
								alu_multicycle_o = 1&#39;b1;
								if (instr_first_cycle_i)
									use_rs3 = 1&#39;b0;
								else
									use_rs3 = 1&#39;b1;
							end
							{2&#39;b10, 3&#39;b001}: begin
								alu_operator_o = ALU_FSL;
								alu_multicycle_o = 1&#39;b1;
								if (instr_first_cycle_i)
									use_rs3 = 1&#39;b0;
								else
									use_rs3 = 1&#39;b1;
							end
							{2&#39;b10, 3&#39;b101}: begin
								alu_operator_o = ALU_FSR;
								alu_multicycle_o = 1&#39;b1;
								if (instr_first_cycle_i)
									use_rs3 = 1&#39;b0;
								else
									use_rs3 = 1&#39;b1;
							end
							default:
								;
						endcase
				end
				else
					case ({instr_alu[31:25], instr_alu[14:12]})
						{7&#39;b000_0000, 3&#39;b000}: alu_operator_o = ALU_ADD;
						{7&#39;b010_0000, 3&#39;b000}: alu_operator_o = ALU_SUB;
						{7&#39;b000_0000, 3&#39;b010}: alu_operator_o = ALU_SLT;
						{7&#39;b000_0000, 3&#39;b011}: alu_operator_o = ALU_SLTU;
						{7&#39;b000_0000, 3&#39;b100}: alu_operator_o = ALU_XOR;
						{7&#39;b000_0000, 3&#39;b110}: alu_operator_o = ALU_OR;
						{7&#39;b000_0000, 3&#39;b111}: alu_operator_o = ALU_AND;
						{7&#39;b000_0000, 3&#39;b001}: alu_operator_o = ALU_SLL;
						{7&#39;b000_0000, 3&#39;b101}: alu_operator_o = ALU_SRL;
						{7&#39;b010_0000, 3&#39;b101}: alu_operator_o = ALU_SRA;
						{7&#39;b001_0000, 3&#39;b001}:
							if (RV32B)
								alu_operator_o = ALU_SLO;
						{7&#39;b001_0000, 3&#39;b101}:
							if (RV32B)
								alu_operator_o = ALU_SRO;
						{7&#39;b011_0000, 3&#39;b001}:
							if (RV32B) begin
								alu_operator_o = ALU_ROL;
								alu_multicycle_o = 1&#39;b1;
							end
						{7&#39;b011_0000, 3&#39;b101}:
							if (RV32B) begin
								alu_operator_o = ALU_ROR;
								alu_multicycle_o = 1&#39;b1;
							end
						{7&#39;b000_0101, 3&#39;b100}:
							if (RV32B)
								alu_operator_o = ALU_MIN;
						{7&#39;b000_0101, 3&#39;b101}:
							if (RV32B)
								alu_operator_o = ALU_MAX;
						{7&#39;b000_0101, 3&#39;b110}:
							if (RV32B)
								alu_operator_o = ALU_MINU;
						{7&#39;b000_0101, 3&#39;b111}:
							if (RV32B)
								alu_operator_o = ALU_MAXU;
						{7&#39;b000_0100, 3&#39;b100}:
							if (RV32B)
								alu_operator_o = ALU_PACK;
						{7&#39;b010_0100, 3&#39;b100}:
							if (RV32B)
								alu_operator_o = ALU_PACKU;
						{7&#39;b000_0100, 3&#39;b111}:
							if (RV32B)
								alu_operator_o = ALU_PACKH;
						{7&#39;b010_0000, 3&#39;b100}:
							if (RV32B)
								alu_operator_o = ALU_XNOR;
						{7&#39;b010_0000, 3&#39;b110}:
							if (RV32B)
								alu_operator_o = ALU_ORN;
						{7&#39;b010_0000, 3&#39;b111}:
							if (RV32B)
								alu_operator_o = ALU_ANDN;
						{7&#39;b010_0100, 3&#39;b001}:
							if (RV32B)
								alu_operator_o = ALU_SBCLR;
						{7&#39;b001_0100, 3&#39;b001}:
							if (RV32B)
								alu_operator_o = ALU_SBSET;
						{7&#39;b011_0100, 3&#39;b001}:
							if (RV32B)
								alu_operator_o = ALU_SBINV;
						{7&#39;b010_0100, 3&#39;b101}:
							if (RV32B)
								alu_operator_o = ALU_SBEXT;
						{7&#39;b000_0001, 3&#39;b000}, {7&#39;b000_0001, 3&#39;b001}, {7&#39;b000_0001, 3&#39;b010}, {7&#39;b000_0001, 3&#39;b011}, {7&#39;b000_0001, 3&#39;b100}, {7&#39;b000_0001, 3&#39;b101}, {7&#39;b000_0001, 3&#39;b110}, {7&#39;b000_0001, 3&#39;b111}: begin
							multdiv_sel_o = 1&#39;b1;
							alu_operator_o = ALU_ADD;
						end
						default:
							;
					endcase
			end
			OPCODE_MISC_MEM:
				case (instr_alu[14:12])
					3&#39;b000: begin
						alu_operator_o = ALU_ADD;
						alu_op_a_mux_sel_o = OP_A_REG_A;
						alu_op_b_mux_sel_o = OP_B_IMM;
					end
					3&#39;b001:
						if (BranchTargetALU) begin
							bt_a_mux_sel_o = OP_A_CURRPC;
							bt_b_mux_sel_o = IMM_B_INCR_PC;
						end
						else begin
							alu_op_a_mux_sel_o = OP_A_CURRPC;
							alu_op_b_mux_sel_o = OP_B_IMM;
							imm_b_mux_sel_o = IMM_B_INCR_PC;
							alu_operator_o = ALU_ADD;
						end
					default:
						;
				endcase
			OPCODE_SYSTEM:
				if (instr_alu[14:12] == 3&#39;b000) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_IMM;
				end
				else begin
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_a_mux_sel_o = IMM_A_Z;
					imm_b_mux_sel_o = IMM_B_I;
					if (instr_alu[14])
						alu_op_a_mux_sel_o = OP_A_IMM;
					else
						alu_op_a_mux_sel_o = OP_A_REG_A;
				end
			default:
				;
		endcase
	end
	assign illegal_insn_o = illegal_insn | illegal_reg_rv32e;
	assign rf_we_o = rf_we &amp; ~illegal_reg_rv32e;
endmodule
module ibex_ex_block (
	clk_i,
	rst_ni,
	alu_operator_i,
	alu_operand_a_i,
	alu_operand_b_i,
	alu_instr_first_cycle_i,
	bt_a_operand_i,
	bt_b_operand_i,
	multdiv_operator_i,
	mult_en_i,
	div_en_i,
	multdiv_sel_i,
	multdiv_signed_mode_i,
	multdiv_operand_a_i,
	multdiv_operand_b_i,
	multdiv_ready_id_i,
	imd_val_we_o,
	imd_val_d_o,
	imd_val_q_i,
	alu_adder_result_ex_o,
	result_ex_o,
	branch_target_o,
	branch_decision_o,
	ex_valid_o
);
	parameter [0:0] RV32M = 1;
	parameter [0:0] RV32B = 0;
	parameter [0:0] BranchTargetALU = 0;
	parameter MultiplierImplementation = &#34;fast&#34;;
	input wire clk_i;
	input wire rst_ni;
	input wire [5:0] alu_operator_i;
	input wire [31:0] alu_operand_a_i;
	input wire [31:0] alu_operand_b_i;
	input wire alu_instr_first_cycle_i;
	input wire [31:0] bt_a_operand_i;
	input wire [31:0] bt_b_operand_i;
	input wire [1:0] multdiv_operator_i;
	input wire mult_en_i;
	input wire div_en_i;
	input wire multdiv_sel_i;
	input wire [1:0] multdiv_signed_mode_i;
	input wire [31:0] multdiv_operand_a_i;
	input wire [31:0] multdiv_operand_b_i;
	input wire multdiv_ready_id_i;
	output wire imd_val_we_o;
	output wire [33:0] imd_val_d_o;
	input wire [33:0] imd_val_q_i;
	output wire [31:0] alu_adder_result_ex_o;
	output wire [31:0] result_ex_o;
	output wire [31:0] branch_target_o;
	output wire branch_decision_o;
	output wire ex_valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire [31:0] alu_result;
	wire [31:0] multdiv_result;
	wire [32:0] multdiv_alu_operand_b;
	wire [32:0] multdiv_alu_operand_a;
	wire [33:0] alu_adder_result_ext;
	wire alu_cmp_result;
	wire alu_is_equal_result;
	wire multdiv_valid;
	wire multdiv_en;
	wire [31:0] alu_imd_val_d;
	wire alu_imd_val_we;
	wire [33:0] multdiv_imd_val_d;
	wire multdiv_imd_val_we;
	assign imd_val_d_o = (multdiv_sel_i ? multdiv_imd_val_d : {2&#39;b0, alu_imd_val_d});
	assign imd_val_we_o = (multdiv_sel_i ? multdiv_imd_val_we : alu_imd_val_we);
	generate
		if (RV32M) begin : gen_multdiv_m
			assign multdiv_en = mult_en_i | div_en_i;
		end
		else begin : gen_multdiv_no_m
			assign multdiv_en = 1&#39;b0;
		end
	endgenerate
	assign result_ex_o = (multdiv_en ? multdiv_result : alu_result);
	assign branch_decision_o = alu_cmp_result;
	generate
		if (BranchTargetALU) begin : g_branch_target_alu
			wire [32:0] bt_alu_result;
			wire unused_bt_carry;
			assign bt_alu_result = bt_a_operand_i + bt_b_operand_i;
			assign unused_bt_carry = bt_alu_result[32];
			assign branch_target_o = bt_alu_result[31:0];
		end
		else begin : g_no_branch_target_alu
			wire [31:0] unused_bt_a_operand;
			wire [31:0] unused_bt_b_operand;
			assign unused_bt_a_operand = bt_a_operand_i;
			assign unused_bt_b_operand = bt_b_operand_i;
			assign branch_target_o = alu_adder_result_ex_o;
		end
	endgenerate
	ibex_alu #(.RV32B(RV32B)) alu_i(
		.operator_i(alu_operator_i),
		.operand_a_i(alu_operand_a_i),
		.operand_b_i(alu_operand_b_i),
		.instr_first_cycle_i(alu_instr_first_cycle_i),
		.imd_val_q_i(imd_val_q_i[31:0]),
		.imd_val_we_o(alu_imd_val_we),
		.imd_val_d_o(alu_imd_val_d),
		.multdiv_operand_a_i(multdiv_alu_operand_a),
		.multdiv_operand_b_i(multdiv_alu_operand_b),
		.multdiv_sel_i(multdiv_sel_i),
		.adder_result_o(alu_adder_result_ex_o),
		.adder_result_ext_o(alu_adder_result_ext),
		.result_o(alu_result),
		.comparison_result_o(alu_cmp_result),
		.is_equal_result_o(alu_is_equal_result)
	);
	generate
		if (MultiplierImplementation == &#34;slow&#34;) begin : gen_multdiv_slow
			ibex_multdiv_slow multdiv_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.mult_en_i(mult_en_i),
				.div_en_i(div_en_i),
				.operator_i(multdiv_operator_i),
				.signed_mode_i(multdiv_signed_mode_i),
				.op_a_i(multdiv_operand_a_i),
				.op_b_i(multdiv_operand_b_i),
				.alu_adder_ext_i(alu_adder_result_ext),
				.alu_adder_i(alu_adder_result_ex_o),
				.equal_to_zero(alu_is_equal_result),
				.valid_o(multdiv_valid),
				.alu_operand_a_o(multdiv_alu_operand_a),
				.alu_operand_b_o(multdiv_alu_operand_b),
				.imd_val_q_i(imd_val_q_i),
				.imd_val_d_o(multdiv_imd_val_d),
				.imd_val_we_o(multdiv_imd_val_we),
				.multdiv_ready_id_i(multdiv_ready_id_i),
				.multdiv_result_o(multdiv_result)
			);
		end
		else if (MultiplierImplementation == &#34;fast&#34;) begin : gen_multdiv_fast
			ibex_multdiv_fast #(.SingleCycleMultiply(0)) multdiv_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.mult_en_i(mult_en_i),
				.div_en_i(div_en_i),
				.operator_i(multdiv_operator_i),
				.signed_mode_i(multdiv_signed_mode_i),
				.op_a_i(multdiv_operand_a_i),
				.op_b_i(multdiv_operand_b_i),
				.alu_operand_a_o(multdiv_alu_operand_a),
				.alu_operand_b_o(multdiv_alu_operand_b),
				.alu_adder_ext_i(alu_adder_result_ext),
				.alu_adder_i(alu_adder_result_ex_o),
				.equal_to_zero(alu_is_equal_result),
				.imd_val_q_i(imd_val_q_i),
				.imd_val_d_o(multdiv_imd_val_d),
				.imd_val_we_o(multdiv_imd_val_we),
				.multdiv_ready_id_i(multdiv_ready_id_i),
				.valid_o(multdiv_valid),
				.multdiv_result_o(multdiv_result)
			);
		end
		else if (MultiplierImplementation == &#34;single-cycle&#34;) begin : gen_multdiv_single_cycle
			ibex_multdiv_fast #(.SingleCycleMultiply(1)) multdiv_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.mult_en_i(mult_en_i),
				.div_en_i(div_en_i),
				.operator_i(multdiv_operator_i),
				.signed_mode_i(multdiv_signed_mode_i),
				.op_a_i(multdiv_operand_a_i),
				.op_b_i(multdiv_operand_b_i),
				.alu_operand_a_o(multdiv_alu_operand_a),
				.alu_operand_b_o(multdiv_alu_operand_b),
				.alu_adder_ext_i(alu_adder_result_ext),
				.alu_adder_i(alu_adder_result_ex_o),
				.equal_to_zero(alu_is_equal_result),
				.imd_val_q_i(imd_val_q_i),
				.imd_val_d_o(multdiv_imd_val_d),
				.imd_val_we_o(multdiv_imd_val_we),
				.multdiv_ready_id_i(multdiv_ready_id_i),
				.valid_o(multdiv_valid),
				.multdiv_result_o(multdiv_result)
			);
		end
	endgenerate
	assign ex_valid_o = (multdiv_en ? multdiv_valid : !alu_imd_val_we);
endmodule
module ibex_id_stage (
	clk_i,
	rst_ni,
	fetch_enable_i,
	ctrl_busy_o,
	illegal_insn_o,
	instr_valid_i,
	instr_rdata_i,
	instr_rdata_alu_i,
	instr_rdata_c_i,
	instr_is_compressed_i,
	instr_req_o,
	instr_first_cycle_id_o,
	instr_valid_clear_o,
	id_in_ready_o,
	icache_inval_o,
	branch_decision_i,
	pc_set_o,
	pc_mux_o,
	exc_pc_mux_o,
	exc_cause_o,
	illegal_c_insn_i,
	instr_fetch_err_i,
	instr_fetch_err_plus2_i,
	pc_id_i,
	ex_valid_i,
	lsu_valid_i,
	lsu_load_i,
	lsu_busy_i,
	alu_operator_ex_o,
	alu_operand_a_ex_o,
	alu_operand_b_ex_o,
	imd_val_we_ex_i,
	imd_val_d_ex_i,
	imd_val_q_ex_o,
	bt_a_operand_o,
	bt_b_operand_o,
	mult_en_ex_o,
	div_en_ex_o,
	multdiv_sel_ex_o,
	multdiv_operator_ex_o,
	multdiv_signed_mode_ex_o,
	multdiv_operand_a_ex_o,
	multdiv_operand_b_ex_o,
	multdiv_ready_id_o,
	csr_access_o,
	csr_op_o,
	csr_op_en_o,
	csr_save_if_o,
	csr_save_id_o,
	csr_save_wb_o,
	csr_restore_mret_id_o,
	csr_restore_dret_id_o,
	csr_save_cause_o,
	csr_mtval_o,
	priv_mode_i,
	csr_mstatus_tw_i,
	illegal_csr_insn_i,
	data_ind_timing_i,
	lsu_req_o,
	lsu_we_o,
	lsu_type_o,
	lsu_sign_ext_o,
	lsu_wdata_o,
	lsu_req_done_i,
	lsu_addr_incr_req_i,
	lsu_addr_last_i,
	csr_mstatus_mie_i,
	irq_pending_i,
	irqs_i,
	irq_nm_i,
	nmi_mode_o,
	lsu_load_err_i,
	lsu_store_err_i,
	debug_mode_o,
	debug_cause_o,
	debug_csr_save_o,
	debug_req_i,
	debug_single_step_i,
	debug_ebreakm_i,
	debug_ebreaku_i,
	trigger_match_i,
	result_ex_i,
	csr_rdata_i,
	rf_raddr_a_o,
	rf_rdata_a_i,
	rf_raddr_b_o,
	rf_rdata_b_i,
	rf_waddr_id_o,
	rf_wdata_id_o,
	rf_we_id_o,
	rf_waddr_wb_i,
	rf_wdata_fwd_wb_i,
	rf_write_wb_i,
	en_wb_o,
	instr_type_wb_o,
	ready_wb_i,
	outstanding_load_wb_i,
	outstanding_store_wb_i,
	perf_jump_o,
	perf_branch_o,
	perf_tbranch_o,
	perf_dside_wait_o,
	perf_mul_wait_o,
	perf_div_wait_o,
	instr_id_done_o,
	instr_id_done_compressed_o
);
	parameter [0:0] RV32E = 0;
	parameter [0:0] RV32M = 1;
	parameter [0:0] RV32B = 0;
	parameter [0:0] DataIndTiming = 1&#39;b0;
	parameter [0:0] BranchTargetALU = 0;
	parameter [0:0] WritebackStage = 0;
	input wire clk_i;
	input wire rst_ni;
	input wire fetch_enable_i;
	output wire ctrl_busy_o;
	output wire illegal_insn_o;
	input wire instr_valid_i;
	input wire [31:0] instr_rdata_i;
	input wire [31:0] instr_rdata_alu_i;
	input wire [15:0] instr_rdata_c_i;
	input wire instr_is_compressed_i;
	output wire instr_req_o;
	output wire instr_first_cycle_id_o;
	output wire instr_valid_clear_o;
	output wire id_in_ready_o;
	output wire icache_inval_o;
	input wire branch_decision_i;
	output wire pc_set_o;
	output wire [2:0] pc_mux_o;
	output wire [1:0] exc_pc_mux_o;
	output wire [5:0] exc_cause_o;
	input wire illegal_c_insn_i;
	input wire instr_fetch_err_i;
	input wire instr_fetch_err_plus2_i;
	input wire [31:0] pc_id_i;
	input wire ex_valid_i;
	input wire lsu_valid_i;
	input wire lsu_load_i;
	input wire lsu_busy_i;
	output wire [5:0] alu_operator_ex_o;
	output wire [31:0] alu_operand_a_ex_o;
	output wire [31:0] alu_operand_b_ex_o;
	input wire imd_val_we_ex_i;
	input wire [33:0] imd_val_d_ex_i;
	output wire [33:0] imd_val_q_ex_o;
	output reg [31:0] bt_a_operand_o;
	output reg [31:0] bt_b_operand_o;
	output wire mult_en_ex_o;
	output wire div_en_ex_o;
	output wire multdiv_sel_ex_o;
	output wire [1:0] multdiv_operator_ex_o;
	output wire [1:0] multdiv_signed_mode_ex_o;
	output wire [31:0] multdiv_operand_a_ex_o;
	output wire [31:0] multdiv_operand_b_ex_o;
	output wire multdiv_ready_id_o;
	output wire csr_access_o;
	output wire [1:0] csr_op_o;
	output wire csr_op_en_o;
	output wire csr_save_if_o;
	output wire csr_save_id_o;
	output wire csr_save_wb_o;
	output wire csr_restore_mret_id_o;
	output wire csr_restore_dret_id_o;
	output wire csr_save_cause_o;
	output wire [31:0] csr_mtval_o;
	input wire [1:0] priv_mode_i;
	input wire csr_mstatus_tw_i;
	input wire illegal_csr_insn_i;
	input wire data_ind_timing_i;
	output wire lsu_req_o;
	output wire lsu_we_o;
	output wire [1:0] lsu_type_o;
	output wire lsu_sign_ext_o;
	output wire [31:0] lsu_wdata_o;
	input wire lsu_req_done_i;
	input wire lsu_addr_incr_req_i;
	input wire [31:0] lsu_addr_last_i;
	input wire csr_mstatus_mie_i;
	input wire irq_pending_i;
	input wire [17:0] irqs_i;
	input wire irq_nm_i;
	output wire nmi_mode_o;
	input wire lsu_load_err_i;
	input wire lsu_store_err_i;
	output wire debug_mode_o;
	output wire [2:0] debug_cause_o;
	output wire debug_csr_save_o;
	input wire debug_req_i;
	input wire debug_single_step_i;
	input wire debug_ebreakm_i;
	input wire debug_ebreaku_i;
	input wire trigger_match_i;
	input wire [31:0] result_ex_i;
	input wire [31:0] csr_rdata_i;
	output wire [4:0] rf_raddr_a_o;
	input wire [31:0] rf_rdata_a_i;
	output wire [4:0] rf_raddr_b_o;
	input wire [31:0] rf_rdata_b_i;
	output wire [4:0] rf_waddr_id_o;
	output reg [31:0] rf_wdata_id_o;
	output wire rf_we_id_o;
	input wire [4:0] rf_waddr_wb_i;
	input wire [31:0] rf_wdata_fwd_wb_i;
	input wire rf_write_wb_i;
	output wire en_wb_o;
	output wire [1:0] instr_type_wb_o;
	input wire ready_wb_i;
	input wire outstanding_load_wb_i;
	input wire outstanding_store_wb_i;
	output wire perf_jump_o;
	output reg perf_branch_o;
	output wire perf_tbranch_o;
	output wire perf_dside_wait_o;
	output wire perf_mul_wait_o;
	output wire perf_div_wait_o;
	output wire instr_id_done_o;
	output wire instr_id_done_compressed_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire illegal_insn_dec;
	wire ebrk_insn;
	wire mret_insn_dec;
	wire dret_insn_dec;
	wire ecall_insn_dec;
	wire wfi_insn_dec;
	wire wb_exception;
	wire branch_in_dec;
	wire branch_set;
	reg branch_set_d;
	wire branch_taken;
	wire jump_in_dec;
	wire jump_set;
	wire instr_first_cycle;
	wire instr_executing;
	wire instr_done;
	wire controller_run;
	wire stall_ld_hz;
	wire stall_mem;
	reg stall_multdiv;
	reg stall_branch;
	reg stall_jump;
	wire stall_id;
	wire stall_wb;
	wire flush_id;
	wire multicycle_done;
	wire [31:0] imm_i_type;
	wire [31:0] imm_s_type;
	wire [31:0] imm_b_type;
	wire [31:0] imm_u_type;
	wire [31:0] imm_j_type;
	wire [31:0] zimm_rs1_type;
	wire [31:0] imm_a;
	reg [31:0] imm_b;
	wire rf_wdata_sel;
	wire rf_we_dec;
	reg rf_we_raw;
	wire rf_ren_a;
	wire rf_ren_b;
	wire [31:0] rf_rdata_a_fwd;
	wire [31:0] rf_rdata_b_fwd;
	wire [5:0] alu_operator;
	wire [1:0] alu_op_a_mux_sel;
	wire [1:0] alu_op_a_mux_sel_dec;
	wire alu_op_b_mux_sel;
	wire alu_op_b_mux_sel_dec;
	wire alu_multicycle_dec;
	reg stall_alu;
	reg [33:0] imd_val_q;
	wire [1:0] bt_a_mux_sel;
	wire [2:0] bt_b_mux_sel;
	wire imm_a_mux_sel;
	wire [2:0] imm_b_mux_sel;
	wire [2:0] imm_b_mux_sel_dec;
	wire mult_en_id;
	wire mult_en_dec;
	wire div_en_id;
	wire div_en_dec;
	wire multdiv_sel_dec;
	wire multdiv_en_dec;
	wire [1:0] multdiv_operator;
	wire [1:0] multdiv_signed_mode;
	wire lsu_we;
	wire [1:0] lsu_type;
	wire lsu_sign_ext;
	wire lsu_req;
	wire lsu_req_dec;
	wire data_req_allowed;
	reg csr_pipe_flush;
	reg [31:0] alu_operand_a;
	wire [31:0] alu_operand_b;
	assign alu_op_a_mux_sel = (lsu_addr_incr_req_i ? OP_A_FWD : alu_op_a_mux_sel_dec);
	assign alu_op_b_mux_sel = (lsu_addr_incr_req_i ? OP_B_IMM : alu_op_b_mux_sel_dec);
	assign imm_b_mux_sel = (lsu_addr_incr_req_i ? IMM_B_INCR_ADDR : imm_b_mux_sel_dec);
	assign imm_a = (imm_a_mux_sel == IMM_A_Z ? zimm_rs1_type : &#39;sd0);
	always @(*) begin : alu_operand_a_mux
		case (alu_op_a_mux_sel)
			OP_A_REG_A: alu_operand_a = rf_rdata_a_fwd;
			OP_A_FWD: alu_operand_a = lsu_addr_last_i;
			OP_A_CURRPC: alu_operand_a = pc_id_i;
			OP_A_IMM: alu_operand_a = imm_a;
			default: alu_operand_a = pc_id_i;
		endcase
	end
	generate
		if (BranchTargetALU) begin : g_btalu_muxes
			always @(*) begin : bt_operand_a_mux
				case (bt_a_mux_sel)
					OP_A_REG_A: bt_a_operand_o = rf_rdata_a_fwd;
					OP_A_CURRPC: bt_a_operand_o = pc_id_i;
					default: bt_a_operand_o = pc_id_i;
				endcase
			end
			always @(*) begin : bt_immediate_b_mux
				case (bt_b_mux_sel)
					IMM_B_I: bt_b_operand_o = imm_i_type;
					IMM_B_B: bt_b_operand_o = imm_b_type;
					IMM_B_J: bt_b_operand_o = imm_j_type;
					IMM_B_INCR_PC: bt_b_operand_o = (instr_is_compressed_i ? 32&#39;h2 : 32&#39;h4);
					default: bt_b_operand_o = (instr_is_compressed_i ? 32&#39;h2 : 32&#39;h4);
				endcase
			end
			always @(*) begin : immediate_b_mux
				case (imm_b_mux_sel)
					IMM_B_I: imm_b = imm_i_type;
					IMM_B_S: imm_b = imm_s_type;
					IMM_B_U: imm_b = imm_u_type;
					IMM_B_INCR_PC: imm_b = (instr_is_compressed_i ? 32&#39;h2 : 32&#39;h4);
					IMM_B_INCR_ADDR: imm_b = 32&#39;h4;
					default: imm_b = 32&#39;h4;
				endcase
			end
		end
		else begin : g_nobtalu
			wire [1:0] unused_a_mux_sel;
			wire [2:0] unused_b_mux_sel;
			assign unused_a_mux_sel = bt_a_mux_sel;
			assign unused_b_mux_sel = bt_b_mux_sel;
			always @(*) bt_a_operand_o = &#39;sd0;
			always @(*) bt_b_operand_o = &#39;sd0;
			always @(*) begin : immediate_b_mux
				case (imm_b_mux_sel)
					IMM_B_I: imm_b = imm_i_type;
					IMM_B_S: imm_b = imm_s_type;
					IMM_B_B: imm_b = imm_b_type;
					IMM_B_U: imm_b = imm_u_type;
					IMM_B_J: imm_b = imm_j_type;
					IMM_B_INCR_PC: imm_b = (instr_is_compressed_i ? 32&#39;h2 : 32&#39;h4);
					IMM_B_INCR_ADDR: imm_b = 32&#39;h4;
					default: imm_b = 32&#39;h4;
				endcase
			end
		end
	endgenerate
	assign alu_operand_b = (alu_op_b_mux_sel == OP_B_IMM ? imm_b : rf_rdata_b_fwd);
	always @(posedge clk_i or negedge rst_ni) begin : intermediate_val_reg
		if (!rst_ni)
			imd_val_q &lt;= &#39;sd0;
		else if (imd_val_we_ex_i)
			imd_val_q &lt;= imd_val_d_ex_i;
	end
	assign imd_val_q_ex_o = imd_val_q;
	assign rf_we_id_o = (rf_we_raw &amp; instr_executing) &amp; ~illegal_csr_insn_i;
	always @(*) begin : rf_wdata_id_mux
		case (rf_wdata_sel)
			RF_WD_EX: rf_wdata_id_o = result_ex_i;
			RF_WD_CSR: rf_wdata_id_o = csr_rdata_i;
			default: rf_wdata_id_o = result_ex_i;
		endcase
	end
	ibex_decoder #(
		.RV32E(RV32E),
		.RV32M(RV32M),
		.RV32B(RV32B),
		.BranchTargetALU(BranchTargetALU)
	) decoder_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.illegal_insn_o(illegal_insn_dec),
		.ebrk_insn_o(ebrk_insn),
		.mret_insn_o(mret_insn_dec),
		.dret_insn_o(dret_insn_dec),
		.ecall_insn_o(ecall_insn_dec),
		.wfi_insn_o(wfi_insn_dec),
		.jump_set_o(jump_set),
		.branch_taken_i(branch_taken),
		.icache_inval_o(icache_inval_o),
		.instr_first_cycle_i(instr_first_cycle),
		.instr_rdata_i(instr_rdata_i),
		.instr_rdata_alu_i(instr_rdata_alu_i),
		.illegal_c_insn_i(illegal_c_insn_i),
		.imm_a_mux_sel_o(imm_a_mux_sel),
		.imm_b_mux_sel_o(imm_b_mux_sel_dec),
		.bt_a_mux_sel_o(bt_a_mux_sel),
		.bt_b_mux_sel_o(bt_b_mux_sel),
		.imm_i_type_o(imm_i_type),
		.imm_s_type_o(imm_s_type),
		.imm_b_type_o(imm_b_type),
		.imm_u_type_o(imm_u_type),
		.imm_j_type_o(imm_j_type),
		.zimm_rs1_type_o(zimm_rs1_type),
		.rf_wdata_sel_o(rf_wdata_sel),
		.rf_we_o(rf_we_dec),
		.rf_raddr_a_o(rf_raddr_a_o),
		.rf_raddr_b_o(rf_raddr_b_o),
		.rf_waddr_o(rf_waddr_id_o),
		.rf_ren_a_o(rf_ren_a),
		.rf_ren_b_o(rf_ren_b),
		.alu_operator_o(alu_operator),
		.alu_op_a_mux_sel_o(alu_op_a_mux_sel_dec),
		.alu_op_b_mux_sel_o(alu_op_b_mux_sel_dec),
		.alu_multicycle_o(alu_multicycle_dec),
		.mult_en_o(mult_en_dec),
		.div_en_o(div_en_dec),
		.multdiv_sel_o(multdiv_sel_dec),
		.multdiv_operator_o(multdiv_operator),
		.multdiv_signed_mode_o(multdiv_signed_mode),
		.csr_access_o(csr_access_o),
		.csr_op_o(csr_op_o),
		.data_req_o(lsu_req_dec),
		.data_we_o(lsu_we),
		.data_type_o(lsu_type),
		.data_sign_extension_o(lsu_sign_ext),
		.jump_in_dec_o(jump_in_dec),
		.branch_in_dec_o(branch_in_dec)
	);
	function automatic [11:0] sv2v_cast_12;
		input reg [11:0] inp;
		sv2v_cast_12 = inp;
	endfunction
	always @(*) begin : csr_pipeline_flushes
		csr_pipe_flush = 1&#39;b0;
		if ((csr_op_en_o == 1&#39;b1) &amp;&amp; ((csr_op_o == CSR_OP_WRITE) || (csr_op_o == CSR_OP_SET))) begin
			if ((sv2v_cast_12(instr_rdata_i[31:20]) == CSR_MSTATUS) || (sv2v_cast_12(instr_rdata_i[31:20]) == CSR_MIE))
				csr_pipe_flush = 1&#39;b1;
		end
		else if ((csr_op_en_o == 1&#39;b1) &amp;&amp; (csr_op_o != CSR_OP_READ))
			if ((((sv2v_cast_12(instr_rdata_i[31:20]) == CSR_DCSR) || (sv2v_cast_12(instr_rdata_i[31:20]) == CSR_DPC)) || (sv2v_cast_12(instr_rdata_i[31:20]) == CSR_DSCRATCH0)) || (sv2v_cast_12(instr_rdata_i[31:20]) == CSR_DSCRATCH1))
				csr_pipe_flush = 1&#39;b1;
	end
	assign illegal_insn_o = instr_valid_i &amp; (illegal_insn_dec | illegal_csr_insn_i);
	ibex_controller #(.WritebackStage(WritebackStage)) controller_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.fetch_enable_i(fetch_enable_i),
		.ctrl_busy_o(ctrl_busy_o),
		.illegal_insn_i(illegal_insn_o),
		.ecall_insn_i(ecall_insn_dec),
		.mret_insn_i(mret_insn_dec),
		.dret_insn_i(dret_insn_dec),
		.wfi_insn_i(wfi_insn_dec),
		.ebrk_insn_i(ebrk_insn),
		.csr_pipe_flush_i(csr_pipe_flush),
		.instr_valid_i(instr_valid_i),
		.instr_i(instr_rdata_i),
		.instr_compressed_i(instr_rdata_c_i),
		.instr_is_compressed_i(instr_is_compressed_i),
		.instr_fetch_err_i(instr_fetch_err_i),
		.instr_fetch_err_plus2_i(instr_fetch_err_plus2_i),
		.pc_id_i(pc_id_i),
		.instr_valid_clear_o(instr_valid_clear_o),
		.id_in_ready_o(id_in_ready_o),
		.controller_run_o(controller_run),
		.instr_req_o(instr_req_o),
		.pc_set_o(pc_set_o),
		.pc_mux_o(pc_mux_o),
		.exc_pc_mux_o(exc_pc_mux_o),
		.exc_cause_o(exc_cause_o),
		.lsu_addr_last_i(lsu_addr_last_i),
		.load_err_i(lsu_load_err_i),
		.store_err_i(lsu_store_err_i),
		.wb_exception_o(wb_exception),
		.branch_set_i(branch_set),
		.jump_set_i(jump_set),
		.csr_mstatus_mie_i(csr_mstatus_mie_i),
		.irq_pending_i(irq_pending_i),
		.irqs_i(irqs_i),
		.irq_nm_i(irq_nm_i),
		.nmi_mode_o(nmi_mode_o),
		.csr_save_if_o(csr_save_if_o),
		.csr_save_id_o(csr_save_id_o),
		.csr_save_wb_o(csr_save_wb_o),
		.csr_restore_mret_id_o(csr_restore_mret_id_o),
		.csr_restore_dret_id_o(csr_restore_dret_id_o),
		.csr_save_cause_o(csr_save_cause_o),
		.csr_mtval_o(csr_mtval_o),
		.priv_mode_i(priv_mode_i),
		.csr_mstatus_tw_i(csr_mstatus_tw_i),
		.debug_mode_o(debug_mode_o),
		.debug_cause_o(debug_cause_o),
		.debug_csr_save_o(debug_csr_save_o),
		.debug_req_i(debug_req_i),
		.debug_single_step_i(debug_single_step_i),
		.debug_ebreakm_i(debug_ebreakm_i),
		.debug_ebreaku_i(debug_ebreaku_i),
		.trigger_match_i(trigger_match_i),
		.stall_id_i(stall_id),
		.stall_wb_i(stall_wb),
		.flush_id_o(flush_id),
		.perf_jump_o(perf_jump_o),
		.perf_tbranch_o(perf_tbranch_o)
	);
	assign multdiv_en_dec = mult_en_dec | div_en_dec;
	assign lsu_req = (instr_executing ? data_req_allowed &amp; lsu_req_dec : 1&#39;b0);
	assign mult_en_id = (instr_executing ? mult_en_dec : 1&#39;b0);
	assign div_en_id = (instr_executing ? div_en_dec : 1&#39;b0);
	assign lsu_req_o = lsu_req;
	assign lsu_we_o = lsu_we;
	assign lsu_type_o = lsu_type;
	assign lsu_sign_ext_o = lsu_sign_ext;
	assign lsu_wdata_o = rf_rdata_b_fwd;
	assign csr_op_en_o = (csr_access_o &amp; instr_executing) &amp; instr_id_done_o;
	assign alu_operator_ex_o = alu_operator;
	assign alu_operand_a_ex_o = alu_operand_a;
	assign alu_operand_b_ex_o = alu_operand_b;
	assign mult_en_ex_o = mult_en_id;
	assign div_en_ex_o = div_en_id;
	assign multdiv_sel_ex_o = multdiv_sel_dec;
	assign multdiv_operator_ex_o = multdiv_operator;
	assign multdiv_signed_mode_ex_o = multdiv_signed_mode;
	assign multdiv_operand_a_ex_o = rf_rdata_a_fwd;
	assign multdiv_operand_b_ex_o = rf_rdata_b_fwd;
	generate
		if (BranchTargetALU &amp;&amp; !DataIndTiming) begin : g_branch_set_direct
			assign branch_set = branch_set_d;
		end
		else begin : g_branch_set_flop
			reg branch_set_q;
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					branch_set_q &lt;= 1&#39;b0;
				else
					branch_set_q &lt;= branch_set_d;
			assign branch_set = (BranchTargetALU &amp;&amp; !data_ind_timing_i ? branch_set_d : branch_set_q);
		end
	endgenerate
	generate
		if (DataIndTiming) begin : g_sec_branch_taken
			reg branch_taken_q;
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					branch_taken_q &lt;= 1&#39;b0;
				else
					branch_taken_q &lt;= branch_decision_i;
			assign branch_taken = ~data_ind_timing_i | branch_taken_q;
		end
		else begin : g_nosec_branch_taken
			assign branch_taken = 1&#39;b1;
		end
	endgenerate
	reg id_fsm_q;
	reg id_fsm_d;
	localparam [0:0] FIRST_CYCLE = 0;
	always @(posedge clk_i or negedge rst_ni) begin : id_pipeline_reg
		if (!rst_ni)
			id_fsm_q &lt;= FIRST_CYCLE;
		else
			id_fsm_q &lt;= id_fsm_d;
	end
	localparam [0:0] MULTI_CYCLE = 1;
	always @(*) begin
		id_fsm_d = id_fsm_q;
		rf_we_raw = rf_we_dec;
		stall_multdiv = 1&#39;b0;
		stall_jump = 1&#39;b0;
		stall_branch = 1&#39;b0;
		stall_alu = 1&#39;b0;
		branch_set_d = 1&#39;b0;
		perf_branch_o = 1&#39;b0;
		if (instr_executing)
			case (id_fsm_q)
				FIRST_CYCLE:
					case (1&#39;b1)
						lsu_req_dec:
							if (!WritebackStage)
								id_fsm_d = MULTI_CYCLE;
							else if (~lsu_req_done_i)
								id_fsm_d = MULTI_CYCLE;
						multdiv_en_dec:
							if (~ex_valid_i) begin
								id_fsm_d = MULTI_CYCLE;
								rf_we_raw = 1&#39;b0;
								stall_multdiv = 1&#39;b1;
							end
						branch_in_dec: begin
							id_fsm_d = (data_ind_timing_i || (!BranchTargetALU &amp;&amp; branch_decision_i) ? MULTI_CYCLE : FIRST_CYCLE);
							stall_branch = (~BranchTargetALU &amp; branch_decision_i) | data_ind_timing_i;
							branch_set_d = branch_decision_i | data_ind_timing_i;
							perf_branch_o = 1&#39;b1;
						end
						jump_in_dec: begin
							id_fsm_d = (BranchTargetALU ? FIRST_CYCLE : MULTI_CYCLE);
							stall_jump = ~BranchTargetALU;
						end
						alu_multicycle_dec: begin
							stall_alu = 1&#39;b1;
							id_fsm_d = MULTI_CYCLE;
							rf_we_raw = 1&#39;b0;
						end
						default: id_fsm_d = FIRST_CYCLE;
					endcase
				MULTI_CYCLE: begin
					if (multdiv_en_dec)
						rf_we_raw = rf_we_dec &amp; ex_valid_i;
					if (multicycle_done &amp; ready_wb_i)
						id_fsm_d = FIRST_CYCLE;
					else begin
						stall_multdiv = multdiv_en_dec;
						stall_branch = branch_in_dec;
						stall_jump = jump_in_dec;
					end
				end
				default: id_fsm_d = FIRST_CYCLE;
			endcase
	end
	assign multdiv_ready_id_o = ready_wb_i;
	assign stall_id = ((((stall_ld_hz | stall_mem) | stall_multdiv) | stall_jump) | stall_branch) | stall_alu;
	assign instr_done = (~stall_id &amp; ~flush_id) &amp; instr_executing;
	generate
		if (WritebackStage) assign multicycle_done = (lsu_req_dec ? ~stall_mem : ex_valid_i);
		else assign multicycle_done = (lsu_req_dec ? lsu_valid_i : ex_valid_i);
	endgenerate
	assign instr_first_cycle = instr_valid_i &amp; (id_fsm_q == FIRST_CYCLE);
	assign instr_first_cycle_id_o = instr_first_cycle;
	generate
		if (WritebackStage) begin : gen_stall_mem
			wire unused_lsu_busy;
			wire rf_rd_a_wb_match;
			wire rf_rd_b_wb_match;
			wire rf_rd_a_hz;
			wire rf_rd_b_hz;
			wire data_req_complete_d;
			reg data_req_complete_q;
			wire outstanding_memory_access;
			wire instr_kill;
			assign unused_lsu_busy = lsu_busy_i;
			assign data_req_complete_d = (data_req_complete_q | (lsu_req &amp; lsu_req_done_i)) &amp; ~instr_id_done_o;
			always @(posedge clk_i or negedge rst_ni)
				if (~rst_ni)
					data_req_complete_q &lt;= 1&#39;b0;
				else
					data_req_complete_q &lt;= data_req_complete_d;
			assign outstanding_memory_access = (outstanding_load_wb_i | outstanding_store_wb_i) &amp; ~lsu_valid_i;
			assign data_req_allowed = ~outstanding_memory_access &amp; ~data_req_complete_q;
			assign instr_kill = (instr_fetch_err_i | wb_exception) | ~controller_run;
			assign instr_executing = ((instr_valid_i &amp; ~instr_kill) &amp; ~stall_ld_hz) &amp; ~outstanding_memory_access;
			assign stall_mem = instr_valid_i &amp; ((lsu_req_dec &amp; (~data_req_allowed | (~data_req_complete_q &amp; ~lsu_req_done_i))) | outstanding_memory_access);
			assign rf_rd_a_wb_match = (rf_waddr_wb_i == rf_raddr_a_o) &amp; |rf_raddr_a_o;
			assign rf_rd_b_wb_match = (rf_waddr_wb_i == rf_raddr_b_o) &amp; |rf_raddr_b_o;
			assign rf_rd_a_hz = rf_rd_a_wb_match &amp; rf_ren_a;
			assign rf_rd_b_hz = rf_rd_b_wb_match &amp; rf_ren_b;
			assign rf_rdata_a_fwd = (rf_rd_a_wb_match &amp; rf_write_wb_i ? rf_wdata_fwd_wb_i : rf_rdata_a_i);
			assign rf_rdata_b_fwd = (rf_rd_b_wb_match &amp; rf_write_wb_i ? rf_wdata_fwd_wb_i : rf_rdata_b_i);
			assign stall_ld_hz = ((outstanding_load_wb_i &amp; lsu_load_i) &amp; (rf_rd_a_hz | rf_rd_b_hz)) &amp; rf_write_wb_i;
			assign instr_type_wb_o = (~lsu_req_dec ? WB_INSTR_OTHER : (lsu_we ? WB_INSTR_STORE : WB_INSTR_LOAD));
			assign en_wb_o = instr_done;
			assign instr_id_done_o = en_wb_o &amp; ready_wb_i;
			assign stall_wb = en_wb_o &amp; ~ready_wb_i;
			assign perf_dside_wait_o = (instr_valid_i &amp; ~instr_kill) &amp; (outstanding_memory_access | stall_ld_hz);
		end
		else begin
			assign data_req_allowed = instr_first_cycle;
			assign stall_mem = instr_valid_i &amp; (lsu_busy_i | (lsu_req_dec &amp; (~lsu_valid_i | instr_first_cycle)));
			assign stall_ld_hz = 1&#39;b0;
			assign instr_executing = (instr_valid_i &amp; ~instr_fetch_err_i) &amp; controller_run;
			assign rf_rdata_a_fwd = rf_rdata_a_i;
			assign rf_rdata_b_fwd = rf_rdata_b_i;
			wire unused_data_req_done_ex;
			wire unused_lsu_load;
			wire [4:0] unused_rf_waddr_wb;
			wire unused_rf_write_wb;
			wire unused_outstanding_load_wb;
			wire unused_outstanding_store_wb;
			wire unused_wb_exception;
			wire unused_rf_ren_a;
			wire unused_rf_ren_b;
			wire [31:0] unused_rf_wdata_fwd_wb;
			assign unused_data_req_done_ex = lsu_req_done_i;
			assign unused_lsu_load = lsu_load_i;
			assign unused_rf_waddr_wb = rf_waddr_wb_i;
			assign unused_rf_write_wb = rf_write_wb_i;
			assign unused_outstanding_load_wb = outstanding_load_wb_i;
			assign unused_outstanding_store_wb = outstanding_store_wb_i;
			assign unused_wb_exception = wb_exception;
			assign unused_rf_ren_a = rf_ren_a;
			assign unused_rf_ren_b = rf_ren_b;
			assign unused_rf_wdata_fwd_wb = rf_wdata_fwd_wb_i;
			assign instr_type_wb_o = WB_INSTR_OTHER;
			assign stall_wb = 1&#39;b0;
			assign perf_dside_wait_o = (instr_executing &amp; lsu_req_dec) &amp; ~lsu_valid_i;
			assign en_wb_o = 1&#39;b0;
			assign instr_id_done_o = instr_done;
		end
	endgenerate
	assign perf_mul_wait_o = stall_multdiv &amp; mult_en_dec;
	assign perf_div_wait_o = stall_multdiv &amp; div_en_dec;
	assign instr_id_done_compressed_o = instr_id_done_o &amp; instr_is_compressed_i;
endmodule
module ibex_if_stage (
	clk_i,
	rst_ni,
	boot_addr_i,
	req_i,
	instr_req_o,
	instr_addr_o,
	instr_gnt_i,
	instr_rvalid_i,
	instr_rdata_i,
	instr_err_i,
	instr_pmp_err_i,
	instr_valid_id_o,
	instr_new_id_o,
	instr_rdata_id_o,
	instr_rdata_alu_id_o,
	instr_rdata_c_id_o,
	instr_is_compressed_id_o,
	instr_fetch_err_o,
	instr_fetch_err_plus2_o,
	illegal_c_insn_id_o,
	pc_if_o,
	pc_id_o,
	instr_valid_clear_i,
	pc_set_i,
	pc_mux_i,
	exc_pc_mux_i,
	exc_cause,
	icache_enable_i,
	icache_inval_i,
	branch_target_ex_i,
	csr_mepc_i,
	csr_depc_i,
	csr_mtvec_i,
	csr_mtvec_init_o,
	id_in_ready_i,
	if_busy_o
);
	parameter [31:0] DmHaltAddr = 32&#39;h1A110800;
	parameter [31:0] DmExceptionAddr = 32&#39;h1A110808;
	parameter [0:0] ICache = 1&#39;b0;
	parameter [0:0] ICacheECC = 1&#39;b0;
	input wire clk_i;
	input wire rst_ni;
	input wire [31:0] boot_addr_i;
	input wire req_i;
	output wire instr_req_o;
	output wire [31:0] instr_addr_o;
	input wire instr_gnt_i;
	input wire instr_rvalid_i;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	input wire instr_pmp_err_i;
	output wire instr_valid_id_o;
	output wire instr_new_id_o;
	output reg [31:0] instr_rdata_id_o;
	output reg [31:0] instr_rdata_alu_id_o;
	output reg [15:0] instr_rdata_c_id_o;
	output reg instr_is_compressed_id_o;
	output reg instr_fetch_err_o;
	output reg instr_fetch_err_plus2_o;
	output reg illegal_c_insn_id_o;
	output wire [31:0] pc_if_o;
	output reg [31:0] pc_id_o;
	input wire instr_valid_clear_i;
	input wire pc_set_i;
	input wire [2:0] pc_mux_i;
	input wire [1:0] exc_pc_mux_i;
	input wire [5:0] exc_cause;
	input wire icache_enable_i;
	input wire icache_inval_i;
	input wire [31:0] branch_target_ex_i;
	input wire [31:0] csr_mepc_i;
	input wire [31:0] csr_depc_i;
	input wire [31:0] csr_mtvec_i;
	output wire csr_mtvec_init_o;
	input wire id_in_ready_i;
	output wire if_busy_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire instr_valid_id_d;
	reg instr_valid_id_q;
	wire instr_new_id_d;
	reg instr_new_id_q;
	wire prefetch_busy;
	wire branch_req;
	reg [31:0] fetch_addr_n;
	wire fetch_valid;
	wire fetch_ready;
	wire [31:0] fetch_rdata;
	wire [31:0] fetch_addr;
	wire fetch_err;
	wire fetch_err_plus2;
	reg [31:0] exc_pc;
	wire [5:0] irq_id;
	wire unused_irq_bit;
	wire if_id_pipe_reg_we;
	wire [7:0] unused_boot_addr;
	wire [7:0] unused_csr_mtvec;
	assign unused_boot_addr = boot_addr_i[7:0];
	assign unused_csr_mtvec = csr_mtvec_i[7:0];
	assign irq_id = exc_cause;
	assign unused_irq_bit = irq_id[5];
	always @(*) begin : exc_pc_mux
		case (exc_pc_mux_i)
			EXC_PC_EXC: exc_pc = {csr_mtvec_i[31:8], 8&#39;h00};
			EXC_PC_IRQ: exc_pc = {csr_mtvec_i[31:8], 1&#39;b0, irq_id[4:0], 2&#39;b00};
			EXC_PC_DBD: exc_pc = DmHaltAddr;
			EXC_PC_DBG_EXC: exc_pc = DmExceptionAddr;
			default: exc_pc = {csr_mtvec_i[31:8], 8&#39;h00};
		endcase
	end
	always @(*) begin : fetch_addr_mux
		case (pc_mux_i)
			PC_BOOT: fetch_addr_n = {boot_addr_i[31:8], 8&#39;h80};
			PC_JUMP: fetch_addr_n = branch_target_ex_i;
			PC_EXC: fetch_addr_n = exc_pc;
			PC_ERET: fetch_addr_n = csr_mepc_i;
			PC_DRET: fetch_addr_n = csr_depc_i;
			default: fetch_addr_n = {boot_addr_i[31:8], 8&#39;h80};
		endcase
	end
	assign csr_mtvec_init_o = (pc_mux_i == PC_BOOT) &amp; pc_set_i;
	generate
		if (ICache) begin : gen_icache
			ibex_icache #(.ICacheECC(ICacheECC)) icache_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.req_i(req_i),
				.branch_i(branch_req),
				.addr_i({fetch_addr_n[31:1], 1&#39;b0}),
				.ready_i(fetch_ready),
				.valid_o(fetch_valid),
				.rdata_o(fetch_rdata),
				.addr_o(fetch_addr),
				.err_o(fetch_err),
				.err_plus2_o(fetch_err_plus2),
				.instr_req_o(instr_req_o),
				.instr_addr_o(instr_addr_o),
				.instr_gnt_i(instr_gnt_i),
				.instr_rvalid_i(instr_rvalid_i),
				.instr_rdata_i(instr_rdata_i),
				.instr_err_i(instr_err_i),
				.instr_pmp_err_i(instr_pmp_err_i),
				.icache_enable_i(icache_enable_i),
				.icache_inval_i(icache_inval_i),
				.busy_o(prefetch_busy)
			);
		end
		else begin : gen_prefetch_buffer
			ibex_prefetch_buffer prefetch_buffer_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.req_i(req_i),
				.branch_i(branch_req),
				.addr_i({fetch_addr_n[31:1], 1&#39;b0}),
				.ready_i(fetch_ready),
				.valid_o(fetch_valid),
				.rdata_o(fetch_rdata),
				.addr_o(fetch_addr),
				.err_o(fetch_err),
				.err_plus2_o(fetch_err_plus2),
				.instr_req_o(instr_req_o),
				.instr_addr_o(instr_addr_o),
				.instr_gnt_i(instr_gnt_i),
				.instr_rvalid_i(instr_rvalid_i),
				.instr_rdata_i(instr_rdata_i),
				.instr_err_i(instr_err_i),
				.instr_pmp_err_i(instr_pmp_err_i),
				.busy_o(prefetch_busy)
			);
			wire unused_icen;
			wire unused_icinv;
			assign unused_icen = icache_enable_i;
			assign unused_icinv = icache_inval_i;
		end
	endgenerate
	assign branch_req = pc_set_i;
	assign fetch_ready = id_in_ready_i;
	assign pc_if_o = fetch_addr;
	assign if_busy_o = prefetch_busy;
	wire [31:0] instr_decompressed;
	wire illegal_c_insn;
	wire instr_is_compressed_int;
	ibex_compressed_decoder compressed_decoder_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.valid_i(fetch_valid),
		.instr_i(fetch_rdata),
		.instr_o(instr_decompressed),
		.is_compressed_o(instr_is_compressed_int),
		.illegal_instr_o(illegal_c_insn)
	);
	assign instr_valid_id_d = ((fetch_valid &amp; id_in_ready_i) &amp; ~pc_set_i) | (instr_valid_id_q &amp; ~instr_valid_clear_i);
	assign instr_new_id_d = fetch_valid &amp; id_in_ready_i;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			instr_valid_id_q &lt;= 1&#39;b0;
			instr_new_id_q &lt;= 1&#39;b0;
		end
		else begin
			instr_valid_id_q &lt;= instr_valid_id_d;
			instr_new_id_q &lt;= instr_new_id_d;
		end
	assign instr_valid_id_o = instr_valid_id_q;
	assign instr_new_id_o = instr_new_id_q;
	assign if_id_pipe_reg_we = instr_new_id_d;
	always @(posedge clk_i)
		if (if_id_pipe_reg_we) begin
			instr_rdata_id_o &lt;= instr_decompressed;
			instr_rdata_alu_id_o &lt;= instr_decompressed;
			instr_fetch_err_o &lt;= fetch_err;
			instr_fetch_err_plus2_o &lt;= fetch_err_plus2;
			instr_rdata_c_id_o &lt;= fetch_rdata[15:0];
			instr_is_compressed_id_o &lt;= instr_is_compressed_int;
			illegal_c_insn_id_o &lt;= illegal_c_insn;
			pc_id_o &lt;= pc_if_o;
		end
endmodule
module ibex_wb_stage (
	clk_i,
	rst_ni,
	en_wb_i,
	instr_type_wb_i,
	pc_id_i,
	ready_wb_o,
	rf_write_wb_o,
	outstanding_load_wb_o,
	outstanding_store_wb_o,
	pc_wb_o,
	rf_waddr_id_i,
	rf_wdata_id_i,
	rf_we_id_i,
	rf_wdata_lsu_i,
	rf_we_lsu_i,
	rf_wdata_fwd_wb_o,
	rf_waddr_wb_o,
	rf_wdata_wb_o,
	rf_we_wb_o,
	lsu_data_valid_i,
	instr_done_wb_o
);
	parameter [0:0] WritebackStage = 1&#39;b0;
	input wire clk_i;
	input wire rst_ni;
	input wire en_wb_i;
	input wire [1:0] instr_type_wb_i;
	input wire [31:0] pc_id_i;
	output wire ready_wb_o;
	output wire rf_write_wb_o;
	output wire outstanding_load_wb_o;
	output wire outstanding_store_wb_o;
	output wire [31:0] pc_wb_o;
	input wire [4:0] rf_waddr_id_i;
	input wire [31:0] rf_wdata_id_i;
	input wire rf_we_id_i;
	input wire [31:0] rf_wdata_lsu_i;
	input wire rf_we_lsu_i;
	output wire [31:0] rf_wdata_fwd_wb_o;
	output wire [4:0] rf_waddr_wb_o;
	output wire [31:0] rf_wdata_wb_o;
	output wire rf_we_wb_o;
	input wire lsu_data_valid_i;
	output wire instr_done_wb_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire [31:0] rf_wdata_wb_mux [1:0];
	wire [1:0] rf_wdata_wb_mux_we;
	generate
		if (WritebackStage) begin : g_writeback_stage
			reg [31:0] rf_wdata_wb_q;
			reg rf_we_wb_q;
			reg [4:0] rf_waddr_wb_q;
			wire wb_done;
			reg wb_valid_q;
			reg [31:0] wb_pc_q;
			reg [1:0] wb_instr_type_q;
			wire wb_valid_d;
			assign wb_valid_d = (en_wb_i &amp; ready_wb_o) | (wb_valid_q &amp; ~wb_done);
			assign wb_done = (wb_instr_type_q == WB_INSTR_OTHER) | lsu_data_valid_i;
			always @(posedge clk_i or negedge rst_ni)
				if (~rst_ni)
					wb_valid_q &lt;= 1&#39;b0;
				else
					wb_valid_q &lt;= wb_valid_d;
			always @(posedge clk_i)
				if (en_wb_i) begin
					rf_we_wb_q &lt;= rf_we_id_i;
					rf_waddr_wb_q &lt;= rf_waddr_id_i;
					rf_wdata_wb_q &lt;= rf_wdata_id_i;
					wb_instr_type_q &lt;= instr_type_wb_i;
					wb_pc_q &lt;= pc_id_i;
				end
			assign rf_waddr_wb_o = rf_waddr_wb_q;
			assign rf_wdata_wb_mux[0] = rf_wdata_wb_q;
			assign rf_wdata_wb_mux_we[0] = rf_we_wb_q &amp; wb_valid_q;
			assign ready_wb_o = ~wb_valid_q | wb_done;
			assign rf_write_wb_o = wb_valid_q &amp; (rf_we_wb_q | (wb_instr_type_q == WB_INSTR_LOAD));
			assign outstanding_load_wb_o = wb_valid_q &amp; (wb_instr_type_q == WB_INSTR_LOAD);
			assign outstanding_store_wb_o = wb_valid_q &amp; (wb_instr_type_q == WB_INSTR_STORE);
			assign pc_wb_o = wb_pc_q;
			assign instr_done_wb_o = wb_valid_q &amp; wb_done;
			assign rf_wdata_fwd_wb_o = rf_wdata_wb_q;
		end
		else begin
			assign rf_waddr_wb_o = rf_waddr_id_i;
			assign rf_wdata_wb_mux[0] = rf_wdata_id_i;
			assign rf_wdata_wb_mux_we[0] = rf_we_id_i;
			assign ready_wb_o = 1&#39;b1;
			wire unused_clk;
			wire unused_rst;
			wire unused_en_wb;
			wire [1:0] unused_instr_type_wb;
			wire [31:0] unused_pc_id;
			wire unused_lsu_data_valid;
			assign unused_clk = clk_i;
			assign unused_rst = rst_ni;
			assign unused_en_wb = en_wb_i;
			assign unused_instr_type_wb = instr_type_wb_i;
			assign unused_pc_id = pc_id_i;
			assign unused_lsu_data_valid = lsu_data_valid_i;
			assign outstanding_load_wb_o = 1&#39;b0;
			assign outstanding_store_wb_o = 1&#39;b0;
			assign pc_wb_o = &#39;sd0;
			assign rf_write_wb_o = 1&#39;b0;
			assign rf_wdata_fwd_wb_o = 32&#39;b0;
			assign instr_done_wb_o = 1&#39;b0;
		end
	endgenerate
	assign rf_wdata_wb_mux[1] = rf_wdata_lsu_i;
	assign rf_wdata_wb_mux_we[1] = rf_we_lsu_i;
	assign rf_wdata_wb_o = (rf_wdata_wb_mux_we[0] ? rf_wdata_wb_mux[0] : rf_wdata_wb_mux[1]);
	assign rf_we_wb_o = |rf_wdata_wb_mux_we;
endmodule
module ibex_load_store_unit (
	clk_i,
	rst_ni,
	data_req_o,
	data_gnt_i,
	data_rvalid_i,
	data_err_i,
	data_pmp_err_i,
	data_addr_o,
	data_we_o,
	data_be_o,
	data_wdata_o,
	data_rdata_i,
	lsu_we_i,
	lsu_type_i,
	lsu_wdata_i,
	lsu_sign_ext_i,
	lsu_rdata_o,
	lsu_rdata_valid_o,
	lsu_req_i,
	adder_result_ex_i,
	addr_incr_req_o,
	addr_last_o,
	lsu_req_done_o,
	lsu_resp_valid_o,
	load_err_o,
	store_err_o,
	load_o,
	busy_o,
	perf_load_o,
	perf_store_o,
	illegal_insn_id_i,
	instr_valid_id_i
);
	input wire clk_i;
	input wire rst_ni;
	output reg data_req_o;
	input wire data_gnt_i;
	input wire data_rvalid_i;
	input wire data_err_i;
	input wire data_pmp_err_i;
	output wire [31:0] data_addr_o;
	output wire data_we_o;
	output wire [3:0] data_be_o;
	output wire [31:0] data_wdata_o;
	input wire [31:0] data_rdata_i;
	input wire lsu_we_i;
	input wire [1:0] lsu_type_i;
	input wire [31:0] lsu_wdata_i;
	input wire lsu_sign_ext_i;
	output wire [31:0] lsu_rdata_o;
	output wire lsu_rdata_valid_o;
	input wire lsu_req_i;
	input wire [31:0] adder_result_ex_i;
	output reg addr_incr_req_o;
	output wire [31:0] addr_last_o;
	output wire lsu_req_done_o;
	output wire lsu_resp_valid_o;
	output wire load_err_o;
	output wire store_err_o;
	output wire load_o;
	output wire busy_o;
	output reg perf_load_o;
	output reg perf_store_o;
	input wire illegal_insn_id_i;
	input wire instr_valid_id_i;
	wire [31:0] data_addr;
	wire [31:0] data_addr_w_aligned;
	reg [31:0] addr_last_q;
	reg addr_update;
	reg ctrl_update;
	reg rdata_update;
	reg [31:8] rdata_q;
	reg [1:0] rdata_offset_q;
	reg [1:0] data_type_q;
	reg data_sign_ext_q;
	reg data_we_q;
	wire [1:0] data_offset;
	reg [3:0] data_be;
	reg [31:0] data_wdata;
	reg [31:0] data_rdata_ext;
	reg [31:0] rdata_w_ext;
	reg [31:0] rdata_h_ext;
	reg [31:0] rdata_b_ext;
	wire split_misaligned_access;
	reg handle_misaligned_q;
	reg handle_misaligned_d;
	reg pmp_err_q;
	reg pmp_err_d;
	reg lsu_err_q;
	reg lsu_err_d;
	wire data_or_pmp_err;
	reg [2:0] ls_fsm_cs;
	reg [2:0] ls_fsm_ns;
	assign data_addr = adder_result_ex_i;
	assign data_offset = data_addr[1:0];
	always @(*)
		case (lsu_type_i)
			2&#39;b00:
				if (!handle_misaligned_q)
					case (data_offset)
						2&#39;b00: data_be = 4&#39;b1111;
						2&#39;b01: data_be = 4&#39;b1110;
						2&#39;b10: data_be = 4&#39;b1100;
						2&#39;b11: data_be = 4&#39;b1000;
						default: data_be = 4&#39;b1111;
					endcase
				else
					case (data_offset)
						2&#39;b00: data_be = 4&#39;b0000;
						2&#39;b01: data_be = 4&#39;b0001;
						2&#39;b10: data_be = 4&#39;b0011;
						2&#39;b11: data_be = 4&#39;b0111;
						default: data_be = 4&#39;b1111;
					endcase
			2&#39;b01:
				if (!handle_misaligned_q)
					case (data_offset)
						2&#39;b00: data_be = 4&#39;b0011;
						2&#39;b01: data_be = 4&#39;b0110;
						2&#39;b10: data_be = 4&#39;b1100;
						2&#39;b11: data_be = 4&#39;b1000;
						default: data_be = 4&#39;b1111;
					endcase
				else
					data_be = 4&#39;b0001;
			2&#39;b10, 2&#39;b11:
				case (data_offset)
					2&#39;b00: data_be = 4&#39;b0001;
					2&#39;b01: data_be = 4&#39;b0010;
					2&#39;b10: data_be = 4&#39;b0100;
					2&#39;b11: data_be = 4&#39;b1000;
					default: data_be = 4&#39;b1111;
				endcase
			default: data_be = 4&#39;b1111;
		endcase
	always @(*)
		case (data_offset)
			2&#39;b00: data_wdata = lsu_wdata_i[31:0];
			2&#39;b01: data_wdata = {lsu_wdata_i[23:0], lsu_wdata_i[31:24]};
			2&#39;b10: data_wdata = {lsu_wdata_i[15:0], lsu_wdata_i[31:16]};
			2&#39;b11: data_wdata = {lsu_wdata_i[7:0], lsu_wdata_i[31:8]};
			default: data_wdata = lsu_wdata_i[31:0];
		endcase
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			rdata_q &lt;= &#39;sd0;
		else if (rdata_update)
			rdata_q &lt;= data_rdata_i[31:8];
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			rdata_offset_q &lt;= 2&#39;h0;
			data_type_q &lt;= 2&#39;h0;
			data_sign_ext_q &lt;= 1&#39;b0;
			data_we_q &lt;= 1&#39;b0;
		end
		else if (ctrl_update) begin
			rdata_offset_q &lt;= data_offset;
			data_type_q &lt;= lsu_type_i;
			data_sign_ext_q &lt;= lsu_sign_ext_i;
			data_we_q &lt;= lsu_we_i;
		end
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			addr_last_q &lt;= &#39;sd0;
		else if (addr_update)
			addr_last_q &lt;= data_addr;
	always @(*)
		case (rdata_offset_q)
			2&#39;b00: rdata_w_ext = data_rdata_i[31:0];
			2&#39;b01: rdata_w_ext = {data_rdata_i[7:0], rdata_q[31:8]};
			2&#39;b10: rdata_w_ext = {data_rdata_i[15:0], rdata_q[31:16]};
			2&#39;b11: rdata_w_ext = {data_rdata_i[23:0], rdata_q[31:24]};
			default: rdata_w_ext = data_rdata_i[31:0];
		endcase
	always @(*)
		case (rdata_offset_q)
			2&#39;b00:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[15:0]};
				else
					rdata_h_ext = {{16 {data_rdata_i[15]}}, data_rdata_i[15:0]};
			2&#39;b01:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[23:8]};
				else
					rdata_h_ext = {{16 {data_rdata_i[23]}}, data_rdata_i[23:8]};
			2&#39;b10:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[31:16]};
				else
					rdata_h_ext = {{16 {data_rdata_i[31]}}, data_rdata_i[31:16]};
			2&#39;b11:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[7:0], rdata_q[31:24]};
				else
					rdata_h_ext = {{16 {data_rdata_i[7]}}, data_rdata_i[7:0], rdata_q[31:24]};
			default: rdata_h_ext = {16&#39;h0000, data_rdata_i[15:0]};
		endcase
	always @(*)
		case (rdata_offset_q)
			2&#39;b00:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[7:0]};
				else
					rdata_b_ext = {{24 {data_rdata_i[7]}}, data_rdata_i[7:0]};
			2&#39;b01:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[15:8]};
				else
					rdata_b_ext = {{24 {data_rdata_i[15]}}, data_rdata_i[15:8]};
			2&#39;b10:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[23:16]};
				else
					rdata_b_ext = {{24 {data_rdata_i[23]}}, data_rdata_i[23:16]};
			2&#39;b11:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[31:24]};
				else
					rdata_b_ext = {{24 {data_rdata_i[31]}}, data_rdata_i[31:24]};
			default: rdata_b_ext = {24&#39;h00_0000, data_rdata_i[7:0]};
		endcase
	always @(*)
		case (data_type_q)
			2&#39;b00: data_rdata_ext = rdata_w_ext;
			2&#39;b01: data_rdata_ext = rdata_h_ext;
			2&#39;b10, 2&#39;b11: data_rdata_ext = rdata_b_ext;
			default: data_rdata_ext = rdata_w_ext;
		endcase
	assign split_misaligned_access = ((lsu_type_i == 2&#39;b00) &amp;&amp; (data_offset != 2&#39;b00)) || ((lsu_type_i == 2&#39;b01) &amp;&amp; (data_offset == 2&#39;b11));
	localparam [2:0] IDLE = 0;
	localparam [2:0] WAIT_GNT = 3;
	localparam [2:0] WAIT_GNT_MIS = 1;
	localparam [2:0] WAIT_RVALID_MIS = 2;
	localparam [2:0] WAIT_RVALID_MIS_GNTS_DONE = 4;
	always @(*) begin
		ls_fsm_ns = ls_fsm_cs;
		data_req_o = 1&#39;b0;
		addr_incr_req_o = 1&#39;b0;
		handle_misaligned_d = handle_misaligned_q;
		pmp_err_d = pmp_err_q;
		lsu_err_d = lsu_err_q;
		addr_update = 1&#39;b0;
		ctrl_update = 1&#39;b0;
		rdata_update = 1&#39;b0;
		perf_load_o = 1&#39;b0;
		perf_store_o = 1&#39;b0;
		case (ls_fsm_cs)
			IDLE: begin
				pmp_err_d = 1&#39;b0;
				if (lsu_req_i) begin
					data_req_o = 1&#39;b1;
					pmp_err_d = data_pmp_err_i;
					lsu_err_d = 1&#39;b0;
					perf_load_o = ~lsu_we_i;
					perf_store_o = lsu_we_i;
					if (data_gnt_i) begin
						ctrl_update = 1&#39;b1;
						addr_update = 1&#39;b1;
						handle_misaligned_d = split_misaligned_access;
						ls_fsm_ns = (split_misaligned_access ? WAIT_RVALID_MIS : IDLE);
					end
					else
						ls_fsm_ns = (split_misaligned_access ? WAIT_GNT_MIS : WAIT_GNT);
				end
			end
			WAIT_GNT_MIS: begin
				data_req_o = 1&#39;b1;
				if (data_gnt_i || pmp_err_q) begin
					addr_update = 1&#39;b1;
					ctrl_update = 1&#39;b1;
					handle_misaligned_d = 1&#39;b1;
					ls_fsm_ns = WAIT_RVALID_MIS;
				end
			end
			WAIT_RVALID_MIS: begin
				data_req_o = 1&#39;b1;
				addr_incr_req_o = 1&#39;b1;
				if (data_rvalid_i || pmp_err_q) begin
					pmp_err_d = data_pmp_err_i;
					lsu_err_d = data_err_i | pmp_err_q;
					rdata_update = ~data_we_q;
					ls_fsm_ns = (data_gnt_i ? IDLE : WAIT_GNT);
					addr_update = data_gnt_i &amp; ~(data_err_i | pmp_err_q);
					handle_misaligned_d = ~data_gnt_i;
				end
				else if (data_gnt_i) begin
					ls_fsm_ns = WAIT_RVALID_MIS_GNTS_DONE;
					handle_misaligned_d = 1&#39;b0;
				end
			end
			WAIT_GNT: begin
				addr_incr_req_o = handle_misaligned_q;
				data_req_o = 1&#39;b1;
				if (data_gnt_i || pmp_err_q) begin
					ctrl_update = 1&#39;b1;
					addr_update = ~lsu_err_q;
					ls_fsm_ns = IDLE;
					handle_misaligned_d = 1&#39;b0;
				end
			end
			WAIT_RVALID_MIS_GNTS_DONE: begin
				addr_incr_req_o = 1&#39;b1;
				if (data_rvalid_i) begin
					pmp_err_d = data_pmp_err_i;
					lsu_err_d = data_err_i;
					addr_update = ~data_err_i;
					rdata_update = ~data_we_q;
					ls_fsm_ns = IDLE;
				end
			end
			default: ls_fsm_ns = IDLE;
		endcase
	end
	assign lsu_req_done_o = (lsu_req_i | (ls_fsm_cs != IDLE)) &amp; (ls_fsm_ns == IDLE);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			ls_fsm_cs &lt;= IDLE;
			handle_misaligned_q &lt;= &#39;sd0;
			pmp_err_q &lt;= &#39;sd0;
			lsu_err_q &lt;= &#39;sd0;
		end
		else begin
			ls_fsm_cs &lt;= ls_fsm_ns;
			handle_misaligned_q &lt;= handle_misaligned_d;
			pmp_err_q &lt;= pmp_err_d;
			lsu_err_q &lt;= lsu_err_d;
		end
	assign data_or_pmp_err = (lsu_err_q | data_err_i) | pmp_err_q;
	assign lsu_resp_valid_o = (data_rvalid_i | pmp_err_q) &amp; (ls_fsm_cs == IDLE);
	assign lsu_rdata_valid_o = lsu_resp_valid_o &amp; ~data_we_q;
	assign lsu_rdata_o = data_rdata_ext;
	assign data_addr_w_aligned = {data_addr[31:2], 2&#39;b00};
	assign data_addr_o = data_addr_w_aligned;
	assign data_wdata_o = data_wdata;
	assign data_we_o = lsu_we_i;
	assign data_be_o = data_be;
	assign addr_last_o = addr_last_q;
	assign load_err_o = (data_or_pmp_err &amp; ~data_we_q) &amp; lsu_resp_valid_o;
	assign store_err_o = (data_or_pmp_err &amp; data_we_q) &amp; lsu_resp_valid_o;
	assign busy_o = ls_fsm_cs != IDLE;
	assign load_o = ~data_we_q;
	wire unused_instr_valid_id;
	wire unused_illegal_insn_id;
	assign unused_instr_valid_id = instr_valid_id_i;
	assign unused_illegal_insn_id = illegal_insn_id_i;
endmodule
module ibex_multdiv_slow (
	clk_i,
	rst_ni,
	mult_en_i,
	div_en_i,
	operator_i,
	signed_mode_i,
	op_a_i,
	op_b_i,
	alu_adder_ext_i,
	alu_adder_i,
	equal_to_zero,
	alu_operand_a_o,
	alu_operand_b_o,
	imd_val_q_i,
	imd_val_d_o,
	imd_val_we_o,
	multdiv_ready_id_i,
	multdiv_result_o,
	valid_o
);
	input wire clk_i;
	input wire rst_ni;
	input wire mult_en_i;
	input wire div_en_i;
	input wire [1:0] operator_i;
	input wire [1:0] signed_mode_i;
	input wire [31:0] op_a_i;
	input wire [31:0] op_b_i;
	input wire [33:0] alu_adder_ext_i;
	input wire [31:0] alu_adder_i;
	input wire equal_to_zero;
	output reg [32:0] alu_operand_a_o;
	output reg [32:0] alu_operand_b_o;
	input wire [33:0] imd_val_q_i;
	output wire [33:0] imd_val_d_o;
	output wire imd_val_we_o;
	input wire multdiv_ready_id_i;
	output reg [31:0] multdiv_result_o;
	output wire valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	reg [4:0] multdiv_state_q;
	reg [4:0] multdiv_state_d;
	wire [4:0] multdiv_state_m1;
	reg [2:0] md_state_q;
	reg [2:0] md_state_d;
	wire [32:0] accum_window_q;
	reg [32:0] accum_window_d;
	wire [32:0] res_adder_l;
	wire [32:0] res_adder_h;
	reg [32:0] op_b_shift_q;
	reg [32:0] op_b_shift_d;
	reg [32:0] op_a_shift_q;
	reg [32:0] op_a_shift_d;
	wire [32:0] op_a_ext;
	wire [32:0] op_b_ext;
	wire [32:0] one_shift;
	wire [32:0] op_a_bw_pp;
	wire [32:0] op_a_bw_last_pp;
	wire [31:0] b_0;
	wire sign_a;
	wire sign_b;
	wire [32:0] next_reminder;
	wire [32:0] next_quotient;
	wire [32:0] op_remainder;
	reg [31:0] op_numerator_q;
	reg [31:0] op_numerator_d;
	wire is_greater_equal;
	wire div_change_sign;
	wire rem_change_sign;
	reg multdiv_hold;
	assign res_adder_l = alu_adder_ext_i[32:0];
	assign res_adder_h = alu_adder_ext_i[33:1];
	assign imd_val_d_o = accum_window_d;
	assign imd_val_we_o = ~multdiv_hold;
	assign accum_window_q = imd_val_q_i;
	localparam [2:0] MD_ABS_A = 1;
	localparam [2:0] MD_ABS_B = 2;
	localparam [2:0] MD_CHANGE_SIGN = 5;
	localparam [2:0] MD_IDLE = 0;
	localparam [2:0] MD_LAST = 4;
	always @(*) begin
		alu_operand_a_o = accum_window_q;
		multdiv_result_o = (div_en_i ? accum_window_q[31:0] : res_adder_l);
		case (operator_i)
			MD_OP_MULL: alu_operand_b_o = op_a_bw_pp;
			MD_OP_MULH: alu_operand_b_o = (md_state_q == MD_LAST ? op_a_bw_last_pp : op_a_bw_pp);
			default:
				case (md_state_q)
					MD_IDLE: begin
						alu_operand_a_o = {32&#39;h0, 1&#39;b1};
						alu_operand_b_o = {~op_b_i, 1&#39;b1};
					end
					MD_ABS_A: begin
						alu_operand_a_o = {32&#39;h0, 1&#39;b1};
						alu_operand_b_o = {~op_a_i, 1&#39;b1};
					end
					MD_ABS_B: begin
						alu_operand_a_o = {32&#39;h0, 1&#39;b1};
						alu_operand_b_o = {~op_b_i, 1&#39;b1};
					end
					MD_CHANGE_SIGN: begin
						alu_operand_a_o = {32&#39;h0, 1&#39;b1};
						alu_operand_b_o = {~accum_window_q[31:0], 1&#39;b1};
					end
					default: begin
						alu_operand_a_o = {accum_window_q[31:0], 1&#39;b1};
						alu_operand_b_o = {~op_b_shift_q[31:0], 1&#39;b1};
					end
				endcase
		endcase
	end
	assign is_greater_equal = ((accum_window_q[31] ^ op_b_shift_q[31]) == 1&#39;b0 ? res_adder_h[31] == 1&#39;b0 : accum_window_q[31]);
	assign one_shift = {32&#39;b0, 1&#39;b1} &lt;&lt; multdiv_state_q;
	assign next_reminder = (is_greater_equal ? res_adder_h : op_remainder);
	assign next_quotient = (is_greater_equal ? op_a_shift_q | one_shift : op_a_shift_q);
	assign b_0 = {32 {op_b_shift_q[0]}};
	assign op_a_bw_pp = {~(op_a_shift_q[32] &amp; op_b_shift_q[0]), op_a_shift_q[31:0] &amp; b_0};
	assign op_a_bw_last_pp = {op_a_shift_q[32] &amp; op_b_shift_q[0], ~(op_a_shift_q[31:0] &amp; b_0)};
	assign sign_a = op_a_i[31] &amp; signed_mode_i[0];
	assign sign_b = op_b_i[31] &amp; signed_mode_i[1];
	assign op_a_ext = {sign_a, op_a_i};
	assign op_b_ext = {sign_b, op_b_i};
	assign op_remainder = accum_window_q[32:0];
	assign multdiv_state_m1 = multdiv_state_q - 5&#39;h1;
	assign div_change_sign = sign_a ^ sign_b;
	assign rem_change_sign = sign_a;
	always @(posedge clk_i or negedge rst_ni) begin : proc_multdiv_state_q
		if (!rst_ni) begin
			multdiv_state_q &lt;= 5&#39;h0;
			op_b_shift_q &lt;= 33&#39;h0;
			op_a_shift_q &lt;= 33&#39;h0;
			op_numerator_q &lt;= 32&#39;h0;
			md_state_q &lt;= MD_IDLE;
		end
		else if (~multdiv_hold) begin
			multdiv_state_q &lt;= multdiv_state_d;
			op_b_shift_q &lt;= op_b_shift_d;
			op_a_shift_q &lt;= op_a_shift_d;
			op_numerator_q &lt;= op_numerator_d;
			md_state_q &lt;= md_state_d;
		end
	end
	localparam [2:0] MD_COMP = 3;
	localparam [2:0] MD_FINISH = 6;
	always @(*) begin
		multdiv_state_d = multdiv_state_q;
		accum_window_d = accum_window_q;
		op_b_shift_d = op_b_shift_q;
		op_a_shift_d = op_a_shift_q;
		op_numerator_d = op_numerator_q;
		md_state_d = md_state_q;
		multdiv_hold = 1&#39;b0;
		if (mult_en_i || div_en_i)
			case (md_state_q)
				MD_IDLE: begin
					case (operator_i)
						MD_OP_MULL: begin
							op_a_shift_d = op_a_ext &lt;&lt; 1;
							accum_window_d = {~(op_a_ext[32] &amp; op_b_i[0]), op_a_ext[31:0] &amp; {32 {op_b_i[0]}}};
							op_b_shift_d = op_b_ext &gt;&gt; 1;
							md_state_d = (!(op_b_ext &gt;&gt; 1) ? MD_LAST : MD_COMP);
						end
						MD_OP_MULH: begin
							op_a_shift_d = op_a_ext;
							accum_window_d = {1&#39;b1, ~(op_a_ext[32] &amp; op_b_i[0]), op_a_ext[31:1] &amp; {31 {op_b_i[0]}}};
							op_b_shift_d = op_b_ext &gt;&gt; 1;
							md_state_d = MD_COMP;
						end
						MD_OP_DIV: begin
							accum_window_d = {33 {1&#39;b1}};
							md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
						end
						default: begin
							accum_window_d = op_a_ext;
							md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
						end
					endcase
					multdiv_state_d = 5&#39;d31;
				end
				MD_ABS_A: begin
					op_a_shift_d = &#39;sd0;
					op_numerator_d = (sign_a ? alu_adder_i : op_a_i);
					md_state_d = MD_ABS_B;
				end
				MD_ABS_B: begin
					accum_window_d = {32&#39;h0, op_numerator_q[31]};
					op_b_shift_d = (sign_b ? alu_adder_i : op_b_i);
					md_state_d = MD_COMP;
				end
				MD_COMP: begin
					multdiv_state_d = multdiv_state_m1;
					case (operator_i)
						MD_OP_MULL: begin
							accum_window_d = res_adder_l;
							op_a_shift_d = op_a_shift_q &lt;&lt; 1;
							op_b_shift_d = op_b_shift_q &gt;&gt; 1;
							md_state_d = (!(op_b_shift_q &gt;&gt; 1) ? MD_LAST : MD_COMP);
						end
						MD_OP_MULH: begin
							accum_window_d = res_adder_h;
							op_a_shift_d = op_a_shift_q;
							op_b_shift_d = op_b_shift_q &gt;&gt; 1;
							md_state_d = (multdiv_state_q == 5&#39;d1 ? MD_LAST : MD_COMP);
						end
						default: begin
							accum_window_d = {next_reminder[31:0], op_numerator_q[multdiv_state_m1]};
							op_a_shift_d = next_quotient;
							md_state_d = (multdiv_state_q == 5&#39;d1 ? MD_LAST : MD_COMP);
						end
					endcase
				end
				MD_LAST:
					case (operator_i)
						MD_OP_MULL: begin
							accum_window_d = res_adder_l;
							md_state_d = MD_IDLE;
							multdiv_hold = ~multdiv_ready_id_i;
						end
						MD_OP_MULH: begin
							accum_window_d = res_adder_l;
							md_state_d = MD_IDLE;
							md_state_d = MD_IDLE;
							multdiv_hold = ~multdiv_ready_id_i;
						end
						MD_OP_DIV: begin
							accum_window_d = next_quotient;
							md_state_d = MD_CHANGE_SIGN;
						end
						default: begin
							accum_window_d = {1&#39;b0, next_reminder[31:0]};
							md_state_d = MD_CHANGE_SIGN;
						end
					endcase
				MD_CHANGE_SIGN: begin
					md_state_d = MD_FINISH;
					case (operator_i)
						MD_OP_DIV: accum_window_d = (div_change_sign ? alu_adder_i : accum_window_q);
						default: accum_window_d = (rem_change_sign ? alu_adder_i : accum_window_q);
					endcase
				end
				MD_FINISH: begin
					md_state_d = MD_IDLE;
					multdiv_hold = ~multdiv_ready_id_i;
				end
				default: md_state_d = MD_IDLE;
			endcase
	end
	assign valid_o = (md_state_q == MD_FINISH) | ((md_state_q == MD_LAST) &amp; ((operator_i == MD_OP_MULL) | (operator_i == MD_OP_MULH)));
endmodule
module ibex_multdiv_fast (
	clk_i,
	rst_ni,
	mult_en_i,
	div_en_i,
	operator_i,
	signed_mode_i,
	op_a_i,
	op_b_i,
	alu_adder_ext_i,
	alu_adder_i,
	equal_to_zero,
	alu_operand_a_o,
	alu_operand_b_o,
	imd_val_q_i,
	imd_val_d_o,
	imd_val_we_o,
	multdiv_ready_id_i,
	multdiv_result_o,
	valid_o
);
	parameter [0:0] SingleCycleMultiply = 0;
	input wire clk_i;
	input wire rst_ni;
	input wire mult_en_i;
	input wire div_en_i;
	input wire [1:0] operator_i;
	input wire [1:0] signed_mode_i;
	input wire [31:0] op_a_i;
	input wire [31:0] op_b_i;
	input wire [33:0] alu_adder_ext_i;
	input wire [31:0] alu_adder_i;
	input wire equal_to_zero;
	output reg [32:0] alu_operand_a_o;
	output reg [32:0] alu_operand_b_o;
	input wire [33:0] imd_val_q_i;
	output wire [33:0] imd_val_d_o;
	output wire imd_val_we_o;
	input wire multdiv_ready_id_i;
	output wire [31:0] multdiv_result_o;
	output wire valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire signed [34:0] mac_res_signed;
	wire [34:0] mac_res_ext;
	reg [33:0] accum;
	reg sign_a;
	reg sign_b;
	reg mult_valid;
	wire signed_mult;
	reg [33:0] mac_res_d;
	reg [33:0] op_remainder_d;
	wire [33:0] mac_res;
	wire div_sign_a;
	wire div_sign_b;
	reg is_greater_equal;
	wire div_change_sign;
	wire rem_change_sign;
	wire [31:0] one_shift;
	reg [31:0] op_denominator_q;
	reg [31:0] op_numerator_q;
	reg [31:0] op_quotient_q;
	reg [31:0] op_denominator_d;
	reg [31:0] op_numerator_d;
	reg [31:0] op_quotient_d;
	wire [31:0] next_remainder;
	wire [32:0] next_quotient;
	wire [32:0] res_adder_h;
	reg div_valid;
	reg [4:0] div_counter_q;
	reg [4:0] div_counter_d;
	wire multdiv_en;
	reg mult_hold;
	reg div_hold;
	wire mult_en_internal;
	wire div_en_internal;
	reg [2:0] md_state_q;
	reg [2:0] md_state_d;
	assign mult_en_internal = mult_en_i &amp; ~mult_hold;
	assign div_en_internal = div_en_i &amp; ~div_hold;
	localparam [2:0] MD_IDLE = 0;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			div_counter_q &lt;= &#39;sd0;
			md_state_q &lt;= MD_IDLE;
			op_denominator_q &lt;= &#39;sd0;
			op_numerator_q &lt;= &#39;sd0;
			op_quotient_q &lt;= &#39;sd0;
		end
		else if (div_en_internal) begin
			div_counter_q &lt;= div_counter_d;
			op_denominator_q &lt;= op_denominator_d;
			op_numerator_q &lt;= op_numerator_d;
			op_quotient_q &lt;= op_quotient_d;
			md_state_q &lt;= md_state_d;
		end
	assign multdiv_en = mult_en_internal | div_en_internal;
	assign imd_val_d_o = (div_en_i ? op_remainder_d : mac_res_d);
	assign imd_val_we_o = multdiv_en;
	assign signed_mult = signed_mode_i != 2&#39;b00;
	assign multdiv_result_o = (div_en_i ? imd_val_q_i[31:0] : mac_res_d[31:0]);
	localparam [1:0] AHBH = 3;
	localparam [1:0] AHBL = 2;
	localparam [1:0] ALBH = 1;
	localparam [1:0] ALBL = 0;
	localparam [0:0] MULH = 1;
	localparam [0:0] MULL = 0;
	generate
		if (SingleCycleMultiply) begin : gen_multiv_single_cycle
			reg mult_state_q;
			reg mult_state_d;
			wire signed [33:0] mult1_res;
			wire signed [33:0] mult2_res;
			wire signed [33:0] mult3_res;
			wire [15:0] mult1_op_a;
			wire [15:0] mult1_op_b;
			wire [15:0] mult2_op_a;
			wire [15:0] mult2_op_b;
			reg [15:0] mult3_op_a;
			reg [15:0] mult3_op_b;
			wire mult1_sign_a;
			wire mult1_sign_b;
			wire mult2_sign_a;
			wire mult2_sign_b;
			reg mult3_sign_a;
			reg mult3_sign_b;
			reg [33:0] summand1;
			reg [33:0] summand2;
			reg [33:0] summand3;
			assign mult1_res = $signed({mult1_sign_a, mult1_op_a}) * $signed({mult1_sign_b, mult1_op_b});
			assign mult2_res = $signed({mult2_sign_a, mult2_op_a}) * $signed({mult2_sign_b, mult2_op_b});
			assign mult3_res = $signed({mult3_sign_a, mult3_op_a}) * $signed({mult3_sign_b, mult3_op_b});
			assign mac_res_signed = ($signed(summand1) + $signed(summand2)) + $signed(summand3);
			assign mac_res_ext = $unsigned(mac_res_signed);
			assign mac_res = mac_res_ext[33:0];
			always @(*) sign_a = signed_mode_i[0] &amp; op_a_i[31];
			always @(*) sign_b = signed_mode_i[1] &amp; op_b_i[31];
			assign mult1_sign_a = 1&#39;b0;
			assign mult1_sign_b = 1&#39;b0;
			assign mult1_op_a = op_a_i[15:0];
			assign mult1_op_b = op_b_i[15:0];
			assign mult2_sign_a = 1&#39;b0;
			assign mult2_sign_b = sign_b;
			assign mult2_op_a = op_a_i[15:0];
			assign mult2_op_b = op_b_i[31:16];
			always @(*) accum[17:0] = imd_val_q_i[33:16];
			always @(*) accum[33:18] = {16 {signed_mult &amp; imd_val_q_i[33]}};
			always @(*) begin
				mult3_sign_a = sign_a;
				mult3_sign_b = 1&#39;b0;
				mult3_op_a = op_a_i[31:16];
				mult3_op_b = op_b_i[15:0];
				summand1 = {18&#39;h0, mult1_res[31:16]};
				summand2 = mult2_res;
				summand3 = mult3_res;
				mac_res_d = {2&#39;b0, mac_res[15:0], mult1_res[15:0]};
				mult_valid = mult_en_i;
				mult_state_d = MULL;
				mult_hold = 1&#39;b0;
				case (mult_state_q)
					MULL:
						if (operator_i != MD_OP_MULL) begin
							mac_res_d = mac_res;
							mult_valid = 1&#39;b0;
							mult_state_d = MULH;
						end
						else
							mult_hold = ~multdiv_ready_id_i;
					MULH: begin
						mult3_sign_a = sign_a;
						mult3_sign_b = sign_b;
						mult3_op_a = op_a_i[31:16];
						mult3_op_b = op_b_i[31:16];
						mac_res_d = mac_res;
						summand1 = &#39;sd0;
						summand2 = accum;
						summand3 = mult3_res;
						mult_state_d = MULL;
						mult_valid = 1&#39;b1;
						mult_hold = ~multdiv_ready_id_i;
					end
					default: mult_state_d = MULL;
				endcase
			end
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					mult_state_q &lt;= MULL;
				else if (mult_en_i)
					mult_state_q &lt;= mult_state_d;
		end
		else begin : gen_multdiv_fast
			reg [15:0] mult_op_a;
			reg [15:0] mult_op_b;
			reg [1:0] mult_state_q;
			reg [1:0] mult_state_d;
			assign mac_res_signed = ($signed({sign_a, mult_op_a}) * $signed({sign_b, mult_op_b})) + $signed(accum);
			assign mac_res_ext = $unsigned(mac_res_signed);
			assign mac_res = mac_res_ext[33:0];
			always @(*) begin
				mult_op_a = op_a_i[15:0];
				mult_op_b = op_b_i[15:0];
				sign_a = 1&#39;b0;
				sign_b = 1&#39;b0;
				accum = imd_val_q_i;
				mac_res_d = mac_res;
				mult_state_d = mult_state_q;
				mult_valid = 1&#39;b0;
				mult_hold = 1&#39;b0;
				case (mult_state_q)
					ALBL: begin
						mult_op_a = op_a_i[15:0];
						mult_op_b = op_b_i[15:0];
						sign_a = 1&#39;b0;
						sign_b = 1&#39;b0;
						accum = &#39;sd0;
						mac_res_d = mac_res;
						mult_state_d = ALBH;
					end
					ALBH: begin
						mult_op_a = op_a_i[15:0];
						mult_op_b = op_b_i[31:16];
						sign_a = 1&#39;b0;
						sign_b = signed_mode_i[1] &amp; op_b_i[31];
						accum = {18&#39;b0, imd_val_q_i[31:16]};
						if (operator_i == MD_OP_MULL)
							mac_res_d = {2&#39;b0, mac_res[15:0], imd_val_q_i[15:0]};
						else
							mac_res_d = mac_res;
						mult_state_d = AHBL;
					end
					AHBL: begin
						mult_op_a = op_a_i[31:16];
						mult_op_b = op_b_i[15:0];
						sign_a = signed_mode_i[0] &amp; op_a_i[31];
						sign_b = 1&#39;b0;
						if (operator_i == MD_OP_MULL) begin
							accum = {18&#39;b0, imd_val_q_i[31:16]};
							mac_res_d = {2&#39;b0, mac_res[15:0], imd_val_q_i[15:0]};
							mult_valid = 1&#39;b1;
							mult_state_d = ALBL;
							mult_hold = ~multdiv_ready_id_i;
						end
						else begin
							accum = imd_val_q_i;
							mac_res_d = mac_res;
							mult_state_d = AHBH;
						end
					end
					AHBH: begin
						mult_op_a = op_a_i[31:16];
						mult_op_b = op_b_i[31:16];
						sign_a = signed_mode_i[0] &amp; op_a_i[31];
						sign_b = signed_mode_i[1] &amp; op_b_i[31];
						accum[17:0] = imd_val_q_i[33:16];
						accum[33:18] = {16 {signed_mult &amp; imd_val_q_i[33]}};
						mac_res_d = mac_res;
						mult_valid = 1&#39;b1;
						mult_state_d = ALBL;
						mult_hold = ~multdiv_ready_id_i;
					end
					default: mult_state_d = ALBL;
				endcase
			end
			always @(posedge clk_i or negedge rst_ni)
				if (!rst_ni)
					mult_state_q &lt;= ALBL;
				else if (mult_en_internal)
					mult_state_q &lt;= mult_state_d;
		end
	endgenerate
	assign res_adder_h = alu_adder_ext_i[33:1];
	assign next_remainder = (is_greater_equal ? res_adder_h[31:0] : imd_val_q_i[31:0]);
	assign next_quotient = (is_greater_equal ? {1&#39;b0, op_quotient_q} | {1&#39;b0, one_shift} : {1&#39;b0, op_quotient_q});
	assign one_shift = {31&#39;b0, 1&#39;b1} &lt;&lt; div_counter_q;
	always @(*)
		if ((imd_val_q_i[31] ^ op_denominator_q[31]) == 1&#39;b0)
			is_greater_equal = res_adder_h[31] == 1&#39;b0;
		else
			is_greater_equal = imd_val_q_i[31];
	assign div_sign_a = op_a_i[31] &amp; signed_mode_i[0];
	assign div_sign_b = op_b_i[31] &amp; signed_mode_i[1];
	assign div_change_sign = div_sign_a ^ div_sign_b;
	assign rem_change_sign = div_sign_a;
	localparam [2:0] MD_ABS_A = 1;
	localparam [2:0] MD_ABS_B = 2;
	localparam [2:0] MD_CHANGE_SIGN = 5;
	localparam [2:0] MD_COMP = 3;
	localparam [2:0] MD_FINISH = 6;
	localparam [2:0] MD_LAST = 4;
	always @(*) begin
		div_counter_d = div_counter_q - 5&#39;h1;
		op_remainder_d = imd_val_q_i;
		op_quotient_d = op_quotient_q;
		md_state_d = md_state_q;
		op_numerator_d = op_numerator_q;
		op_denominator_d = op_denominator_q;
		alu_operand_a_o = {32&#39;h0, 1&#39;b1};
		alu_operand_b_o = {~op_b_i, 1&#39;b1};
		div_valid = 1&#39;b0;
		div_hold = 1&#39;b0;
		case (md_state_q)
			MD_IDLE: begin
				if (operator_i == MD_OP_DIV) begin
					op_remainder_d = -&#39;sd1;
					md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
				end
				else begin
					op_remainder_d = {2&#39;b0, op_a_i};
					md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
				end
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
				div_counter_d = 5&#39;d31;
			end
			MD_ABS_A: begin
				op_quotient_d = &#39;sd0;
				op_numerator_d = (div_sign_a ? alu_adder_i : op_a_i);
				md_state_d = MD_ABS_B;
				div_counter_d = 5&#39;d31;
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_a_i, 1&#39;b1};
			end
			MD_ABS_B: begin
				op_remainder_d = {33&#39;h0, op_numerator_q[31]};
				op_denominator_d = (div_sign_b ? alu_adder_i : op_b_i);
				md_state_d = MD_COMP;
				div_counter_d = 5&#39;d31;
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
			end
			MD_COMP: begin
				op_remainder_d = {1&#39;b0, next_remainder[31:0], op_numerator_q[div_counter_d]};
				op_quotient_d = next_quotient[31:0];
				md_state_d = (div_counter_q == 5&#39;d1 ? MD_LAST : MD_COMP);
				alu_operand_a_o = {imd_val_q_i[31:0], 1&#39;b1};
				alu_operand_b_o = {~op_denominator_q[31:0], 1&#39;b1};
			end
			MD_LAST: begin
				if (operator_i == MD_OP_DIV)
					op_remainder_d = {1&#39;b0, next_quotient};
				else
					op_remainder_d = {2&#39;b0, next_remainder[31:0]};
				alu_operand_a_o = {imd_val_q_i[31:0], 1&#39;b1};
				alu_operand_b_o = {~op_denominator_q[31:0], 1&#39;b1};
				md_state_d = MD_CHANGE_SIGN;
			end
			MD_CHANGE_SIGN: begin
				md_state_d = MD_FINISH;
				if (operator_i == MD_OP_DIV)
					op_remainder_d = (div_change_sign ? {2&#39;h0, alu_adder_i} : imd_val_q_i);
				else
					op_remainder_d = (rem_change_sign ? {2&#39;h0, alu_adder_i} : imd_val_q_i);
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~imd_val_q_i[31:0], 1&#39;b1};
			end
			MD_FINISH: begin
				md_state_d = MD_IDLE;
				div_hold = ~multdiv_ready_id_i;
				div_valid = 1&#39;b1;
			end
			default: md_state_d = MD_IDLE;
		endcase
	end
	assign valid_o = mult_valid | div_valid;
endmodule
module ibex_prefetch_buffer (
	clk_i,
	rst_ni,
	req_i,
	branch_i,
	addr_i,
	ready_i,
	valid_o,
	rdata_o,
	addr_o,
	err_o,
	err_plus2_o,
	instr_req_o,
	instr_gnt_i,
	instr_addr_o,
	instr_rdata_i,
	instr_err_i,
	instr_pmp_err_i,
	instr_rvalid_i,
	busy_o
);
	input wire clk_i;
	input wire rst_ni;
	input wire req_i;
	input wire branch_i;
	input wire [31:0] addr_i;
	input wire ready_i;
	output wire valid_o;
	output wire [31:0] rdata_o;
	output wire [31:0] addr_o;
	output wire err_o;
	output wire err_plus2_o;
	output wire instr_req_o;
	input wire instr_gnt_i;
	output wire [31:0] instr_addr_o;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	input wire instr_pmp_err_i;
	input wire instr_rvalid_i;
	output wire busy_o;
	localparam [31:0] NUM_REQS = 2;
	wire valid_new_req;
	wire valid_req;
	wire valid_req_d;
	reg valid_req_q;
	wire discard_req_d;
	reg discard_req_q;
	wire gnt_or_pmp_err;
	wire rvalid_or_pmp_err;
	wire [NUM_REQS - 1:0] rdata_outstanding_n;
	wire [NUM_REQS - 1:0] rdata_outstanding_s;
	reg [NUM_REQS - 1:0] rdata_outstanding_q;
	wire [NUM_REQS - 1:0] branch_discard_n;
	wire [NUM_REQS - 1:0] branch_discard_s;
	reg [NUM_REQS - 1:0] branch_discard_q;
	wire [NUM_REQS - 1:0] rdata_pmp_err_n;
	wire [NUM_REQS - 1:0] rdata_pmp_err_s;
	reg [NUM_REQS - 1:0] rdata_pmp_err_q;
	wire [31:0] stored_addr_d;
	reg [31:0] stored_addr_q;
	wire stored_addr_en;
	wire [31:0] fetch_addr_d;
	reg [31:0] fetch_addr_q;
	wire fetch_addr_en;
	wire [31:0] instr_addr;
	wire [31:0] instr_addr_w_aligned;
	wire instr_or_pmp_err;
	wire fifo_valid;
	wire fifo_ready;
	wire fifo_clear;
	assign busy_o = |rdata_outstanding_q | instr_req_o;
	assign instr_or_pmp_err = instr_err_i | rdata_pmp_err_q[0];
	assign fifo_clear = branch_i;
	ibex_fetch_fifo #(.NUM_REQS(NUM_REQS)) fifo_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.clear_i(fifo_clear),
		.in_valid_i(fifo_valid),
		.in_addr_i(addr_i),
		.in_rdata_i(instr_rdata_i),
		.in_err_i(instr_or_pmp_err),
		.in_ready_o(fifo_ready),
		.out_valid_o(valid_o),
		.out_ready_i(ready_i),
		.out_rdata_o(rdata_o),
		.out_addr_o(addr_o),
		.out_err_o(err_o),
		.out_err_plus2_o(err_plus2_o)
	);
	assign valid_new_req = (req_i &amp; (fifo_ready | branch_i)) &amp; ~rdata_outstanding_q[NUM_REQS - 1];
	assign valid_req = valid_req_q | valid_new_req;
	assign gnt_or_pmp_err = instr_gnt_i | instr_pmp_err_i;
	assign rvalid_or_pmp_err = rdata_outstanding_q[0] &amp; (instr_rvalid_i | rdata_pmp_err_q[0]);
	assign valid_req_d = valid_req &amp; ~gnt_or_pmp_err;
	assign discard_req_d = valid_req_q &amp; (branch_i | discard_req_q);
	assign stored_addr_en = (valid_new_req &amp; ~valid_req_q) &amp; ~gnt_or_pmp_err;
	assign stored_addr_d = instr_addr;
	always @(posedge clk_i)
		if (stored_addr_en)
			stored_addr_q &lt;= stored_addr_d;
	assign fetch_addr_en = branch_i | (valid_new_req &amp; ~valid_req_q);
	assign fetch_addr_d = (branch_i ? addr_i : {fetch_addr_q[31:2], 2&#39;b00}) + {{29 {1&#39;b0}}, valid_new_req &amp; ~valid_req_q, 2&#39;b00};
	always @(posedge clk_i)
		if (fetch_addr_en)
			fetch_addr_q &lt;= fetch_addr_d;
	assign instr_addr = (valid_req_q ? stored_addr_q : (branch_i ? addr_i : fetch_addr_q));
	assign instr_addr_w_aligned = {instr_addr[31:2], 2&#39;b00};
	generate
		genvar i;
		for (i = 0; i &lt; NUM_REQS; i = i + 1) begin : g_outstanding_reqs
			if (i == 0) begin : g_req0
				assign rdata_outstanding_n[i] = (valid_req &amp; gnt_or_pmp_err) | rdata_outstanding_q[i];
				assign branch_discard_n[i] = (((valid_req &amp; gnt_or_pmp_err) &amp; discard_req_d) | (branch_i &amp; rdata_outstanding_q[i])) | branch_discard_q[i];
				assign rdata_pmp_err_n[i] = ((valid_req &amp; ~rdata_outstanding_q[i]) &amp; instr_pmp_err_i) | rdata_pmp_err_q[i];
			end
			else begin : g_reqtop
				assign rdata_outstanding_n[i] = ((valid_req &amp; gnt_or_pmp_err) &amp; rdata_outstanding_q[i - 1]) | rdata_outstanding_q[i];
				assign branch_discard_n[i] = ((((valid_req &amp; gnt_or_pmp_err) &amp; discard_req_d) &amp; rdata_outstanding_q[i - 1]) | (branch_i &amp; rdata_outstanding_q[i])) | branch_discard_q[i];
				assign rdata_pmp_err_n[i] = (((valid_req &amp; ~rdata_outstanding_q[i]) &amp; instr_pmp_err_i) &amp; rdata_outstanding_q[i - 1]) | rdata_pmp_err_q[i];
			end
		end
	endgenerate
	assign rdata_outstanding_s = (rvalid_or_pmp_err ? {1&#39;b0, rdata_outstanding_n[NUM_REQS - 1:1]} : rdata_outstanding_n);
	assign branch_discard_s = (rvalid_or_pmp_err ? {1&#39;b0, branch_discard_n[NUM_REQS - 1:1]} : branch_discard_n);
	assign rdata_pmp_err_s = (rvalid_or_pmp_err ? {1&#39;b0, rdata_pmp_err_n[NUM_REQS - 1:1]} : rdata_pmp_err_n);
	assign fifo_valid = rvalid_or_pmp_err &amp; ~branch_discard_q[0];
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			valid_req_q &lt;= 1&#39;b0;
			discard_req_q &lt;= 1&#39;b0;
			rdata_outstanding_q &lt;= &#39;b0;
			branch_discard_q &lt;= &#39;b0;
			rdata_pmp_err_q &lt;= &#39;b0;
		end
		else begin
			valid_req_q &lt;= valid_req_d;
			discard_req_q &lt;= discard_req_d;
			rdata_outstanding_q &lt;= rdata_outstanding_s;
			branch_discard_q &lt;= branch_discard_s;
			rdata_pmp_err_q &lt;= rdata_pmp_err_s;
		end
	assign instr_req_o = valid_req;
	assign instr_addr_o = instr_addr_w_aligned;
endmodule
module ibex_fetch_fifo (
	clk_i,
	rst_ni,
	clear_i,
	in_valid_i,
	in_ready_o,
	in_addr_i,
	in_rdata_i,
	in_err_i,
	out_valid_o,
	out_ready_i,
	out_addr_o,
	out_rdata_o,
	out_err_o,
	out_err_plus2_o
);
	parameter [31:0] NUM_REQS = 2;
	input wire clk_i;
	input wire rst_ni;
	input wire clear_i;
	input wire in_valid_i;
	output wire in_ready_o;
	input wire [31:0] in_addr_i;
	input wire [31:0] in_rdata_i;
	input wire in_err_i;
	output reg out_valid_o;
	input wire out_ready_i;
	output wire [31:0] out_addr_o;
	output reg [31:0] out_rdata_o;
	output reg out_err_o;
	output reg out_err_plus2_o;
	localparam [31:0] DEPTH = NUM_REQS + 1;
	wire [(DEPTH &gt;= 1 ? (DEPTH * 32) + -1 : ((2 - DEPTH) * 32) + (((DEPTH - 1) * 32) - 1)):(DEPTH &gt;= 1 ? 0 : (DEPTH - 1) * 32)] rdata_d;
	reg [(DEPTH &gt;= 1 ? (DEPTH * 32) + -1 : ((2 - DEPTH) * 32) + (((DEPTH - 1) * 32) - 1)):(DEPTH &gt;= 1 ? 0 : (DEPTH - 1) * 32)] rdata_q;
	wire [DEPTH - 1:0] err_d;
	reg [DEPTH - 1:0] err_q;
	wire [DEPTH - 1:0] valid_d;
	reg [DEPTH - 1:0] valid_q;
	wire [DEPTH - 1:0] lowest_free_entry;
	wire [DEPTH - 1:0] valid_pushed;
	wire [DEPTH - 1:0] valid_popped;
	wire [DEPTH - 1:0] entry_en;
	wire pop_fifo;
	wire [31:0] rdata;
	wire [31:0] rdata_unaligned;
	wire err;
	wire err_unaligned;
	wire err_plus2;
	wire valid;
	wire valid_unaligned;
	wire aligned_is_compressed;
	wire unaligned_is_compressed;
	wire addr_incr_two;
	wire [31:1] instr_addr_d;
	reg [31:1] instr_addr_q;
	wire instr_addr_en;
	wire unused_addr_in;
	assign rdata = (valid_q[0] ? rdata_q[(DEPTH &gt;= 1 ? 0 : DEPTH - 1) * 32+:32] : in_rdata_i);
	assign err = (valid_q[0] ? err_q[0] : in_err_i);
	assign valid = valid_q[0] | in_valid_i;
	assign rdata_unaligned = (valid_q[1] ? {rdata_q[((DEPTH &gt;= 1 ? 1 : -1 + (DEPTH - 1)) * 32) + 15-:16], rdata[31:16]} : {in_rdata_i[15:0], rdata[31:16]});
	assign err_unaligned = (valid_q[1] ? (err_q[1] &amp; ~unaligned_is_compressed) | err_q[0] : (valid_q[0] &amp; err_q[0]) | (in_err_i &amp; (~valid_q[0] | ~unaligned_is_compressed)));
	assign err_plus2 = (valid_q[1] ? err_q[1] &amp; ~err_q[0] : (in_err_i &amp; valid_q[0]) &amp; ~err_q[0]);
	assign valid_unaligned = (valid_q[1] ? 1&#39;b1 : valid_q[0] &amp; in_valid_i);
	assign unaligned_is_compressed = rdata[17:16] != 2&#39;b11;
	assign aligned_is_compressed = rdata[1:0] != 2&#39;b11;
	always @(*)
		if (out_addr_o[1]) begin
			out_rdata_o = rdata_unaligned;
			out_err_o = err_unaligned;
			out_err_plus2_o = err_plus2;
			if (unaligned_is_compressed)
				out_valid_o = valid;
			else
				out_valid_o = valid_unaligned;
		end
		else begin
			out_rdata_o = rdata;
			out_err_o = err;
			out_err_plus2_o = 1&#39;b0;
			out_valid_o = valid;
		end
	assign instr_addr_en = clear_i | (out_ready_i &amp; out_valid_o);
	assign addr_incr_two = (instr_addr_q[1] ? unaligned_is_compressed : aligned_is_compressed);
	assign instr_addr_d = (clear_i ? in_addr_i[31:1] : instr_addr_q[31:1] + {29&#39;d0, ~addr_incr_two, addr_incr_two});
	always @(posedge clk_i)
		if (instr_addr_en)
			instr_addr_q &lt;= instr_addr_d;
	assign out_addr_o[31:1] = instr_addr_q[31:1];
	assign out_addr_o[0] = 1&#39;b0;
	assign unused_addr_in = in_addr_i[0];
	assign in_ready_o = ~valid_q[DEPTH - NUM_REQS];
	assign pop_fifo = (out_ready_i &amp; out_valid_o) &amp; (~aligned_is_compressed | out_addr_o[1]);
	generate
		genvar i;
		for (i = 0; i &lt; (DEPTH - 1); i = i + 1) begin : g_fifo_next
			if (i == 0) begin : g_ent0
				assign lowest_free_entry[i] = ~valid_q[i];
			end
			else begin : g_ent_others
				assign lowest_free_entry[i] = ~valid_q[i] &amp; valid_q[i - 1];
			end
			assign valid_pushed[i] = (in_valid_i &amp; lowest_free_entry[i]) | valid_q[i];
			assign valid_popped[i] = (pop_fifo ? valid_pushed[i + 1] : valid_pushed[i]);
			assign valid_d[i] = valid_popped[i] &amp; ~clear_i;
			assign entry_en[i] = (valid_pushed[i + 1] &amp; pop_fifo) | ((in_valid_i &amp; lowest_free_entry[i]) &amp; ~pop_fifo);
			assign rdata_d[(DEPTH &gt;= 1 ? i : 0 - (i - (DEPTH - 1))) * 32+:32] = (valid_q[i + 1] ? rdata_q[(DEPTH &gt;= 1 ? i + 1 : 0 - ((i + 1) - (DEPTH - 1))) * 32+:32] : in_rdata_i);
			assign err_d[i] = (valid_q[i + 1] ? err_q[i + 1] : in_err_i);
		end
	endgenerate
	assign lowest_free_entry[DEPTH - 1] = ~valid_q[DEPTH - 1] &amp; valid_q[DEPTH - 2];
	assign valid_pushed[DEPTH - 1] = valid_q[DEPTH - 1] | (in_valid_i &amp; lowest_free_entry[DEPTH - 1]);
	assign valid_popped[DEPTH - 1] = (pop_fifo ? 1&#39;b0 : valid_pushed[DEPTH - 1]);
	assign valid_d[DEPTH - 1] = valid_popped[DEPTH - 1] &amp; ~clear_i;
	assign entry_en[DEPTH - 1] = in_valid_i &amp; lowest_free_entry[DEPTH - 1];
	assign rdata_d[(DEPTH &gt;= 1 ? DEPTH - 1 : 0 - ((DEPTH - 1) - (DEPTH - 1))) * 32+:32] = in_rdata_i;
	assign err_d[DEPTH - 1] = in_err_i;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			valid_q &lt;= &#39;sd0;
		else
			valid_q &lt;= valid_d;
	generate
		for (i = 0; i &lt; DEPTH; i = i + 1) begin : g_fifo_regs
			always @(posedge clk_i)
				if (entry_en[i]) begin
					rdata_q[(DEPTH &gt;= 1 ? i : 0 - (i - (DEPTH - 1))) * 32+:32] &lt;= rdata_d[(DEPTH &gt;= 1 ? i : 0 - (i - (DEPTH - 1))) * 32+:32];
					err_q[i] &lt;= err_d[i];
				end
		end
	endgenerate
endmodule
module ibex_pmp (
	clk_i,
	rst_ni,
	csr_pmp_cfg_i,
	csr_pmp_addr_i,
	priv_mode_i,
	pmp_req_addr_i,
	pmp_req_type_i,
	pmp_req_err_o
);
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumChan = 2;
	parameter [31:0] PMPNumRegions = 4;
	input wire clk_i;
	input wire rst_ni;
	input wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1) : (PMPNumRegions * 6) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 6 : 0)] csr_pmp_cfg_i;
	input wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1) : (PMPNumRegions * 34) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 34 : 0)] csr_pmp_addr_i;
	input wire [(0 &gt;= (PMPNumChan - 1) ? ((2 - PMPNumChan) * 2) + (((PMPNumChan - 1) * 2) - 1) : (PMPNumChan * 2) + -1):(0 &gt;= (PMPNumChan - 1) ? (PMPNumChan - 1) * 2 : 0)] priv_mode_i;
	input wire [(0 &gt;= (PMPNumChan - 1) ? ((2 - PMPNumChan) * 34) + (((PMPNumChan - 1) * 34) - 1) : (PMPNumChan * 34) + -1):(0 &gt;= (PMPNumChan - 1) ? (PMPNumChan - 1) * 34 : 0)] pmp_req_addr_i;
	input wire [(0 &gt;= (PMPNumChan - 1) ? ((2 - PMPNumChan) * 2) + (((PMPNumChan - 1) * 2) - 1) : (PMPNumChan * 2) + -1):(0 &gt;= (PMPNumChan - 1) ? (PMPNumChan - 1) * 2 : 0)] pmp_req_type_i;
	output wire [0:PMPNumChan - 1] pmp_req_err_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	wire [33:0] region_start_addr [0:PMPNumRegions - 1];
	wire [33:PMPGranularity + 2] region_addr_mask [0:PMPNumRegions - 1];
	wire [(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? (PMPNumChan * PMPNumRegions) + -1 : (PMPNumChan * (2 - PMPNumRegions)) + ((PMPNumRegions - 1) - 1)) : (PMPNumRegions &gt;= 1 ? ((2 - PMPNumChan) * PMPNumRegions) + (((PMPNumChan - 1) * PMPNumRegions) - 1) : ((2 - PMPNumChan) * (2 - PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))) - 1))):(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? 0 : PMPNumRegions - 1) : (PMPNumRegions &gt;= 1 ? (PMPNumChan - 1) * PMPNumRegions : (PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))))] region_match_high;
	wire [(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? (PMPNumChan * PMPNumRegions) + -1 : (PMPNumChan * (2 - PMPNumRegions)) + ((PMPNumRegions - 1) - 1)) : (PMPNumRegions &gt;= 1 ? ((2 - PMPNumChan) * PMPNumRegions) + (((PMPNumChan - 1) * PMPNumRegions) - 1) : ((2 - PMPNumChan) * (2 - PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))) - 1))):(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? 0 : PMPNumRegions - 1) : (PMPNumRegions &gt;= 1 ? (PMPNumChan - 1) * PMPNumRegions : (PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))))] region_match_low;
	wire [(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? (PMPNumChan * PMPNumRegions) + -1 : (PMPNumChan * (2 - PMPNumRegions)) + ((PMPNumRegions - 1) - 1)) : (PMPNumRegions &gt;= 1 ? ((2 - PMPNumChan) * PMPNumRegions) + (((PMPNumChan - 1) * PMPNumRegions) - 1) : ((2 - PMPNumChan) * (2 - PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))) - 1))):(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? 0 : PMPNumRegions - 1) : (PMPNumRegions &gt;= 1 ? (PMPNumChan - 1) * PMPNumRegions : (PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))))] region_match_both;
	wire [(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? (PMPNumChan * PMPNumRegions) + -1 : (PMPNumChan * (2 - PMPNumRegions)) + ((PMPNumRegions - 1) - 1)) : (PMPNumRegions &gt;= 1 ? ((2 - PMPNumChan) * PMPNumRegions) + (((PMPNumChan - 1) * PMPNumRegions) - 1) : ((2 - PMPNumChan) * (2 - PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))) - 1))):(PMPNumChan &gt;= 1 ? (PMPNumRegions &gt;= 1 ? 0 : PMPNumRegions - 1) : (PMPNumRegions &gt;= 1 ? (PMPNumChan - 1) * PMPNumRegions : (PMPNumRegions - 1) + ((PMPNumChan - 1) * (2 - PMPNumRegions))))] region_perm_check;
	reg [PMPNumChan - 1:0] access_fault;
	generate
		genvar b;
		genvar r;
		for (r = 0; r &lt; PMPNumRegions; r = r + 1) begin : g_addr_exp
			if (r == 0) begin : g_entry0
				assign region_start_addr[r] = (csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 4-:2] == PMP_MODE_TOR ? 34&#39;h000000000 : csr_pmp_addr_i[(0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 34+:34]);
			end
			else begin : g_oth
				assign region_start_addr[r] = (csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 4-:2] == PMP_MODE_TOR ? csr_pmp_addr_i[(0 &gt;= (PMPNumRegions - 1) ? r - 1 : (PMPNumRegions - 1) - (r - 1)) * 34+:34] : csr_pmp_addr_i[(0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 34+:34]);
			end
			for (b = PMPGranularity + 2; b &lt; 34; b = b + 1) begin : g_bitmask
				if (b == (PMPGranularity + 2)) begin : g_bit0
					assign region_addr_mask[r][b] = csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 4-:2] != PMP_MODE_NAPOT;
				end
				else begin : g_others
					assign region_addr_mask[r][b] = (csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 4-:2] != PMP_MODE_NAPOT) | ~&amp;csr_pmp_addr_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 34) + ((b - 1) &gt;= (PMPGranularity + 2) ? b - 1 : ((b - 1) + ((b - 1) &gt;= (PMPGranularity + 2) ? ((b - 1) - (PMPGranularity + 2)) + 1 : ((PMPGranularity + 2) - (b - 1)) + 1)) - 1)-:((b - 1) &gt;= (PMPGranularity + 2) ? ((b - 1) - (PMPGranularity + 2)) + 1 : ((PMPGranularity + 2) - (b - 1)) + 1)];
				end
			end
		end
	endgenerate
	generate
		genvar c;
		for (c = 0; c &lt; PMPNumChan; c = c + 1) begin : g_access_check
			for (r = 0; r &lt; PMPNumRegions; r = r + 1) begin : g_regions
				assign region_match_low[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] = pmp_req_addr_i[((0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 34) + (33 &gt;= (PMPGranularity + 2) ? 33 : (33 + (33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)) - 1)-:(33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)] &gt;= (region_start_addr[r][33:PMPGranularity + 2] &amp; region_addr_mask[r]);
				assign region_match_high[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] = pmp_req_addr_i[((0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 34) + (33 &gt;= (PMPGranularity + 2) ? 33 : (33 + (33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)) - 1)-:(33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)] &lt;= csr_pmp_addr_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 34) + (33 &gt;= (PMPGranularity + 2) ? 33 : (33 + (33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)) - 1)-:(33 &gt;= (PMPGranularity + 2) ? 34 - (PMPGranularity + 2) : PMPGranularity + -30)];
				assign region_match_both[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] = (region_match_low[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] &amp; region_match_high[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))]) &amp; (csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 4-:2] != PMP_MODE_OFF);
				assign region_perm_check[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] = (((pmp_req_type_i[(0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 2+:2] == PMP_ACC_EXEC) &amp; csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 2]) | ((pmp_req_type_i[(0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 2+:2] == PMP_ACC_WRITE) &amp; csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 1])) | ((pmp_req_type_i[(0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 2+:2] == PMP_ACC_READ) &amp; csr_pmp_cfg_i[(0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6]);
			end
			always @(*) begin
				access_fault[c] = priv_mode_i[(0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 2+:2] != PRIV_LVL_M;
				begin : sv2v_autoblock_29
					reg signed [31:0] r;
					for (r = PMPNumRegions - 1; r &gt;= 0; r = r - 1)
						if (region_match_both[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))])
							access_fault[c] = (priv_mode_i[(0 &gt;= (PMPNumChan - 1) ? c : (PMPNumChan - 1) - c) * 2+:2] == PRIV_LVL_M ? csr_pmp_cfg_i[((0 &gt;= (PMPNumRegions - 1) ? r : (PMPNumRegions - 1) - r) * 6) + 5] &amp; ~region_perm_check[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))] : ~region_perm_check[((PMPNumChan &gt;= 1 ? c : 0 - (c - (PMPNumChan - 1))) * (PMPNumRegions &gt;= 1 ? PMPNumRegions : 2 - PMPNumRegions)) + (PMPNumRegions &gt;= 1 ? r : 0 - (r - (PMPNumRegions - 1)))]);
				end
			end
			assign pmp_req_err_o[c] = access_fault[c];
		end
	endgenerate
endmodule
module ibex_core (
	clk_i,
	rst_ni,
	test_en_i,
	hart_id_i,
	boot_addr_i,
	instr_req_o,
	instr_gnt_i,
	instr_rvalid_i,
	instr_addr_o,
	instr_rdata_i,
	instr_err_i,
	data_req_o,
	data_gnt_i,
	data_rvalid_i,
	data_we_o,
	data_be_o,
	data_addr_o,
	data_wdata_o,
	data_rdata_i,
	data_err_i,
	irq_software_i,
	irq_timer_i,
	irq_external_i,
	irq_fast_i,
	irq_nm_i,
	debug_req_i,
	fetch_enable_i,
	core_sleep_o
);
	parameter [0:0] PMPEnable = 1&#39;b0;
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumRegions = 4;
	parameter [31:0] MHPMCounterNum = 0;
	parameter [31:0] MHPMCounterWidth = 40;
	parameter [0:0] RV32E = 1&#39;b0;
	parameter [0:0] RV32M = 1&#39;b1;
	parameter [0:0] RV32B = 1&#39;b0;
	parameter [0:0] BranchTargetALU = 1&#39;b0;
	parameter [0:0] WritebackStage = 1&#39;b0;
	parameter MultiplierImplementation = &#34;fast&#34;;
	parameter [0:0] ICache = 1&#39;b0;
	parameter [0:0] ICacheECC = 1&#39;b0;
	parameter [0:0] DbgTriggerEn = 1&#39;b0;
	parameter [0:0] SecureIbex = 1&#39;b0;
	parameter [31:0] DmHaltAddr = 32&#39;h1A110800;
	parameter [31:0] DmExceptionAddr = 32&#39;h1A110808;
	input wire clk_i;
	input wire rst_ni;
	input wire test_en_i;
	input wire [31:0] hart_id_i;
	input wire [31:0] boot_addr_i;
	output wire instr_req_o;
	input wire instr_gnt_i;
	input wire instr_rvalid_i;
	output wire [31:0] instr_addr_o;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	output wire data_req_o;
	input wire data_gnt_i;
	input wire data_rvalid_i;
	output wire data_we_o;
	output wire [3:0] data_be_o;
	output wire [31:0] data_addr_o;
	output wire [31:0] data_wdata_o;
	input wire [31:0] data_rdata_i;
	input wire data_err_i;
	input wire irq_software_i;
	input wire irq_timer_i;
	input wire irq_external_i;
	input wire [14:0] irq_fast_i;
	input wire irq_nm_i;
	input wire debug_req_i;
	input wire fetch_enable_i;
	output wire core_sleep_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSTATUS_MPRV_BIT = 17;
	parameter [31:0] CSR_MSTATUS_TW_BIT = 21;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [0:0] OP_B_IMM = 1;
	localparam [0:0] RF_WD_EX = 0;
	localparam [0:0] RF_WD_CSR = 1;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] OP_A_IMM = 3;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] WB_INSTR_LOAD = 0;
	localparam [1:0] WB_INSTR_STORE = 1;
	localparam [1:0] WB_INSTR_OTHER = 2;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_TSELECT = 12&#39;h7A0;
	localparam [11:0] CSR_TDATA1 = 12&#39;h7A1;
	localparam [11:0] CSR_TDATA2 = 12&#39;h7A2;
	localparam [11:0] CSR_TDATA3 = 12&#39;h7A3;
	localparam [11:0] CSR_MCONTEXT = 12&#39;h7A8;
	localparam [11:0] CSR_SCONTEXT = 12&#39;h7AA;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MHPMEVENT3 = 12&#39;h323;
	localparam [11:0] CSR_MHPMEVENT4 = 12&#39;h324;
	localparam [11:0] CSR_MHPMEVENT5 = 12&#39;h325;
	localparam [11:0] CSR_MHPMEVENT6 = 12&#39;h326;
	localparam [11:0] CSR_MHPMEVENT7 = 12&#39;h327;
	localparam [11:0] CSR_MHPMEVENT8 = 12&#39;h328;
	localparam [11:0] CSR_MHPMEVENT9 = 12&#39;h329;
	localparam [11:0] CSR_MHPMEVENT10 = 12&#39;h32A;
	localparam [11:0] CSR_MHPMEVENT11 = 12&#39;h32B;
	localparam [11:0] CSR_MHPMEVENT12 = 12&#39;h32C;
	localparam [11:0] CSR_MHPMEVENT13 = 12&#39;h32D;
	localparam [11:0] CSR_MHPMEVENT14 = 12&#39;h32E;
	localparam [11:0] CSR_MHPMEVENT15 = 12&#39;h32F;
	localparam [11:0] CSR_MHPMEVENT16 = 12&#39;h330;
	localparam [11:0] CSR_MHPMEVENT17 = 12&#39;h331;
	localparam [11:0] CSR_MHPMEVENT18 = 12&#39;h332;
	localparam [11:0] CSR_MHPMEVENT19 = 12&#39;h333;
	localparam [11:0] CSR_MHPMEVENT20 = 12&#39;h334;
	localparam [11:0] CSR_MHPMEVENT21 = 12&#39;h335;
	localparam [11:0] CSR_MHPMEVENT22 = 12&#39;h336;
	localparam [11:0] CSR_MHPMEVENT23 = 12&#39;h337;
	localparam [11:0] CSR_MHPMEVENT24 = 12&#39;h338;
	localparam [11:0] CSR_MHPMEVENT25 = 12&#39;h339;
	localparam [11:0] CSR_MHPMEVENT26 = 12&#39;h33A;
	localparam [11:0] CSR_MHPMEVENT27 = 12&#39;h33B;
	localparam [11:0] CSR_MHPMEVENT28 = 12&#39;h33C;
	localparam [11:0] CSR_MHPMEVENT29 = 12&#39;h33D;
	localparam [11:0] CSR_MHPMEVENT30 = 12&#39;h33E;
	localparam [11:0] CSR_MHPMEVENT31 = 12&#39;h33F;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MHPMCOUNTER3 = 12&#39;hB03;
	localparam [11:0] CSR_MHPMCOUNTER4 = 12&#39;hB04;
	localparam [11:0] CSR_MHPMCOUNTER5 = 12&#39;hB05;
	localparam [11:0] CSR_MHPMCOUNTER6 = 12&#39;hB06;
	localparam [11:0] CSR_MHPMCOUNTER7 = 12&#39;hB07;
	localparam [11:0] CSR_MHPMCOUNTER8 = 12&#39;hB08;
	localparam [11:0] CSR_MHPMCOUNTER9 = 12&#39;hB09;
	localparam [11:0] CSR_MHPMCOUNTER10 = 12&#39;hB0A;
	localparam [11:0] CSR_MHPMCOUNTER11 = 12&#39;hB0B;
	localparam [11:0] CSR_MHPMCOUNTER12 = 12&#39;hB0C;
	localparam [11:0] CSR_MHPMCOUNTER13 = 12&#39;hB0D;
	localparam [11:0] CSR_MHPMCOUNTER14 = 12&#39;hB0E;
	localparam [11:0] CSR_MHPMCOUNTER15 = 12&#39;hB0F;
	localparam [11:0] CSR_MHPMCOUNTER16 = 12&#39;hB10;
	localparam [11:0] CSR_MHPMCOUNTER17 = 12&#39;hB11;
	localparam [11:0] CSR_MHPMCOUNTER18 = 12&#39;hB12;
	localparam [11:0] CSR_MHPMCOUNTER19 = 12&#39;hB13;
	localparam [11:0] CSR_MHPMCOUNTER20 = 12&#39;hB14;
	localparam [11:0] CSR_MHPMCOUNTER21 = 12&#39;hB15;
	localparam [11:0] CSR_MHPMCOUNTER22 = 12&#39;hB16;
	localparam [11:0] CSR_MHPMCOUNTER23 = 12&#39;hB17;
	localparam [11:0] CSR_MHPMCOUNTER24 = 12&#39;hB18;
	localparam [11:0] CSR_MHPMCOUNTER25 = 12&#39;hB19;
	localparam [11:0] CSR_MHPMCOUNTER26 = 12&#39;hB1A;
	localparam [11:0] CSR_MHPMCOUNTER27 = 12&#39;hB1B;
	localparam [11:0] CSR_MHPMCOUNTER28 = 12&#39;hB1C;
	localparam [11:0] CSR_MHPMCOUNTER29 = 12&#39;hB1D;
	localparam [11:0] CSR_MHPMCOUNTER30 = 12&#39;hB1E;
	localparam [11:0] CSR_MHPMCOUNTER31 = 12&#39;hB1F;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHPMCOUNTER3H = 12&#39;hB83;
	localparam [11:0] CSR_MHPMCOUNTER4H = 12&#39;hB84;
	localparam [11:0] CSR_MHPMCOUNTER5H = 12&#39;hB85;
	localparam [11:0] CSR_MHPMCOUNTER6H = 12&#39;hB86;
	localparam [11:0] CSR_MHPMCOUNTER7H = 12&#39;hB87;
	localparam [11:0] CSR_MHPMCOUNTER8H = 12&#39;hB88;
	localparam [11:0] CSR_MHPMCOUNTER9H = 12&#39;hB89;
	localparam [11:0] CSR_MHPMCOUNTER10H = 12&#39;hB8A;
	localparam [11:0] CSR_MHPMCOUNTER11H = 12&#39;hB8B;
	localparam [11:0] CSR_MHPMCOUNTER12H = 12&#39;hB8C;
	localparam [11:0] CSR_MHPMCOUNTER13H = 12&#39;hB8D;
	localparam [11:0] CSR_MHPMCOUNTER14H = 12&#39;hB8E;
	localparam [11:0] CSR_MHPMCOUNTER15H = 12&#39;hB8F;
	localparam [11:0] CSR_MHPMCOUNTER16H = 12&#39;hB90;
	localparam [11:0] CSR_MHPMCOUNTER17H = 12&#39;hB91;
	localparam [11:0] CSR_MHPMCOUNTER18H = 12&#39;hB92;
	localparam [11:0] CSR_MHPMCOUNTER19H = 12&#39;hB93;
	localparam [11:0] CSR_MHPMCOUNTER20H = 12&#39;hB94;
	localparam [11:0] CSR_MHPMCOUNTER21H = 12&#39;hB95;
	localparam [11:0] CSR_MHPMCOUNTER22H = 12&#39;hB96;
	localparam [11:0] CSR_MHPMCOUNTER23H = 12&#39;hB97;
	localparam [11:0] CSR_MHPMCOUNTER24H = 12&#39;hB98;
	localparam [11:0] CSR_MHPMCOUNTER25H = 12&#39;hB99;
	localparam [11:0] CSR_MHPMCOUNTER26H = 12&#39;hB9A;
	localparam [11:0] CSR_MHPMCOUNTER27H = 12&#39;hB9B;
	localparam [11:0] CSR_MHPMCOUNTER28H = 12&#39;hB9C;
	localparam [11:0] CSR_MHPMCOUNTER29H = 12&#39;hB9D;
	localparam [11:0] CSR_MHPMCOUNTER30H = 12&#39;hB9E;
	localparam [11:0] CSR_MHPMCOUNTER31H = 12&#39;hB9F;
	localparam [11:0] CSR_CPUCTRL = 12&#39;h7C0;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [2:0] PC_BOOT = 0;
	localparam [2:0] PC_JUMP = 1;
	localparam [2:0] PC_EXC = 2;
	localparam [2:0] PC_ERET = 3;
	localparam [2:0] PC_DRET = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [5:0] ALU_ADD = 0;
	localparam [5:0] ALU_SUB = 1;
	localparam [5:0] ALU_XOR = 2;
	localparam [5:0] ALU_OR = 3;
	localparam [5:0] ALU_AND = 4;
	localparam [5:0] ALU_XNOR = 5;
	localparam [5:0] ALU_ORN = 6;
	localparam [5:0] ALU_ANDN = 7;
	localparam [5:0] ALU_SRA = 8;
	localparam [5:0] ALU_SRL = 9;
	localparam [5:0] ALU_SLL = 10;
	localparam [5:0] ALU_SRO = 11;
	localparam [5:0] ALU_SLO = 12;
	localparam [5:0] ALU_ROR = 13;
	localparam [5:0] ALU_ROL = 14;
	localparam [5:0] ALU_REV = 15;
	localparam [5:0] ALU_REV8 = 16;
	localparam [5:0] ALU_ORCB = 17;
	localparam [5:0] ALU_LT = 18;
	localparam [5:0] ALU_LTU = 19;
	localparam [5:0] ALU_GE = 20;
	localparam [5:0] ALU_GEU = 21;
	localparam [5:0] ALU_EQ = 22;
	localparam [5:0] ALU_NE = 23;
	localparam [5:0] ALU_MIN = 24;
	localparam [5:0] ALU_MINU = 25;
	localparam [5:0] ALU_MAX = 26;
	localparam [5:0] ALU_MAXU = 27;
	localparam [5:0] ALU_PACK = 28;
	localparam [5:0] ALU_PACKU = 29;
	localparam [5:0] ALU_PACKH = 30;
	localparam [5:0] ALU_CLZ = 31;
	localparam [5:0] ALU_CTZ = 32;
	localparam [5:0] ALU_PCNT = 33;
	localparam [5:0] ALU_SLT = 34;
	localparam [5:0] ALU_SLTU = 35;
	localparam [5:0] ALU_CMOV = 36;
	localparam [5:0] ALU_CMIX = 37;
	localparam [5:0] ALU_FSL = 38;
	localparam [5:0] ALU_FSR = 39;
	localparam [5:0] ALU_SBSET = 40;
	localparam [5:0] ALU_SBCLR = 41;
	localparam [5:0] ALU_SBINV = 42;
	localparam [5:0] ALU_SBEXT = 43;
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_UMODE = {1&#39;b0, 5&#39;d08};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [31:0] PMP_NUM_CHAN = 2;
	localparam [0:0] DataIndTiming = SecureIbex;
	wire instr_valid_id;
	wire instr_new_id;
	wire [31:0] instr_rdata_id;
	wire [31:0] instr_rdata_alu_id;
	wire [15:0] instr_rdata_c_id;
	wire instr_is_compressed_id;
	wire instr_fetch_err;
	wire instr_fetch_err_plus2;
	wire illegal_c_insn_id;
	wire [31:0] pc_if;
	wire [31:0] pc_id;
	wire [31:0] pc_wb;
	wire [33:0] imd_val_d_ex;
	wire [33:0] imd_val_q_ex;
	wire imd_val_we_ex;
	wire data_ind_timing;
	wire icache_enable;
	wire icache_inval;
	wire instr_first_cycle_id;
	wire instr_valid_clear;
	wire pc_set;
	wire [2:0] pc_mux_id;
	wire [1:0] exc_pc_mux_id;
	wire [5:0] exc_cause;
	wire lsu_load_err;
	wire lsu_store_err;
	wire lsu_addr_incr_req;
	wire [31:0] lsu_addr_last;
	wire [31:0] branch_target_ex;
	wire branch_decision;
	wire ctrl_busy;
	wire if_busy;
	wire lsu_load;
	wire lsu_busy;
	wire core_busy_d;
	reg core_busy_q;
	wire [4:0] rf_raddr_a;
	wire [31:0] rf_rdata_a;
	wire [4:0] rf_raddr_b;
	wire [31:0] rf_rdata_b;
	wire [4:0] rf_waddr_wb;
	wire [31:0] rf_wdata_wb;
	wire [31:0] rf_wdata_fwd_wb;
	wire [31:0] rf_wdata_lsu;
	wire rf_we_wb;
	wire rf_we_lsu;
	wire [4:0] rf_waddr_id;
	wire [31:0] rf_wdata_id;
	wire rf_we_id;
	wire [5:0] alu_operator_ex;
	wire [31:0] alu_operand_a_ex;
	wire [31:0] alu_operand_b_ex;
	wire [31:0] bt_a_operand;
	wire [31:0] bt_b_operand;
	wire [31:0] alu_adder_result_ex;
	wire [31:0] result_ex;
	wire mult_en_ex;
	wire div_en_ex;
	wire multdiv_sel_ex;
	wire [1:0] multdiv_operator_ex;
	wire [1:0] multdiv_signed_mode_ex;
	wire [31:0] multdiv_operand_a_ex;
	wire [31:0] multdiv_operand_b_ex;
	wire multdiv_ready_id;
	wire csr_access;
	wire [1:0] csr_op;
	wire csr_op_en;
	wire [11:0] csr_addr;
	wire [31:0] csr_rdata;
	wire [31:0] csr_wdata;
	wire illegal_csr_insn_id;
	wire lsu_we;
	wire [1:0] lsu_type;
	wire lsu_sign_ext;
	wire lsu_req;
	wire [31:0] lsu_wdata;
	wire lsu_req_done;
	wire id_in_ready;
	wire ex_valid;
	wire lsu_data_valid;
	wire instr_req_int;
	wire en_wb;
	wire [1:0] instr_type_wb;
	wire ready_wb;
	wire rf_write_wb;
	wire outstanding_load_wb;
	wire outstanding_store_wb;
	wire irq_pending;
	wire nmi_mode;
	wire [17:0] irqs;
	wire csr_mstatus_mie;
	wire [31:0] csr_mepc;
	wire [31:0] csr_depc;
	wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1) : (PMPNumRegions * 34) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 34 : 0)] csr_pmp_addr;
	wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1) : (PMPNumRegions * 6) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 6 : 0)] csr_pmp_cfg;
	wire [0:PMP_NUM_CHAN - 1] pmp_req_err;
	wire instr_req_out;
	wire data_req_out;
	wire csr_save_if;
	wire csr_save_id;
	wire csr_save_wb;
	wire csr_restore_mret_id;
	wire csr_restore_dret_id;
	wire csr_save_cause;
	wire csr_mtvec_init;
	wire [31:0] csr_mtvec;
	wire [31:0] csr_mtval;
	wire csr_mstatus_tw;
	wire [1:0] priv_mode_id;
	wire [1:0] priv_mode_if;
	wire [1:0] priv_mode_lsu;
	wire debug_mode;
	wire [2:0] debug_cause;
	wire debug_csr_save;
	wire debug_single_step;
	wire debug_ebreakm;
	wire debug_ebreaku;
	wire trigger_match;
	wire instr_id_done;
	wire instr_id_done_compressed;
	wire instr_done_wb;
	wire perf_iside_wait;
	wire perf_dside_wait;
	wire perf_mul_wait;
	wire perf_div_wait;
	wire perf_jump;
	wire perf_branch;
	wire perf_tbranch;
	wire perf_load;
	wire perf_store;
	wire illegal_insn_id;
	wire unused_illegal_insn_id;
	wire clk;
	wire clock_en;
	assign core_busy_d = (ctrl_busy | if_busy) | lsu_busy;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			core_busy_q &lt;= 1&#39;b0;
		else
			core_busy_q &lt;= core_busy_d;
	assign clock_en = ((core_busy_q | debug_req_i) | irq_pending) | irq_nm_i;
	assign core_sleep_o = ~clock_en;
	prim_clock_gating core_clock_gate_i(
		.clk_i(clk_i),
		.en_i(clock_en),
		.test_en_i(test_en_i),
		.clk_o(clk)
	);
	ibex_if_stage #(
		.DmHaltAddr(DmHaltAddr),
		.DmExceptionAddr(DmExceptionAddr),
		.ICache(ICache),
		.ICacheECC(ICacheECC)
	) if_stage_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.boot_addr_i(boot_addr_i),
		.req_i(instr_req_int),
		.instr_req_o(instr_req_out),
		.instr_addr_o(instr_addr_o),
		.instr_gnt_i(instr_gnt_i),
		.instr_rvalid_i(instr_rvalid_i),
		.instr_rdata_i(instr_rdata_i),
		.instr_err_i(instr_err_i),
		.instr_pmp_err_i(pmp_req_err[PMP_I]),
		.instr_valid_id_o(instr_valid_id),
		.instr_new_id_o(instr_new_id),
		.instr_rdata_id_o(instr_rdata_id),
		.instr_rdata_alu_id_o(instr_rdata_alu_id),
		.instr_rdata_c_id_o(instr_rdata_c_id),
		.instr_is_compressed_id_o(instr_is_compressed_id),
		.instr_fetch_err_o(instr_fetch_err),
		.instr_fetch_err_plus2_o(instr_fetch_err_plus2),
		.illegal_c_insn_id_o(illegal_c_insn_id),
		.pc_if_o(pc_if),
		.pc_id_o(pc_id),
		.instr_valid_clear_i(instr_valid_clear),
		.pc_set_i(pc_set),
		.pc_mux_i(pc_mux_id),
		.exc_pc_mux_i(exc_pc_mux_id),
		.exc_cause(exc_cause),
		.icache_enable_i(icache_enable),
		.icache_inval_i(icache_inval),
		.branch_target_ex_i(branch_target_ex),
		.csr_mepc_i(csr_mepc),
		.csr_depc_i(csr_depc),
		.csr_mtvec_i(csr_mtvec),
		.csr_mtvec_init_o(csr_mtvec_init),
		.id_in_ready_i(id_in_ready),
		.if_busy_o(if_busy)
	);
	assign perf_iside_wait = id_in_ready &amp; ~instr_valid_id;
	assign instr_req_o = instr_req_out &amp; ~pmp_req_err[PMP_I];
	ibex_id_stage #(
		.RV32E(RV32E),
		.RV32M(RV32M),
		.RV32B(RV32B),
		.BranchTargetALU(BranchTargetALU),
		.DataIndTiming(DataIndTiming),
		.WritebackStage(WritebackStage)
	) id_stage_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.fetch_enable_i(fetch_enable_i),
		.ctrl_busy_o(ctrl_busy),
		.illegal_insn_o(illegal_insn_id),
		.instr_valid_i(instr_valid_id),
		.instr_rdata_i(instr_rdata_id),
		.instr_rdata_alu_i(instr_rdata_alu_id),
		.instr_rdata_c_i(instr_rdata_c_id),
		.instr_is_compressed_i(instr_is_compressed_id),
		.branch_decision_i(branch_decision),
		.instr_first_cycle_id_o(instr_first_cycle_id),
		.instr_valid_clear_o(instr_valid_clear),
		.id_in_ready_o(id_in_ready),
		.instr_req_o(instr_req_int),
		.pc_set_o(pc_set),
		.pc_mux_o(pc_mux_id),
		.exc_pc_mux_o(exc_pc_mux_id),
		.exc_cause_o(exc_cause),
		.icache_inval_o(icache_inval),
		.instr_fetch_err_i(instr_fetch_err),
		.instr_fetch_err_plus2_i(instr_fetch_err_plus2),
		.illegal_c_insn_i(illegal_c_insn_id),
		.pc_id_i(pc_id),
		.ex_valid_i(ex_valid),
		.lsu_valid_i(lsu_data_valid),
		.lsu_load_i(lsu_load),
		.lsu_busy_i(lsu_busy),
		.alu_operator_ex_o(alu_operator_ex),
		.alu_operand_a_ex_o(alu_operand_a_ex),
		.alu_operand_b_ex_o(alu_operand_b_ex),
		.imd_val_q_ex_o(imd_val_q_ex),
		.imd_val_d_ex_i(imd_val_d_ex),
		.imd_val_we_ex_i(imd_val_we_ex),
		.bt_a_operand_o(bt_a_operand),
		.bt_b_operand_o(bt_b_operand),
		.mult_en_ex_o(mult_en_ex),
		.div_en_ex_o(div_en_ex),
		.multdiv_sel_ex_o(multdiv_sel_ex),
		.multdiv_operator_ex_o(multdiv_operator_ex),
		.multdiv_signed_mode_ex_o(multdiv_signed_mode_ex),
		.multdiv_operand_a_ex_o(multdiv_operand_a_ex),
		.multdiv_operand_b_ex_o(multdiv_operand_b_ex),
		.multdiv_ready_id_o(multdiv_ready_id),
		.csr_access_o(csr_access),
		.csr_op_o(csr_op),
		.csr_op_en_o(csr_op_en),
		.csr_save_if_o(csr_save_if),
		.csr_save_id_o(csr_save_id),
		.csr_save_wb_o(csr_save_wb),
		.csr_restore_mret_id_o(csr_restore_mret_id),
		.csr_restore_dret_id_o(csr_restore_dret_id),
		.csr_save_cause_o(csr_save_cause),
		.csr_mtval_o(csr_mtval),
		.priv_mode_i(priv_mode_id),
		.csr_mstatus_tw_i(csr_mstatus_tw),
		.illegal_csr_insn_i(illegal_csr_insn_id),
		.data_ind_timing_i(data_ind_timing),
		.lsu_req_o(lsu_req),
		.lsu_we_o(lsu_we),
		.lsu_type_o(lsu_type),
		.lsu_sign_ext_o(lsu_sign_ext),
		.lsu_wdata_o(lsu_wdata),
		.lsu_req_done_i(lsu_req_done),
		.lsu_addr_incr_req_i(lsu_addr_incr_req),
		.lsu_addr_last_i(lsu_addr_last),
		.lsu_load_err_i(lsu_load_err),
		.lsu_store_err_i(lsu_store_err),
		.csr_mstatus_mie_i(csr_mstatus_mie),
		.irq_pending_i(irq_pending),
		.irqs_i(irqs),
		.irq_nm_i(irq_nm_i),
		.nmi_mode_o(nmi_mode),
		.debug_mode_o(debug_mode),
		.debug_cause_o(debug_cause),
		.debug_csr_save_o(debug_csr_save),
		.debug_req_i(debug_req_i),
		.debug_single_step_i(debug_single_step),
		.debug_ebreakm_i(debug_ebreakm),
		.debug_ebreaku_i(debug_ebreaku),
		.trigger_match_i(trigger_match),
		.result_ex_i(result_ex),
		.csr_rdata_i(csr_rdata),
		.rf_raddr_a_o(rf_raddr_a),
		.rf_rdata_a_i(rf_rdata_a),
		.rf_raddr_b_o(rf_raddr_b),
		.rf_rdata_b_i(rf_rdata_b),
		.rf_waddr_id_o(rf_waddr_id),
		.rf_wdata_id_o(rf_wdata_id),
		.rf_we_id_o(rf_we_id),
		.rf_waddr_wb_i(rf_waddr_wb),
		.rf_wdata_fwd_wb_i(rf_wdata_fwd_wb),
		.rf_write_wb_i(rf_write_wb),
		.en_wb_o(en_wb),
		.instr_type_wb_o(instr_type_wb),
		.ready_wb_i(ready_wb),
		.outstanding_load_wb_i(outstanding_load_wb),
		.outstanding_store_wb_i(outstanding_store_wb),
		.perf_jump_o(perf_jump),
		.perf_branch_o(perf_branch),
		.perf_tbranch_o(perf_tbranch),
		.perf_dside_wait_o(perf_dside_wait),
		.perf_mul_wait_o(perf_mul_wait),
		.perf_div_wait_o(perf_div_wait),
		.instr_id_done_o(instr_id_done),
		.instr_id_done_compressed_o(instr_id_done_compressed)
	);
	assign unused_illegal_insn_id = illegal_insn_id;
	ibex_ex_block #(
		.RV32M(RV32M),
		.RV32B(RV32B),
		.BranchTargetALU(BranchTargetALU),
		.MultiplierImplementation(MultiplierImplementation)
	) ex_block_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.alu_operator_i(alu_operator_ex),
		.alu_operand_a_i(alu_operand_a_ex),
		.alu_operand_b_i(alu_operand_b_ex),
		.alu_instr_first_cycle_i(instr_first_cycle_id),
		.bt_a_operand_i(bt_a_operand),
		.bt_b_operand_i(bt_b_operand),
		.multdiv_operator_i(multdiv_operator_ex),
		.mult_en_i(mult_en_ex),
		.div_en_i(div_en_ex),
		.multdiv_sel_i(multdiv_sel_ex),
		.multdiv_signed_mode_i(multdiv_signed_mode_ex),
		.multdiv_operand_a_i(multdiv_operand_a_ex),
		.multdiv_operand_b_i(multdiv_operand_b_ex),
		.multdiv_ready_id_i(multdiv_ready_id),
		.imd_val_we_o(imd_val_we_ex),
		.imd_val_d_o(imd_val_d_ex),
		.imd_val_q_i(imd_val_q_ex),
		.alu_adder_result_ex_o(alu_adder_result_ex),
		.result_ex_o(result_ex),
		.branch_target_o(branch_target_ex),
		.branch_decision_o(branch_decision),
		.ex_valid_o(ex_valid)
	);
	assign data_req_o = data_req_out &amp; ~pmp_req_err[PMP_D];
	ibex_load_store_unit load_store_unit_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.data_req_o(data_req_out),
		.data_gnt_i(data_gnt_i),
		.data_rvalid_i(data_rvalid_i),
		.data_err_i(data_err_i),
		.data_pmp_err_i(pmp_req_err[PMP_D]),
		.data_addr_o(data_addr_o),
		.data_we_o(data_we_o),
		.data_be_o(data_be_o),
		.data_wdata_o(data_wdata_o),
		.data_rdata_i(data_rdata_i),
		.lsu_we_i(lsu_we),
		.lsu_type_i(lsu_type),
		.lsu_wdata_i(lsu_wdata),
		.lsu_sign_ext_i(lsu_sign_ext),
		.lsu_rdata_o(rf_wdata_lsu),
		.lsu_rdata_valid_o(rf_we_lsu),
		.lsu_req_i(lsu_req),
		.lsu_req_done_o(lsu_req_done),
		.adder_result_ex_i(alu_adder_result_ex),
		.addr_incr_req_o(lsu_addr_incr_req),
		.addr_last_o(lsu_addr_last),
		.lsu_resp_valid_o(lsu_data_valid),
		.load_err_o(lsu_load_err),
		.store_err_o(lsu_store_err),
		.load_o(lsu_load),
		.busy_o(lsu_busy),
		.perf_load_o(perf_load),
		.perf_store_o(perf_store),
		.illegal_insn_id_i(illegal_insn_id),
		.instr_valid_id_i(instr_valid_id)
	);
	ibex_wb_stage #(.WritebackStage(WritebackStage)) wb_stage_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.en_wb_i(en_wb),
		.instr_type_wb_i(instr_type_wb),
		.pc_id_i(pc_id),
		.ready_wb_o(ready_wb),
		.rf_write_wb_o(rf_write_wb),
		.outstanding_load_wb_o(outstanding_load_wb),
		.outstanding_store_wb_o(outstanding_store_wb),
		.pc_wb_o(pc_wb),
		.rf_waddr_id_i(rf_waddr_id),
		.rf_wdata_id_i(rf_wdata_id),
		.rf_we_id_i(rf_we_id),
		.rf_wdata_lsu_i(rf_wdata_lsu),
		.rf_we_lsu_i(rf_we_lsu),
		.rf_wdata_fwd_wb_o(rf_wdata_fwd_wb),
		.rf_waddr_wb_o(rf_waddr_wb),
		.rf_wdata_wb_o(rf_wdata_wb),
		.rf_we_wb_o(rf_we_wb),
		.lsu_data_valid_i(lsu_data_valid),
		.instr_done_wb_o(instr_done_wb)
	);
	ibex_register_file #(
		.RV32E(RV32E),
		.DataWidth(32)
	) register_file_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.test_en_i(test_en_i),
		.raddr_a_i(rf_raddr_a),
		.rdata_a_o(rf_rdata_a),
		.raddr_b_i(rf_raddr_b),
		.rdata_b_o(rf_rdata_b),
		.waddr_a_i(rf_waddr_wb),
		.wdata_a_i(rf_wdata_wb),
		.we_a_i(rf_we_wb)
	);
	wire outstanding_load_resp;
	wire outstanding_store_resp;
	wire outstanding_load_id;
	wire outstanding_store_id;
	assign outstanding_load_id = (id_stage_i.instr_executing &amp; id_stage_i.lsu_req_dec) &amp; ~id_stage_i.lsu_we;
	assign outstanding_store_id = (id_stage_i.instr_executing &amp; id_stage_i.lsu_req_dec) &amp; id_stage_i.lsu_we;
	generate
		if (WritebackStage) begin
			assign outstanding_load_resp = outstanding_load_wb | (outstanding_load_id &amp; load_store_unit_i.split_misaligned_access);
			assign outstanding_store_resp = outstanding_store_wb | (outstanding_store_id &amp; load_store_unit_i.split_misaligned_access);
		end
		else begin
			assign outstanding_load_resp = outstanding_load_id;
			assign outstanding_store_resp = outstanding_store_id;
		end
	endgenerate
	assign csr_wdata = alu_operand_a_ex;
	function automatic [11:0] sv2v_cast_12;
		input reg [11:0] inp;
		sv2v_cast_12 = inp;
	endfunction
	assign csr_addr = sv2v_cast_12((csr_access ? alu_operand_b_ex[11:0] : 12&#39;b0));
	ibex_cs_registers #(
		.DbgTriggerEn(DbgTriggerEn),
		.DataIndTiming(DataIndTiming),
		.ICache(ICache),
		.MHPMCounterNum(MHPMCounterNum),
		.MHPMCounterWidth(MHPMCounterWidth),
		.PMPEnable(PMPEnable),
		.PMPGranularity(PMPGranularity),
		.PMPNumRegions(PMPNumRegions),
		.RV32E(RV32E),
		.RV32M(RV32M)
	) cs_registers_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.hart_id_i(hart_id_i),
		.priv_mode_id_o(priv_mode_id),
		.priv_mode_if_o(priv_mode_if),
		.priv_mode_lsu_o(priv_mode_lsu),
		.csr_mtvec_o(csr_mtvec),
		.csr_mtvec_init_i(csr_mtvec_init),
		.boot_addr_i(boot_addr_i),
		.csr_access_i(csr_access),
		.csr_addr_i(csr_addr),
		.csr_wdata_i(csr_wdata),
		.csr_op_i(csr_op),
		.csr_op_en_i(csr_op_en),
		.csr_rdata_o(csr_rdata),
		.irq_software_i(irq_software_i),
		.irq_timer_i(irq_timer_i),
		.irq_external_i(irq_external_i),
		.irq_fast_i(irq_fast_i),
		.nmi_mode_i(nmi_mode),
		.irq_pending_o(irq_pending),
		.irqs_o(irqs),
		.csr_mstatus_mie_o(csr_mstatus_mie),
		.csr_mstatus_tw_o(csr_mstatus_tw),
		.csr_mepc_o(csr_mepc),
		.csr_pmp_cfg_o(csr_pmp_cfg),
		.csr_pmp_addr_o(csr_pmp_addr),
		.csr_depc_o(csr_depc),
		.debug_mode_i(debug_mode),
		.debug_cause_i(debug_cause),
		.debug_csr_save_i(debug_csr_save),
		.debug_single_step_o(debug_single_step),
		.debug_ebreakm_o(debug_ebreakm),
		.debug_ebreaku_o(debug_ebreaku),
		.trigger_match_o(trigger_match),
		.pc_if_i(pc_if),
		.pc_id_i(pc_id),
		.pc_wb_i(pc_wb),
		.data_ind_timing_o(data_ind_timing),
		.icache_enable_o(icache_enable),
		.csr_save_if_i(csr_save_if),
		.csr_save_id_i(csr_save_id),
		.csr_save_wb_i(csr_save_wb),
		.csr_restore_mret_i(csr_restore_mret_id),
		.csr_restore_dret_i(csr_restore_dret_id),
		.csr_save_cause_i(csr_save_cause),
		.csr_mcause_i(exc_cause),
		.csr_mtval_i(csr_mtval),
		.illegal_csr_insn_o(illegal_csr_insn_id),
		.instr_ret_i(instr_id_done),
		.instr_ret_compressed_i(instr_id_done_compressed),
		.iside_wait_i(perf_iside_wait),
		.jump_i(perf_jump),
		.branch_i(perf_branch),
		.branch_taken_i(perf_tbranch),
		.mem_load_i(perf_load),
		.mem_store_i(perf_store),
		.dside_wait_i(perf_dside_wait),
		.mul_wait_i(perf_mul_wait),
		.div_wait_i(perf_div_wait)
	);
	generate
		if (PMPEnable) begin : g_pmp
			wire [(PMP_NUM_CHAN * 34) + -1:0] pmp_req_addr;
			wire [(PMP_NUM_CHAN * 2) + -1:0] pmp_req_type;
			wire [(PMP_NUM_CHAN * 2) + -1:0] pmp_priv_lvl;
			assign pmp_req_addr[((PMP_NUM_CHAN - 1) - PMP_I) * 34+:34] = {2&#39;b00, instr_addr_o[31:0]};
			assign pmp_req_type[((PMP_NUM_CHAN - 1) - PMP_I) * 2+:2] = PMP_ACC_EXEC;
			assign pmp_priv_lvl[((PMP_NUM_CHAN - 1) - PMP_I) * 2+:2] = priv_mode_if;
			assign pmp_req_addr[((PMP_NUM_CHAN - 1) - PMP_D) * 34+:34] = {2&#39;b00, data_addr_o[31:0]};
			assign pmp_req_type[((PMP_NUM_CHAN - 1) - PMP_D) * 2+:2] = (data_we_o ? PMP_ACC_WRITE : PMP_ACC_READ);
			assign pmp_priv_lvl[((PMP_NUM_CHAN - 1) - PMP_D) * 2+:2] = priv_mode_lsu;
			ibex_pmp #(
				.PMPGranularity(PMPGranularity),
				.PMPNumChan(PMP_NUM_CHAN),
				.PMPNumRegions(PMPNumRegions)
			) pmp_i(
				.clk_i(clk),
				.rst_ni(rst_ni),
				.csr_pmp_cfg_i(csr_pmp_cfg),
				.csr_pmp_addr_i(csr_pmp_addr),
				.priv_mode_i(pmp_priv_lvl),
				.pmp_req_addr_i(pmp_req_addr),
				.pmp_req_type_i(pmp_req_type),
				.pmp_req_err_o(pmp_req_err)
			);
		end
		else begin : g_no_pmp
			wire [1:0] unused_priv_lvl_if;
			wire [1:0] unused_priv_lvl_ls;
			wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1) : (PMPNumRegions * 34) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 34 : 0)] unused_csr_pmp_addr;
			wire [(0 &gt;= (PMPNumRegions - 1) ? ((2 - PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1) : (PMPNumRegions * 6) + -1):(0 &gt;= (PMPNumRegions - 1) ? (PMPNumRegions - 1) * 6 : 0)] unused_csr_pmp_cfg;
			assign unused_priv_lvl_if = priv_mode_if;
			assign unused_priv_lvl_ls = priv_mode_lsu;
			assign unused_csr_pmp_addr = csr_pmp_addr;
			assign unused_csr_pmp_cfg = {(0 &gt;= (PMPNumRegions - 1) ? 2 - PMPNumRegions : PMPNumRegions) {csr_pmp_cfg}};
			assign pmp_req_err[PMP_I] = 1&#39;b0;
			assign pmp_req_err[PMP_D] = 1&#39;b0;
		end
	endgenerate
endmodule
module ibex_register_file (
	clk_i,
	rst_ni,
	test_en_i,
	raddr_a_i,
	rdata_a_o,
	raddr_b_i,
	rdata_b_o,
	waddr_a_i,
	wdata_a_i,
	we_a_i
);
	parameter [0:0] RV32E = 0;
	parameter [31:0] DataWidth = 32;
	input wire clk_i;
	input wire rst_ni;
	input wire test_en_i;
	input wire [4:0] raddr_a_i;
	output wire [DataWidth - 1:0] rdata_a_o;
	input wire [4:0] raddr_b_i;
	output wire [DataWidth - 1:0] rdata_b_o;
	input wire [4:0] waddr_a_i;
	input wire [DataWidth - 1:0] wdata_a_i;
	input wire we_a_i;
	localparam signed [31:0] ADDR_WIDTH = (RV32E ? 4 : 5);
	localparam signed [31:0] NUM_WORDS = 2 ** ADDR_WIDTH;
	reg [DataWidth - 1:0] mem [0:NUM_WORDS - 1];
	wire we;
	assign rdata_a_o = (raddr_a_i == &#39;sd0 ? &#39;sd0 : mem[raddr_a_i]);
	assign rdata_b_o = (raddr_b_i == &#39;sd0 ? &#39;sd0 : mem[raddr_b_i]);
	assign we = (waddr_a_i == &#39;sd0 ? 1&#39;b0 : we_a_i);
	always @(posedge clk_i) begin : sync_write
		if (we == 1&#39;b1)
			mem[waddr_a_i] &lt;= wdata_a_i;
	end
endmodule

</pre>
</body>