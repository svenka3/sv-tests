<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from basejump
rc: 0 (means success: 1)
tags: basejump
incdirs: /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_hash_bank.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_hash_bank.v</a>
defines: 
time_elapsed: 0.413s
ram usage: 14616 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_hash_bank.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_hash_bank.v</a>
module bsg_hash_bank (
	i,
	bank_o,
	index_o
);
	parameter _sv2v_width_banks_p = 24;
	parameter [_sv2v_width_banks_p - 1:0] banks_p = &#34;inv&#34;;
	parameter _sv2v_width_width_p = 24;
	parameter [_sv2v_width_width_p - 1:0] width_p = &#34;inv&#34;;
	parameter index_width_lp = $clog2((((2 ** width_p) + banks_p) - 1) / banks_p);
	parameter lg_banks_lp = (banks_p == 1 ? 1 : $clog2(banks_p));
	parameter debug_lp = 0;
	input [width_p - 1:0] i;
	output [lg_banks_lp - 1:0] bank_o;
	output [index_width_lp - 1:0] index_o;
	genvar j;
	generate
		if (banks_p == 1) begin : hash1
			assign index_o = i;
			assign bank_o = 1&#39;b0;
		end
		else if (banks_p == 2) begin : hash2
			assign bank_o = i[width_p - 1];
			assign index_o = i[width_p - 2:0];
		end
		else if (~banks_p[0]) begin : hashpow2
			assign bank_o[0] = i[width_p - 1];
			bsg_hash_bank #(
				._sv2v_width_banks_p(_sv2v_width_banks_p),
				.banks_p(banks_p &gt;&gt; 1),
				._sv2v_width_width_p((_sv2v_width_width_p &gt;= 32 ? _sv2v_width_width_p : 32)),
				.width_p(width_p - 1)
			) bhb(
				.i(i[width_p - 2:0]),
				.bank_o(bank_o[lg_banks_lp - 1:1]),
				.index_o(index_o)
			);
		end
		else if ((banks_p &amp; (banks_p + 1)) == 0) begin : hash3
			if ((width_p % lg_banks_lp) != 0) begin : odd
				wire _unused;
				bsg_hash_bank #(
					._sv2v_width_banks_p(_sv2v_width_banks_p),
					.banks_p(banks_p),
					._sv2v_width_width_p((_sv2v_width_width_p &gt;= 32 ? _sv2v_width_width_p : 32)),
					.width_p(width_p + 1)
				) hf(
					.i({i, 1&#39;b0}),
					.bank_o(bank_o),
					.index_o({index_o, _unused})
				);
			end
			else begin : even
				localparam frac_width_lp = width_p / lg_banks_lp;
				wire [(lg_banks_lp * frac_width_lp) - 1:0] unzippered;
				wire [frac_width_lp - 1:0] one_one;
				bsg_reduce_segmented #(
					.segments_p(frac_width_lp),
					.segment_width_p(lg_banks_lp),
					.and_p(1&#39;b1)
				) brs(
					.i(i),
					.o(one_one)
				);
				bsg_transpose #(
					.width_p(lg_banks_lp),
					.els_p(frac_width_lp)
				) unzip(
					.i(i),
					.o(unzippered)
				);
				wire [frac_width_lp - 1:0] one_one_and_scan;
				bsg_scan #(
					.width_p(frac_width_lp),
					.and_p(1)
				) scan(
					.i(one_one),
					.o(one_one_and_scan)
				);
				wire [frac_width_lp - 1:0] not_one_one_and_scan = ~one_one_and_scan;
				wire [frac_width_lp - 1:0] shifty;
				if (frac_width_lp &gt; 1) assign shifty = {1&#39;b1, one_one_and_scan[frac_width_lp - 1:1]};
				else assign shifty = 1&#39;b1;
				wire [frac_width_lp - 1:0] border = not_one_one_and_scan &amp; shifty;
				wire [(lg_banks_lp * frac_width_lp) - 1:0] bits;
				for (j = 1; j &lt; lg_banks_lp; j = j + 1) begin : rof2
					assign bits[j * frac_width_lp+:frac_width_lp] = unzippered[j * frac_width_lp+:frac_width_lp] &amp; ~(border | one_one_and_scan);
				end
				assign bits[0+:frac_width_lp] = one_one_and_scan | ((unzippered[0+:frac_width_lp] &amp; ~one_one_and_scan) &amp; ~border);
				wire [width_p - 1:0] transpose_lo;
				bsg_transpose #(
					.els_p(lg_banks_lp),
					.width_p(frac_width_lp)
				) zip(
					.i(bits),
					.o(transpose_lo)
				);
				assign index_o = transpose_lo[index_width_lp - 1:0];
				for (j = 0; j &lt; lg_banks_lp; j = j + 1) begin : rof1
					assign bank_o[j] = |(border &amp; unzippered[j * frac_width_lp+:frac_width_lp]);
				end
			end
		end
	endgenerate
endmodule

</pre>
</body>