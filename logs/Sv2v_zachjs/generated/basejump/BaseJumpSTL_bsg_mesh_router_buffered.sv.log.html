<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from basejump
rc: 0 (means success: 1)
tags: basejump
incdirs: /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_noc/bsg_mesh_router_buffered.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_noc/bsg_mesh_router_buffered.v</a>
defines: 
time_elapsed: 0.347s
ram usage: 15108 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_noc/bsg_mesh_router_buffered.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_noc/bsg_mesh_router_buffered.v</a>
module bsg_mesh_router_buffered (
	clk_i,
	reset_i,
	link_i,
	link_o,
	my_x_i,
	my_y_i
);
	parameter width_p = -1;
	parameter x_cord_width_p = -1;
	parameter y_cord_width_p = -1;
	parameter debug_p = 0;
	parameter dirs_lp = 5;
	parameter stub_p = {dirs_lp {1&#39;b0}};
	parameter XY_order_p = 1;
	parameter bsg_ready_and_link_sif_width_lp = width_p + 2;
	parameter repeater_output_p = {dirs_lp {1&#39;b0}};
	parameter use_credits_p = {dirs_lp {1&#39;b0}};
	parameter signed [(dirs_lp * 32) - 1:0] fifo_els_p = {32&#39;sd2, 32&#39;sd2, 32&#39;sd2, 32&#39;sd2, 32&#39;sd2};
	input clk_i;
	input reset_i;
	input [(dirs_lp * bsg_ready_and_link_sif_width_lp) - 1:0] link_i;
	output [(dirs_lp * bsg_ready_and_link_sif_width_lp) - 1:0] link_o;
	input [x_cord_width_p - 1:0] my_x_i;
	input [y_cord_width_p - 1:0] my_y_i;
	wire [(dirs_lp * (2 + width_p)) - 1:0] link_i_cast;
	wire [(dirs_lp * (2 + width_p)) - 1:0] link_o_cast;
	assign link_i_cast = link_i;
	assign link_o = link_o_cast;
	wire [dirs_lp - 1:0] fifo_valid;
	wire [(dirs_lp * width_p) - 1:0] fifo_data;
	wire [dirs_lp - 1:0] fifo_yumi;
	genvar i;
	generate
		if (debug_p) for (i = 0; i &lt; dirs_lp; i = i + 1) always @(negedge clk_i)
			$display(&#34;%m x=%d y=%d SNEWP[%d] v_i=%b ready_o=%b v_o=%b ready_i=%b %b&#34;, my_x_i, my_y_i, i, link_i_cast[(i * (2 + width_p)) + (width_p + 1)], link_o_cast[(i * (2 + width_p)) + width_p], link_o_cast[(i * (2 + width_p)) + (width_p + 1)], link_i_cast[(i * (2 + width_p)) + width_p], link_i[i * bsg_ready_and_link_sif_width_lp+:bsg_ready_and_link_sif_width_lp]);
	endgenerate
	generate
		for (i = 0; i &lt; dirs_lp; i = i + 1) begin : rof
			if (stub_p[i]) begin : fi
				function automatic [width_p - 1:0] sv2v_cast_89401;
					input reg [width_p - 1:0] inp;
					sv2v_cast_89401 = inp;
				endfunction
				assign fifo_data[i * width_p+:width_p] = sv2v_cast_89401(0);
				assign fifo_valid[i] = 1&#39;b0;
				assign link_o_cast[(i * (2 + width_p)) + width_p] = 1&#39;b0;
				always @(negedge clk_i)
					if (link_o_cast[(i * (2 + width_p)) + (width_p + 1)])
						$display(&#34;## warning %m: stubbed port %x received word %x&#34;, i, link_i_cast[(i * (2 + width_p)) + (width_p - 1)-:width_p]);
			end
			else begin : fi
				wire fifo_ready_lo;
				bsg_fifo_1r1w_small #(
					.width_p(width_p),
					.els_p(fifo_els_p[i * 32+:32])
				) fifo(
					.clk_i(clk_i),
					.reset_i(reset_i),
					.v_i(link_i_cast[(i * (2 + width_p)) + (width_p + 1)]),
					.data_i(link_i_cast[(i * (2 + width_p)) + (width_p - 1)-:width_p]),
					.ready_o(fifo_ready_lo),
					.v_o(fifo_valid[i]),
					.data_o(fifo_data[i * width_p+:width_p]),
					.yumi_i(fifo_yumi[i])
				);
				if (use_credits_p[i]) begin : cr
					bsg_dff_reset #(
						.width_p(1),
						.reset_val_p(0)
					) dff0(
						.clk_i(clk_i),
						.reset_i(reset_i),
						.data_i(fifo_yumi[i]),
						.data_o(link_o_cast[(i * (2 + width_p)) + width_p])
					);
					always @(negedge clk_i)
						if (~reset_i)
							if (link_i_cast[(i * (2 + width_p)) + (width_p + 1)])
								;
				end
				else assign link_o_cast[(i * (2 + width_p)) + width_p] = fifo_ready_lo;
			end
		end
	endgenerate
	wire [dirs_lp - 1:0] valid_lo;
	wire [(dirs_lp * width_p) - 1:0] data_lo;
	wire [dirs_lp - 1:0] ready_li;
	generate
		for (i = 0; i &lt; dirs_lp; i = i + 1) begin : rof2
			assign link_o_cast[(i * (2 + width_p)) + (width_p + 1)] = valid_lo[i];
			if (repeater_output_p[i] &amp; ~stub_p[i]) begin : macro
				wire [width_p - 1:0] tmp;
				initial $display(&#34;%m with buffers on %d&#34;, i);
				bsg_inv #(
					.width_p(width_p),
					.vertical_p(i &lt; 3)
				) data_lo_inv(
					.i(data_lo[i * width_p+:width_p]),
					.o(tmp)
				);
				bsg_inv #(
					.width_p(width_p),
					.vertical_p(i &lt; 3)
				) data_lo_rep(
					.i(tmp),
					.o(link_o_cast[(i * (2 + width_p)) + (width_p - 1)-:width_p])
				);
			end
			else assign link_o_cast[(i * (2 + width_p)) + (width_p - 1)-:width_p] = data_lo[i * width_p+:width_p];
			assign ready_li[i] = link_i_cast[(i * (2 + width_p)) + width_p];
		end
	endgenerate
	bsg_mesh_router #(
		.width_p(width_p),
		.x_cord_width_p(x_cord_width_p),
		.y_cord_width_p(y_cord_width_p),
		.debug_p(debug_p),
		.stub_p(stub_p),
		.XY_order_p(XY_order_p)
	) bmr(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.v_i(fifo_valid),
		.data_i(fifo_data),
		.yumi_o(fifo_yumi),
		.v_o(valid_lo),
		.data_o(data_lo),
		.ready_i(ready_li),
		.my_x_i(my_x_i),
		.my_y_i(my_y_i)
	);
endmodule

</pre>
</body>