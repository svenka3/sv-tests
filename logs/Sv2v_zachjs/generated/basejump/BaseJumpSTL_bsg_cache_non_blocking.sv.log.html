<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from basejump
rc: 0 (means success: 1)
tags: basejump
incdirs: /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_cache
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking.v</a>
defines: 
time_elapsed: 0.628s
ram usage: 19792 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_cache <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking.v</a>
module bsg_cache_non_blocking (
	clk_i,
	reset_i,
	v_i,
	cache_pkt_i,
	ready_o,
	v_o,
	id_o,
	data_o,
	yumi_i,
	dma_pkt_o,
	dma_pkt_v_o,
	dma_pkt_yumi_i,
	dma_data_i,
	dma_data_v_i,
	dma_data_ready_o,
	dma_data_o,
	dma_data_v_o,
	dma_data_yumi_i
);
	localparam [4:0] LB = 5&#39;b00000;
	localparam [4:0] LH = 5&#39;b00001;
	localparam [4:0] LW = 5&#39;b00010;
	localparam [4:0] LD = 5&#39;b00011;
	localparam [4:0] LBU = 5&#39;b00100;
	localparam [4:0] LHU = 5&#39;b00101;
	localparam [4:0] LWU = 5&#39;b00110;
	localparam [4:0] SB = 5&#39;b01000;
	localparam [4:0] SH = 5&#39;b01001;
	localparam [4:0] SW = 5&#39;b01010;
	localparam [4:0] SD = 5&#39;b01011;
	localparam [4:0] SM = 5&#39;b01101;
	localparam [4:0] BLOCK_LD = 5&#39;b01110;
	localparam [4:0] TAGST = 5&#39;b10000;
	localparam [4:0] TAGFL = 5&#39;b10001;
	localparam [4:0] TAGLV = 5&#39;b10010;
	localparam [4:0] TAGLA = 5&#39;b10011;
	localparam [4:0] AFL = 5&#39;b11000;
	localparam [4:0] AFLINV = 5&#39;b11001;
	localparam [4:0] AINV = 5&#39;b11010;
	localparam [4:0] ALOCK = 5&#39;b11011;
	localparam [4:0] AUNLOCK = 5&#39;b11100;
	localparam [2:0] e_tag_read = 0;
	localparam [2:0] e_tag_store = 1;
	localparam [2:0] e_tag_set_tag = 2;
	localparam [2:0] e_tag_set_tag_and_lock = 3;
	localparam [2:0] e_tag_invalidate = 4;
	localparam [2:0] e_tag_lock = 5;
	localparam [2:0] e_tag_unlock = 6;
	localparam [2:0] e_stat_read = 0;
	localparam [2:0] e_stat_clear_dirty = 1;
	localparam [2:0] e_stat_set_lru = 2;
	localparam [2:0] e_stat_set_lru_and_dirty = 3;
	localparam [2:0] e_stat_set_lru_and_clear_dirty = 4;
	localparam [2:0] e_stat_reset = 5;
	localparam [1:0] e_miss_fifo_dequeue = 0;
	localparam [1:0] e_miss_fifo_skip = 1;
	localparam [1:0] e_miss_fifo_invalidate = 2;
	localparam [3:0] MHU_IDLE = 0;
	localparam [3:0] MGMT_OP = 1;
	localparam [3:0] SEND_MGMT_DMA = 2;
	localparam [3:0] WAIT_MGMT_DMA = 3;
	localparam [3:0] READ_TAG1 = 4;
	localparam [3:0] SEND_DMA_REQ1 = 5;
	localparam [3:0] WAIT_DMA_DONE = 6;
	localparam [3:0] DEQUEUE_MODE = 7;
	localparam [3:0] READ_TAG2 = 8;
	localparam [3:0] SEND_DMA_REQ2 = 9;
	localparam [3:0] SCAN_MODE = 10;
	localparam [3:0] RECOVER = 11;
	parameter _sv2v_width_id_width_p = 24;
	parameter [_sv2v_width_id_width_p - 1:0] id_width_p = &#34;inv&#34;;
	parameter _sv2v_width_addr_width_p = 24;
	parameter [_sv2v_width_addr_width_p - 1:0] addr_width_p = &#34;inv&#34;;
	parameter _sv2v_width_data_width_p = 24;
	parameter [_sv2v_width_data_width_p - 1:0] data_width_p = &#34;inv&#34;;
	parameter _sv2v_width_sets_p = 24;
	parameter [_sv2v_width_sets_p - 1:0] sets_p = &#34;inv&#34;;
	parameter _sv2v_width_ways_p = 24;
	parameter [_sv2v_width_ways_p - 1:0] ways_p = &#34;inv&#34;;
	parameter _sv2v_width_block_size_in_words_p = 24;
	parameter [_sv2v_width_block_size_in_words_p - 1:0] block_size_in_words_p = &#34;inv&#34;;
	parameter _sv2v_width_miss_fifo_els_p = 24;
	parameter [_sv2v_width_miss_fifo_els_p - 1:0] miss_fifo_els_p = &#34;inv&#34;;
	parameter cache_pkt_width_lp = (((5 + id_width_p) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3);
	parameter dma_pkt_width_lp = 1 + addr_width_p;
	input clk_i;
	input reset_i;
	input v_i;
	input [cache_pkt_width_lp - 1:0] cache_pkt_i;
	output wire ready_o;
	output reg v_o;
	output reg [id_width_p - 1:0] id_o;
	output reg [data_width_p - 1:0] data_o;
	input yumi_i;
	output wire [dma_pkt_width_lp - 1:0] dma_pkt_o;
	output wire dma_pkt_v_o;
	input dma_pkt_yumi_i;
	input [data_width_p - 1:0] dma_data_i;
	input dma_data_v_i;
	output wire dma_data_ready_o;
	output wire [data_width_p - 1:0] dma_data_o;
	output wire dma_data_v_o;
	input dma_data_yumi_i;
	localparam lg_ways_lp = (ways_p == 1 ? 1 : $clog2(ways_p));
	localparam lg_sets_lp = (sets_p == 1 ? 1 : $clog2(sets_p));
	localparam lg_block_size_in_words_lp = (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p));
	localparam byte_sel_width_lp = ((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3));
	localparam tag_width_lp = ((addr_width_p - lg_sets_lp) - lg_block_size_in_words_lp) - byte_sel_width_lp;
	wire stall = v_o &amp; ~yumi_i;
	wire [((((id_width_p + 5) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] cache_pkt;
	assign cache_pkt = cache_pkt_i;
	wire [16:0] decode;
	bsg_cache_non_blocking_decode decode0(
		.opcode_i(cache_pkt[5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))-:((5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))) &gt;= (addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3))) ? ((5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))) - (addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3)))) + 1 : ((addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3))) - (5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))))) + 1)]),
		.decode_o(decode)
	);
	wire [(((((5 + ((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3))) + (ways_p == 1 ? 1 : $clog2(ways_p))) + ((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p)))) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] tl_data_mem_pkt_lo;
	wire tl_data_mem_pkt_v_lo;
	reg tl_data_mem_pkt_ready_li;
	wire tl_block_loading;
	wire [((3 + (ways_p == 1 ? 1 : $clog2(ways_p))) + (sets_p == 1 ? 1 : $clog2(sets_p))) - 1:0] tl_stat_mem_pkt_lo;
	wire tl_stat_mem_pkt_v_lo;
	reg tl_stat_mem_pkt_ready_li;
	wire [((((6 + id_width_p) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] tl_miss_fifo_entry_lo;
	wire tl_miss_fifo_v_lo;
	wire tl_miss_fifo_ready_li;
	wire mgmt_v_lo;
	wire [ways_p - 1:0] valid_tl_lo;
	wire [ways_p - 1:0] lock_tl_lo;
	wire [(ways_p * tag_width_lp) - 1:0] tag_tl_lo;
	wire [16:0] decode_tl_lo;
	wire [addr_width_p - 1:0] addr_tl_lo;
	wire [id_width_p - 1:0] id_tl_lo;
	wire [data_width_p - 1:0] data_tl_lo;
	wire [lg_ways_lp - 1:0] tag_hit_way_lo;
	wire tag_hit_found_lo;
	wire mgmt_yumi_li;
	wire [((((ways_p == 1 ? 1 : $clog2(ways_p)) + (sets_p == 1 ? 1 : $clog2(sets_p))) + data_width_p) + tag_width_lp) + 2:0] mhu_tag_mem_pkt_lo;
	wire mhu_tag_mem_pkt_v_lo;
	wire mhu_idle;
	wire mhu_recover;
	wire [lg_ways_lp - 1:0] curr_mhu_way_id;
	wire [lg_sets_lp - 1:0] curr_mhu_index;
	wire curr_mhu_v;
	wire [lg_ways_lp - 1:0] curr_dma_way_id;
	wire [lg_sets_lp - 1:0] curr_dma_index;
	wire curr_dma_v;
	bsg_cache_non_blocking_tl_stage #(
		.id_width_p(id_width_p),
		.addr_width_p(addr_width_p),
		.data_width_p(data_width_p),
		.ways_p(ways_p),
		.sets_p(sets_p),
		.block_size_in_words_p(block_size_in_words_p)
	) tl0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.v_i(v_i),
		.id_i(cache_pkt[id_width_p + (5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))))-:((id_width_p + (5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))))) &gt;= (5 + (addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3)))) ? ((id_width_p + (5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))))) - (5 + (addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3))))) + 1 : ((5 + (addr_width_p + (data_width_p + (data_width_p &gt;&gt; 3)))) - (id_width_p + (5 + (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))) + 1)]),
		.addr_i(cache_pkt[addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))-:((addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))) &gt;= (data_width_p + (data_width_p &gt;&gt; 3)) ? ((addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1))) - (data_width_p + (data_width_p &gt;&gt; 3))) + 1 : ((data_width_p + (data_width_p &gt;&gt; 3)) - (addr_width_p + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))) + 1)]),
		.data_i(cache_pkt[data_width_p + ((data_width_p &gt;&gt; 3) - 1)-:((data_width_p + ((data_width_p &gt;&gt; 3) - 1)) &gt;= (data_width_p &gt;&gt; 3) ? ((data_width_p + ((data_width_p &gt;&gt; 3) - 1)) - (data_width_p &gt;&gt; 3)) + 1 : ((data_width_p &gt;&gt; 3) - (data_width_p + ((data_width_p &gt;&gt; 3) - 1))) + 1)]),
		.mask_i(cache_pkt[(data_width_p &gt;&gt; 3) - 1-:data_width_p &gt;&gt; 3]),
		.decode_i(decode),
		.ready_o(ready_o),
		.data_mem_pkt_v_o(tl_data_mem_pkt_v_lo),
		.data_mem_pkt_o(tl_data_mem_pkt_lo),
		.data_mem_pkt_ready_i(tl_data_mem_pkt_ready_li),
		.block_loading_o(tl_block_loading),
		.stat_mem_pkt_v_o(tl_stat_mem_pkt_v_lo),
		.stat_mem_pkt_o(tl_stat_mem_pkt_lo),
		.stat_mem_pkt_ready_i(tl_stat_mem_pkt_ready_li),
		.miss_fifo_v_o(tl_miss_fifo_v_lo),
		.miss_fifo_entry_o(tl_miss_fifo_entry_lo),
		.miss_fifo_ready_i(tl_miss_fifo_ready_li),
		.mgmt_v_o(mgmt_v_lo),
		.valid_tl_o(valid_tl_lo),
		.lock_tl_o(lock_tl_lo),
		.tag_tl_o(tag_tl_lo),
		.decode_tl_o(decode_tl_lo),
		.addr_tl_o(addr_tl_lo),
		.id_tl_o(id_tl_lo),
		.data_tl_o(data_tl_lo),
		.tag_hit_way_o(tag_hit_way_lo),
		.tag_hit_found_o(tag_hit_found_lo),
		.mgmt_yumi_i(mgmt_yumi_li),
		.mhu_tag_mem_pkt_v_i(mhu_tag_mem_pkt_v_lo),
		.mhu_tag_mem_pkt_i(mhu_tag_mem_pkt_lo),
		.mhu_idle_i(mhu_idle),
		.recover_i(mhu_recover),
		.curr_dma_way_id_i(curr_dma_way_id),
		.curr_dma_index_i(curr_dma_index),
		.curr_dma_v_i(curr_dma_v),
		.curr_mhu_way_id_i(curr_mhu_way_id),
		.curr_mhu_index_i(curr_mhu_index),
		.curr_mhu_v_i(curr_mhu_v)
	);
	wire [((((6 + id_width_p) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] miss_fifo_data_li;
	wire miss_fifo_v_li;
	wire miss_fifo_ready_lo;
	wire [((((6 + id_width_p) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] miss_fifo_data_lo;
	wire miss_fifo_v_lo;
	wire miss_fifo_yumi_li;
	wire miss_fifo_scan_not_dq_li;
	wire [1:0] miss_fifo_yumi_op_li;
	wire miss_fifo_rollback_li;
	wire miss_fifo_empty_lo;
	bsg_cache_non_blocking_miss_fifo #(
		.width_p((((6 + id_width_p) + addr_width_p) + data_width_p) + (data_width_p &gt;&gt; 3)),
		.els_p(miss_fifo_els_p)
	) miss_fifo0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.v_i(miss_fifo_v_li),
		.data_i(miss_fifo_data_li),
		.ready_o(miss_fifo_ready_lo),
		.v_o(miss_fifo_v_lo),
		.data_o(miss_fifo_data_lo),
		.yumi_i(miss_fifo_yumi_li),
		.yumi_op_i(miss_fifo_yumi_op_li),
		.scan_not_dq_i(miss_fifo_scan_not_dq_li),
		.rollback_i(miss_fifo_rollback_li),
		.empty_o(miss_fifo_empty_lo)
	);
	assign miss_fifo_v_li = tl_miss_fifo_v_lo;
	assign miss_fifo_data_li = tl_miss_fifo_entry_lo;
	assign tl_miss_fifo_ready_li = miss_fifo_ready_lo;
	reg [(((((5 + ((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3))) + (ways_p == 1 ? 1 : $clog2(ways_p))) + ((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p)))) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] data_mem_pkt_li;
	reg data_mem_v_li;
	wire [data_width_p - 1:0] data_mem_data_lo;
	bsg_cache_non_blocking_data_mem #(
		.data_width_p(data_width_p),
		.ways_p(ways_p),
		.sets_p(sets_p),
		.block_size_in_words_p(block_size_in_words_p)
	) data_mem0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.v_i(data_mem_v_li),
		.data_mem_pkt_i(data_mem_pkt_li),
		.data_o(data_mem_data_lo)
	);
	reg dma_read_en;
	wire dma_read_en_r;
	wire [data_width_p - 1:0] dma_read_data_r;
	bsg_dff_reset #(.width_p(1)) dma_read_en_dff(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.data_i(dma_read_en),
		.data_o(dma_read_en_r)
	);
	bsg_dff_en_bypass #(.width_p(data_width_p)) dma_read_buffer(
		.clk_i(clk_i),
		.en_i(dma_read_en_r),
		.data_i(data_mem_data_lo),
		.data_o(dma_read_data_r)
	);
	reg load_read_en;
	wire load_read_en_r;
	wire [data_width_p - 1:0] load_read_data_r;
	bsg_dff_reset #(.width_p(1)) load_read_en_eff(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.data_i(load_read_en),
		.data_o(load_read_en_r)
	);
	bsg_dff_en_bypass #(.width_p(data_width_p)) load_read_buffer(
		.clk_i(clk_i),
		.en_i(load_read_en_r),
		.data_i(data_mem_data_lo),
		.data_o(load_read_data_r)
	);
	reg [((3 + (ways_p == 1 ? 1 : $clog2(ways_p))) + (sets_p == 1 ? 1 : $clog2(sets_p))) - 1:0] stat_mem_pkt_li;
	reg stat_mem_v_li;
	wire [ways_p - 1:0] dirty_lo;
	wire [ways_p - 2:0] lru_bits_lo;
	bsg_cache_non_blocking_stat_mem #(
		.ways_p(ways_p),
		.sets_p(sets_p)
	) stat_mem0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.v_i(stat_mem_v_li),
		.stat_mem_pkt_i(stat_mem_pkt_li),
		.dirty_o(dirty_lo),
		.lru_bits_o(lru_bits_lo)
	);
	wire [(((((5 + ((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3))) + (ways_p == 1 ? 1 : $clog2(ways_p))) + ((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p)))) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] mhu_data_mem_pkt_lo;
	wire [id_width_p - 1:0] mhu_data_mem_pkt_id_lo;
	wire mhu_data_mem_pkt_v_lo;
	reg mhu_data_mem_pkt_yumi_li;
	wire [((3 + (ways_p == 1 ? 1 : $clog2(ways_p))) + (sets_p == 1 ? 1 : $clog2(sets_p))) - 1:0] mhu_stat_mem_pkt_lo;
	wire mhu_stat_mem_pkt_v_lo;
	wire [(((((ways_p == 1 ? 1 : $clog2(ways_p)) + (sets_p == 1 ? 1 : $clog2(sets_p))) + 2) + tag_width_lp) + tag_width_lp) - 1:0] dma_cmd_lo;
	wire dma_cmd_v_lo;
	wire [(((((ways_p == 1 ? 1 : $clog2(ways_p)) + (sets_p == 1 ? 1 : $clog2(sets_p))) + 2) + tag_width_lp) + tag_width_lp) - 1:0] dma_cmd_return_li;
	wire dma_done_li;
	wire dma_pending_li;
	wire dma_ack_lo;
	wire mgmt_data_v_lo;
	wire [data_width_p - 1:0] mgmt_data_lo;
	wire [id_width_p - 1:0] mgmt_id_lo;
	reg mgmt_data_yumi_li;
	bsg_cache_non_blocking_mhu #(
		.id_width_p(id_width_p),
		.addr_width_p(addr_width_p),
		.data_width_p(data_width_p),
		.ways_p(ways_p),
		.sets_p(sets_p),
		.block_size_in_words_p(block_size_in_words_p)
	) mhu0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.mgmt_v_i(mgmt_v_lo),
		.mgmt_yumi_o(mgmt_yumi_li),
		.mgmt_data_v_o(mgmt_data_v_lo),
		.mgmt_data_o(mgmt_data_lo),
		.mgmt_id_o(mgmt_id_lo),
		.mgmt_data_yumi_i(mgmt_data_yumi_li),
		.decode_tl_i(decode_tl_lo),
		.addr_tl_i(addr_tl_lo),
		.id_tl_i(id_tl_lo),
		.idle_o(mhu_idle),
		.recover_o(mhu_recover),
		.tl_block_loading_i(tl_block_loading),
		.data_mem_pkt_v_o(mhu_data_mem_pkt_v_lo),
		.data_mem_pkt_o(mhu_data_mem_pkt_lo),
		.data_mem_pkt_yumi_i(mhu_data_mem_pkt_yumi_li),
		.data_mem_pkt_id_o(mhu_data_mem_pkt_id_lo),
		.stat_mem_pkt_v_o(mhu_stat_mem_pkt_v_lo),
		.stat_mem_pkt_o(mhu_stat_mem_pkt_lo),
		.dirty_i(dirty_lo),
		.lru_bits_i(lru_bits_lo),
		.tag_mem_pkt_v_o(mhu_tag_mem_pkt_v_lo),
		.tag_mem_pkt_o(mhu_tag_mem_pkt_lo),
		.valid_tl_i(valid_tl_lo),
		.lock_tl_i(lock_tl_lo),
		.tag_tl_i(tag_tl_lo),
		.tag_hit_way_i(tag_hit_way_lo),
		.tag_hit_found_i(tag_hit_found_lo),
		.curr_mhu_way_id_o(curr_mhu_way_id),
		.curr_mhu_index_o(curr_mhu_index),
		.curr_mhu_v_o(curr_mhu_v),
		.miss_fifo_v_i(miss_fifo_v_lo),
		.miss_fifo_entry_i(miss_fifo_data_lo),
		.miss_fifo_yumi_o(miss_fifo_yumi_li),
		.miss_fifo_yumi_op_o(miss_fifo_yumi_op_li),
		.miss_fifo_scan_not_dq_o(miss_fifo_scan_not_dq_li),
		.miss_fifo_rollback_o(miss_fifo_rollback_li),
		.miss_fifo_empty_i(miss_fifo_empty_lo),
		.dma_cmd_o(dma_cmd_lo),
		.dma_cmd_v_o(dma_cmd_v_lo),
		.dma_cmd_return_i(dma_cmd_return_li),
		.dma_done_i(dma_done_li),
		.dma_pending_i(dma_pending_li),
		.dma_ack_o(dma_ack_lo)
	);
	wire dma_data_mem_pkt_v_lo;
	wire [(((((5 + ((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3))) + (ways_p == 1 ? 1 : $clog2(ways_p))) + ((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p)))) + data_width_p) + (data_width_p &gt;&gt; 3)) - 1:0] dma_data_mem_pkt_lo;
	bsg_cache_non_blocking_dma #(
		.addr_width_p(addr_width_p),
		.data_width_p(data_width_p),
		.block_size_in_words_p(block_size_in_words_p),
		.sets_p(sets_p),
		.ways_p(ways_p)
	) dma0(
		.clk_i(clk_i),
		.reset_i(reset_i),
		.dma_cmd_i(dma_cmd_lo),
		.dma_cmd_v_i(dma_cmd_v_lo),
		.dma_cmd_return_o(dma_cmd_return_li),
		.done_o(dma_done_li),
		.pending_o(dma_pending_li),
		.ack_i(dma_ack_lo),
		.curr_dma_way_id_o(curr_dma_way_id),
		.curr_dma_index_o(curr_dma_index),
		.curr_dma_v_o(curr_dma_v),
		.data_mem_pkt_v_o(dma_data_mem_pkt_v_lo),
		.data_mem_pkt_o(dma_data_mem_pkt_lo),
		.data_mem_data_i(dma_read_data_r),
		.dma_pkt_o(dma_pkt_o),
		.dma_pkt_v_o(dma_pkt_v_o),
		.dma_pkt_yumi_i(dma_pkt_yumi_i),
		.dma_data_i(dma_data_i),
		.dma_data_v_i(dma_data_v_i),
		.dma_data_ready_o(dma_data_ready_o),
		.dma_data_o(dma_data_o),
		.dma_data_v_o(dma_data_v_o),
		.dma_data_yumi_i(dma_data_yumi_i)
	);
	always @(*) begin
		data_mem_v_li = 1&#39;b0;
		data_mem_pkt_li = dma_data_mem_pkt_lo;
		mhu_data_mem_pkt_yumi_li = 1&#39;b0;
		tl_data_mem_pkt_ready_li = 1&#39;b0;
		dma_read_en = 1&#39;b0;
		load_read_en = 1&#39;b0;
		if (dma_data_mem_pkt_v_lo) begin
			data_mem_pkt_li = dma_data_mem_pkt_lo;
			data_mem_v_li = 1&#39;b1;
			dma_read_en = ~dma_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))];
		end
		else if (mhu_data_mem_pkt_v_lo) begin
			data_mem_pkt_li = mhu_data_mem_pkt_lo;
			data_mem_v_li = ~stall;
			mhu_data_mem_pkt_yumi_li = ~stall;
			load_read_en = ~mhu_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))] &amp; ~stall;
		end
		else begin
			data_mem_pkt_li = tl_data_mem_pkt_lo;
			data_mem_v_li = tl_data_mem_pkt_v_lo &amp; ~stall;
			tl_data_mem_pkt_ready_li = ~stall;
			load_read_en = (~tl_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))] &amp; tl_data_mem_pkt_v_lo) &amp; ~stall;
		end
	end
	always @(*) begin
		stat_mem_v_li = 1&#39;b0;
		stat_mem_pkt_li = mhu_stat_mem_pkt_lo;
		tl_stat_mem_pkt_ready_li = 1&#39;b0;
		if (mhu_stat_mem_pkt_v_lo) begin
			stat_mem_v_li = 1&#39;b1;
			stat_mem_pkt_li = mhu_stat_mem_pkt_lo;
		end
		else begin
			tl_stat_mem_pkt_ready_li = ~stall;
			stat_mem_pkt_li = tl_stat_mem_pkt_lo;
			stat_mem_v_li = tl_stat_mem_pkt_v_lo &amp; ~stall;
		end
	end
	reg [data_width_p - 1:0] mgmt_data_r;
	reg [data_width_p - 1:0] mgmt_data_n;
	reg [id_width_p - 1:0] out_id_r;
	reg [id_width_p - 1:0] out_id_n;
	reg mgmt_data_v_r;
	reg mgmt_data_v_n;
	reg store_v_r;
	reg store_v_n;
	reg load_v_r;
	reg load_v_n;
	always @(*) begin
		if (stall) begin
			out_id_n = out_id_r;
			mgmt_data_n = mgmt_data_r;
			store_v_n = store_v_r;
			load_v_n = load_v_r;
			mgmt_data_v_n = mgmt_data_v_r;
			mgmt_data_yumi_li = 1&#39;b0;
		end
		else begin
			out_id_n = out_id_r;
			mgmt_data_n = mgmt_data_r;
			store_v_n = 1&#39;b0;
			load_v_n = 1&#39;b0;
			mgmt_data_v_n = 1&#39;b0;
			mgmt_data_yumi_li = 1&#39;b0;
			if (mgmt_data_v_lo) begin
				mgmt_data_n = mgmt_data_lo;
				out_id_n = mgmt_id_lo;
				mgmt_data_v_n = mgmt_data_v_lo;
				mgmt_data_yumi_li = mgmt_data_v_lo;
			end
			else if (mhu_data_mem_pkt_yumi_li) begin
				out_id_n = mhu_data_mem_pkt_id_lo;
				store_v_n = mhu_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))];
				load_v_n = ~mhu_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))];
			end
			else if (tl_data_mem_pkt_ready_li &amp; tl_data_mem_pkt_v_lo) begin
				out_id_n = id_tl_lo;
				store_v_n = tl_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))];
				load_v_n = ~tl_data_mem_pkt_lo[5 + (((data_width_p &gt;&gt; 3) == 1 ? 1 : $clog2(data_width_p &gt;&gt; 3)) + ((ways_p == 1 ? 1 : $clog2(ways_p)) + (((sets_p == 1 ? 1 : $clog2(sets_p)) + (block_size_in_words_p == 1 ? 1 : $clog2(block_size_in_words_p))) + (data_width_p + ((data_width_p &gt;&gt; 3) - 1)))))];
			end
		end
		if (mgmt_data_v_r)
			data_o = mgmt_data_r;
		else if (load_v_r)
			data_o = load_read_data_r;
		else
			data_o = {data_width_p {1&#39;sb0}};
		id_o = out_id_r;
		v_o = (mgmt_data_v_r | store_v_r) | load_v_r;
	end
	always @(posedge clk_i)
		if (reset_i) begin
			mgmt_data_r &lt;= {data_width_p {1&#39;sb0}};
			out_id_r &lt;= {id_width_p {1&#39;sb0}};
			mgmt_data_v_r &lt;= 1&#39;b0;
			store_v_r &lt;= 1&#39;b0;
			load_v_r &lt;= 1&#39;b0;
		end
		else begin
			mgmt_data_r &lt;= mgmt_data_n;
			out_id_r &lt;= out_id_n;
			mgmt_data_v_r &lt;= mgmt_data_v_n;
			store_v_r &lt;= store_v_n;
			load_v_r &lt;= load_v_n;
		end
endmodule

</pre>
</body>