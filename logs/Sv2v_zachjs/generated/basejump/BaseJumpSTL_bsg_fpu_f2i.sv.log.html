<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from basejump
rc: 0 (means success: 1)
tags: basejump
incdirs: /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc /tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_fpu
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_fpu/bsg_fpu_f2i.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_fpu/bsg_fpu_f2i.v</a>
defines: 
time_elapsed: 0.462s
ram usage: 13640 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_noc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_misc -I/tmpfs/src/github/sv-tests/third_party/cores/basejump_stl/bsg_fpu <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_non_blocking_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_cache/bsg_cache_pkg.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_misc/bsg_defines.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_misc/bsg_defines.v</a> <a href="../../../../third_party/cores/basejump_stl/bsg_fpu/bsg_fpu_f2i.v.html" target="file-frame">third_party/cores/basejump_stl/bsg_fpu/bsg_fpu_f2i.v</a>
module bsg_fpu_f2i (
	a_i,
	signed_i,
	z_o,
	invalid_o
);
	parameter _sv2v_width_e_p = 24;
	parameter [_sv2v_width_e_p - 1:0] e_p = &#34;inv&#34;;
	parameter _sv2v_width_m_p = 24;
	parameter [_sv2v_width_m_p - 1:0] m_p = &#34;inv&#34;;
	localparam width_lp = (e_p + m_p) + 1;
	localparam bias_lp = {1&#39;b0, {e_p - 1 {1&#39;b1}}};
	input [width_lp - 1:0] a_i;
	input signed_i;
	output reg [width_lp - 1:0] z_o;
	output reg invalid_o;
	wire sign;
	wire [e_p - 1:0] exp;
	wire [m_p - 1:0] mantissa;
	wire zero;
	wire nan;
	wire infty;
	bsg_fpu_preprocess #(
		.e_p(e_p),
		.m_p(m_p)
	) preprocess(
		.a_i(a_i),
		.zero_o(zero),
		.nan_o(nan),
		.sig_nan_o(),
		.infty_o(infty),
		.exp_zero_o(),
		.man_zero_o(),
		.denormal_o(),
		.sign_o(sign),
		.exp_o(exp),
		.man_o(mantissa)
	);
	wire exp_too_big;
	wire exp_too_small;
	assign exp_too_big = (signed_i ? exp &gt; ((bias_lp + width_lp) - 2) : exp &gt; ((bias_lp + width_lp) - 1));
	assign exp_too_small = exp &lt; bias_lp;
	wire [width_lp - 1:0] preshift;
	wire [e_p - 1:0] shamt;
	wire [width_lp - 1:0] shifted;
	assign preshift = (signed_i ? {1&#39;b0, 1&#39;b1, mantissa, {(width_lp - 2) - m_p {1&#39;b0}}} : {1&#39;b1, mantissa, {(width_lp - 1) - m_p {1&#39;b0}}});
	function automatic [e_p - 1:0] sv2v_cast_C56CD;
		input reg [e_p - 1:0] inp;
		sv2v_cast_C56CD = inp;
	endfunction
	assign shamt = (signed_i ? sv2v_cast_C56CD(((bias_lp + width_lp) - 2) - exp) : sv2v_cast_C56CD(((bias_lp + width_lp) - 1) - exp));
	assign shifted = preshift &gt;&gt; shamt[(width_lp == 1 ? 1 : $clog2(width_lp)):0];
	wire [width_lp - 1:0] inverted;
	wire [width_lp - 1:0] post_round;
	assign inverted = {width_lp {signed_i &amp; sign}} ^ shifted;
	assign post_round = inverted + sign;
	always @(*)
		if (nan) begin
			z_o = (signed_i ? {1&#39;b0, {width_lp - 1 {1&#39;b1}}} : {width_lp {1&#39;b1}});
			invalid_o = 1&#39;b1;
		end
		else if (infty) begin
			z_o = (sign ? {signed_i, {width_lp - 1 {1&#39;b0}}} : {~signed_i, {width_lp - 1 {1&#39;b1}}});
			invalid_o = 1&#39;b1;
		end
		else if (~signed_i &amp; sign) begin
			z_o = {width_lp {1&#39;sb0}};
			invalid_o = 1&#39;b1;
		end
		else if (zero) begin
			z_o = {width_lp {1&#39;sb0}};
			invalid_o = 1&#39;b0;
		end
		else if (exp_too_big) begin
			z_o = (sign ? {1&#39;b1, {width_lp - 1 {1&#39;b0}}} : {1&#39;b0, {width_lp - 1 {1&#39;b1}}});
			invalid_o = 1&#39;b1;
		end
		else if (exp_too_small) begin
			z_o = {width_lp {1&#39;sb0}};
			invalid_o = 1&#39;b0;
		end
		else begin
			z_o = post_round;
			invalid_o = 1&#39;b0;
		end
endmodule

</pre>
</body>