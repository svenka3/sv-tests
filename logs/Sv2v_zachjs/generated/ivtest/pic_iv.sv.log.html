<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Test imported from ivtest
rc: 0 (means success: 1)
tags: ivtest
incdirs: /tmpfs/src/github/sv-tests/third_party/tests/ivtest /tmpfs/src/github/sv-tests/third_party/tests/ivtest/ivltests
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/tests/ivtest/contrib/pic.v.html" target="file-frame">third_party/tests/ivtest/contrib/pic.v</a>
defines: 
time_elapsed: 0.909s
ram usage: 24756 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/tests/ivtest -I/tmpfs/src/github/sv-tests/third_party/tests/ivtest/ivltests <a href="../../../../third_party/tests/ivtest/contrib/pic.v.html" target="file-frame">third_party/tests/ivtest/contrib/pic.v</a>
module picalu (
	op,
	a,
	b,
	y,
	cin,
	cout,
	zout
);
	input [3:0] op;
	input [7:0] a;
	input [7:0] b;
	output [7:0] y;
	input cin;
	output cout;
	output zout;
	reg addercout;
	parameter ALUOP_ADD = 4&#39;b0000;
	parameter ALUOP_SUB = 4&#39;b1000;
	parameter ALUOP_AND = 4&#39;b0001;
	parameter ALUOP_OR = 4&#39;b0010;
	parameter ALUOP_XOR = 4&#39;b0011;
	parameter ALUOP_COM = 4&#39;b0100;
	parameter ALUOP_ROR = 4&#39;b0101;
	parameter ALUOP_ROL = 4&#39;b0110;
	parameter ALUOP_SWAP = 4&#39;b0111;
	always @(a or b or cin or op)
		case (op)
			ALUOP_ADD: {addercout, y} &lt;= a + b;
			ALUOP_SUB: {addercout, y} &lt;= a - b;
			ALUOP_AND: {addercout, y} &lt;= {1&#39;b0, a &amp; b};
			ALUOP_OR: {addercout, y} &lt;= {1&#39;b0, a | b};
			ALUOP_XOR: {addercout, y} &lt;= {1&#39;b0, a ^ b};
			ALUOP_COM: {addercout, y} &lt;= {1&#39;b0, ~a};
			ALUOP_ROR: {addercout, y} &lt;= {a[0], cin, a[7:1]};
			ALUOP_ROL: {addercout, y} &lt;= {a[7], a[6:0], cin};
			ALUOP_SWAP: {addercout, y} &lt;= {1&#39;b0, a[3:0], a[7:4]};
			default: {addercout, y} &lt;= {1&#39;b0, 8&#39;h00};
		endcase
	always @(y) zout &lt;= y == 8&#39;h00;
	always @(addercout or op)
		if (op == ALUOP_SUB)
			cout &lt;= ~addercout;
		else
			cout &lt;= addercout;
endmodule
module piccpu (
	clk,
	reset,
	paddr,
	pdata,
	portain,
	portbout,
	portcout,
	debugw,
	debugpc,
	debuginst,
	debugstatus
);
	input clk;
	input reset;
	output [8:0] paddr;
	input [11:0] pdata;
	input [7:0] portain;
	output [7:0] portbout;
	output [7:0] portcout;
	output [7:0] debugw;
	output [8:0] debugpc;
	output [11:0] debuginst;
	output [7:0] debugstatus;
	parameter RESET_VECTOR = 9&#39;h1ff;
	parameter INDF_ADDRESS = 3&#39;h0;
	parameter TMR0_ADDRESS = 3&#39;h1;
	parameter PCL_ADDRESS = 3&#39;h2;
	parameter STATUS_ADDRESS = 3&#39;h3;
	parameter FSR_ADDRESS = 3&#39;h4;
	parameter PORTA_ADDRESS = 3&#39;h5;
	parameter PORTB_ADDRESS = 3&#39;h6;
	parameter PORTC_ADDRESS = 3&#39;h7;
	parameter EXPADDRESS_LILADDER = 7&#39;h7f;
	reg [11:0] inst;
	reg [8:0] pc;
	reg [8:0] pcplus1;
	reg [1:0] stacklevel;
	reg [8:0] stack1;
	reg [8:0] stack2;
	reg [7:0] w;
	reg [7:0] status;
	reg [7:0] fsr;
	reg [7:0] tmr0;
	reg [7:0] prescaler;
	reg [7:0] option;
	reg [7:0] trisa;
	reg [7:0] trisb;
	reg [7:0] trisc;
	reg [7:0] porta;
	reg [7:0] portb;
	reg [7:0] portc;
	reg skip;
	reg [2:0] pcinsel;
	wire [7:0] k;
	wire [4:0] fsel;
	wire [8:0] longk;
	wire d;
	wire [2:0] b;
	reg [6:0] fileaddr;
	reg specialsel;
	reg regfilesel;
	reg expsel;
	wire [1:0] aluasel;
	wire [1:0] alubsel;
	wire [3:0] aluop;
	wire zwe;
	wire cwe;
	wire isoption;
	wire istris;
	wire fwe;
	wire wwe;
	reg [7:0] bd;
	reg [7:0] bdec;
	reg [7:0] regfilein;
	wire [7:0] regfileout;
	reg regfilewe;
	reg regfilere;
	reg [7:0] dbus;
	reg [7:0] sbus;
	reg [7:0] ebus;
	reg [7:0] alua;
	reg [7:0] alub;
	wire [7:0] aluout;
	wire alucin;
	wire alucout;
	wire aluz;
	parameter ALUASEL_W = 2&#39;b00;
	parameter ALUASEL_SBUS = 2&#39;b01;
	parameter ALUASEL_K = 2&#39;b10;
	parameter ALUASEL_BD = 2&#39;b11;
	parameter ALUBSEL_W = 2&#39;b00;
	parameter ALUBSEL_SBUS = 2&#39;b01;
	parameter ALUBSEL_K = 2&#39;b10;
	parameter ALUBSEL_1 = 2&#39;b11;
	parameter ALUOP_ADD = 4&#39;b0000;
	parameter ALUOP_SUB = 4&#39;b1000;
	parameter ALUOP_AND = 4&#39;b0001;
	parameter ALUOP_OR = 4&#39;b0010;
	parameter ALUOP_XOR = 4&#39;b0011;
	parameter ALUOP_COM = 4&#39;b0100;
	parameter ALUOP_ROR = 4&#39;b0101;
	parameter ALUOP_ROL = 4&#39;b0110;
	parameter ALUOP_SWAP = 4&#39;b0111;
	picregs regs(
		.clk(clk),
		.reset(reset),
		.we(regfilewe),
		.re(regfilere),
		.bank(fileaddr[6:5]),
		.location(fileaddr[4:0]),
		.din(regfilein),
		.dout(regfileout)
	);
	picalu alu(
		.op(aluop),
		.a(alua),
		.b(alub),
		.y(aluout),
		.cin(status[0]),
		.cout(alucout),
		.zout(aluz)
	);
	wire bdpol;
	picidec idec(
		.inst(inst),
		.aluasel(aluasel),
		.alubsel(alubsel),
		.aluop(aluop),
		.wwe(wwe),
		.fwe(fwe),
		.zwe(zwe),
		.cwe(cwe),
		.bdpol(bdpol),
		.option(isoption),
		.tris(istris)
	);
	assign debugw = w;
	assign debugpc = pc;
	assign debuginst = inst;
	assign debugstatus = status;
	always @(fsel or fsr)
		if (fsel == INDF_ADDRESS)
			fileaddr &lt;= fsr[6:0];
		else
			fileaddr &lt;= {fsr[6:5], fsel};
	always @(regfilesel or fwe) regfilewe &lt;= regfilesel &amp; fwe;
	always @(regfilesel or aluasel or alubsel) regfilere &lt;= regfilesel &amp; ((aluasel == ALUASEL_SBUS) | (alubsel == ALUBSEL_SBUS));
	always @(fileaddr)
		casex (fileaddr)
			7&#39;bxx00xxx: begin
				specialsel &lt;= 1&#39;b1;
				regfilesel &lt;= 1&#39;b0;
				expsel &lt;= 1&#39;b0;
			end
			7&#39;b1111111: begin
				specialsel &lt;= 1&#39;b0;
				regfilesel &lt;= 1&#39;b0;
				expsel &lt;= 1&#39;b1;
			end
			default: begin
				specialsel &lt;= 1&#39;b0;
				regfilesel &lt;= 1&#39;b1;
				expsel &lt;= 1&#39;b0;
			end
		endcase
	always @(fsel or fsr or tmr0 or pc or status or porta or portb or portc or regfileout or ebus or specialsel or regfilesel or expsel)
		if (specialsel)
			case (fsel[2:0])
				3&#39;h0: sbus &lt;= fsr;
				3&#39;h1: sbus &lt;= tmr0;
				3&#39;h2: sbus &lt;= pc[7:0];
				3&#39;h3: sbus &lt;= status;
				3&#39;h4: sbus &lt;= fsr;
				3&#39;h5: sbus &lt;= porta;
				3&#39;h6: sbus &lt;= portb;
				3&#39;h7: sbus &lt;= portc;
			endcase
		else if (expsel)
			sbus &lt;= ebus;
		else if (regfilesel)
			sbus &lt;= regfileout;
		else
			sbus &lt;= 8&#39;h00;
	always @(aluout) dbus &lt;= aluout;
	always @(dbus) regfilein &lt;= dbus;
	always @(pc) paddr = pc;
	assign k = inst[7:0];
	assign fsel = inst[4:0];
	assign longk = inst[8:0];
	assign d = inst[5];
	assign b = inst[7:5];
	always @(b)
		case (b)
			3&#39;b000: bdec &lt;= 8&#39;b00000001;
			3&#39;b001: bdec &lt;= 8&#39;b00000010;
			3&#39;b010: bdec &lt;= 8&#39;b00000100;
			3&#39;b011: bdec &lt;= 8&#39;b00001000;
			3&#39;b100: bdec &lt;= 8&#39;b00010000;
			3&#39;b101: bdec &lt;= 8&#39;b00100000;
			3&#39;b110: bdec &lt;= 8&#39;b01000000;
			3&#39;b111: bdec &lt;= 8&#39;b10000000;
		endcase
	always @(bdec or bdpol) bd &lt;= bdec ^ bdpol;
	always @(posedge clk)
		if (reset)
			inst &lt;= 12&#39;h000;
		else if (skip == 1&#39;b1)
			inst &lt;= 12&#39;b000000000000;
		else
			inst &lt;= pdata;
	always @(inst or aluz)
		casex ({inst, aluz})
			13&#39;b10zzzzzzzzzzz: skip &lt;= 1&#39;b1;
			13&#39;b0110zzzzzzzz1: skip &lt;= 1&#39;b1;
			13&#39;b0111zzzzzzzz0: skip &lt;= 1&#39;b1;
			13&#39;b001011zzzzzz1: skip &lt;= 1&#39;b1;
			13&#39;b001111zzzzzz1: skip &lt;= 1&#39;b1;
			default: skip &lt;= 1&#39;b0;
		endcase
	always @(aluasel or w or sbus or k or bd)
		case (aluasel)
			2&#39;b00: alua &lt;= w;
			2&#39;b01: alua &lt;= sbus;
			2&#39;b10: alua &lt;= k;
			2&#39;b11: alua &lt;= bd;
		endcase
	always @(alubsel or w or sbus or k)
		case (alubsel)
			2&#39;b00: alub &lt;= w;
			2&#39;b01: alub &lt;= sbus;
			2&#39;b10: alub &lt;= k;
			2&#39;b11: alub &lt;= 8&#39;b00000001;
		endcase
	always @(posedge clk)
		if (reset)
			w &lt;= 8&#39;h00;
		else if (wwe)
			w &lt;= dbus;
	always @(posedge clk)
		if (reset)
			tmr0 &lt;= 8&#39;h00;
		else if ((fwe &amp; specialsel) &amp; (fsel == TMR0_ADDRESS))
			tmr0 &lt;= dbus;
		else
			case (option[2:0])
				3&#39;b000:
					if (~|(prescaler &amp; 8&#39;b00000001))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b001:
					if (~|(prescaler &amp; 8&#39;b00000011))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b010:
					if (~|(prescaler &amp; 8&#39;b00000111))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b011:
					if (~|(prescaler &amp; 8&#39;b00001111))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b100:
					if (~|(prescaler &amp; 8&#39;b00011111))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b101:
					if (~|(prescaler &amp; 8&#39;b00111111))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b110:
					if (~|(prescaler &amp; 8&#39;b01111111))
						tmr0 &lt;= tmr0 + 1;
				3&#39;b111:
					if (~|(prescaler &amp; 8&#39;b11111111))
						tmr0 &lt;= tmr0 + 1;
			endcase
	always @(posedge clk)
		if (reset)
			prescaler &lt;= 8&#39;h00;
		else
			prescaler &lt;= prescaler + 1;
	always @(posedge clk)
		if (reset)
			status &lt;= 8&#39;h00;
		else if ((fwe &amp; specialsel) &amp; (fsel == STATUS_ADDRESS))
			status &lt;= dbus;
		else
			status &lt;= {status[7], status[6], status[5], status[4], status[3], (zwe ? aluz : status[2]), status[1], (cwe ? alucout : status[0])};
	always @(posedge clk)
		if (reset)
			fsr &lt;= 8&#39;h00;
		else if ((fwe &amp; specialsel) &amp; (fsel == FSR_ADDRESS))
			fsr &lt;= dbus;
	always @(posedge clk)
		if (reset)
			option &lt;= 8&#39;h00;
		else if (isoption)
			option &lt;= dbus;
	always @(posedge clk)
		if (reset)
			porta &lt;= 8&#39;h00;
		else
			porta &lt;= portain;
	always @(posedge clk)
		if (reset)
			portb &lt;= 8&#39;h00;
		else if (((fwe &amp; specialsel) &amp; (fsel == PORTB_ADDRESS)) &amp; ~istris)
			portb &lt;= dbus;
	always @(portb) portbout &lt;= portb;
	always @(posedge clk)
		if (reset)
			portc &lt;= 8&#39;h00;
		else if (((fwe &amp; specialsel) &amp; (fsel == PORTC_ADDRESS)) &amp; ~istris)
			portc &lt;= dbus;
	always @(portc) portcout &lt;= portc;
	always @(posedge clk)
		if (reset)
			trisa &lt;= 8&#39;hff;
		else if (((fwe &amp; specialsel) &amp; (fsel == PORTA_ADDRESS)) &amp; istris)
			trisa &lt;= dbus;
	always @(posedge clk)
		if (reset)
			trisb &lt;= 8&#39;hff;
		else if (((fwe &amp; specialsel) &amp; (fsel == PORTB_ADDRESS)) &amp; istris)
			trisb &lt;= dbus;
	always @(posedge clk)
		if (reset)
			trisc &lt;= 8&#39;hff;
		else if (((fwe &amp; specialsel) &amp; (fsel == PORTC_ADDRESS)) &amp; istris)
			trisc &lt;= dbus;
	always @(pc) pcplus1 &lt;= pc + 1;
	parameter PC_SELECT_PCPLUS1 = 3&#39;b000;
	parameter PC_SELECT_K = 3&#39;b001;
	parameter PC_SELECT_STACK1 = 3&#39;b010;
	parameter PC_SELECT_STACK2 = 3&#39;b011;
	parameter PC_SELECT_DBUS = 3&#39;b100;
	parameter PC_SELECT_RESET_VECTOR = 3&#39;b101;
	always @(posedge clk)
		case (pcinsel)
			3&#39;b000: pc &lt;= pcplus1;
			3&#39;b001: pc &lt;= k;
			3&#39;b010: pc &lt;= stack1;
			3&#39;b011: pc &lt;= stack2;
			3&#39;b100: pc &lt;= dbus;
			3&#39;b101: pc &lt;= RESET_VECTOR;
			3&#39;b110: pc &lt;= pc;
			3&#39;b111: pc &lt;= pc;
		endcase
	always @(inst or stacklevel or reset)
		if (reset == 1&#39;b1)
			pcinsel &lt;= PC_SELECT_RESET_VECTOR;
		else
			casex ({inst, stacklevel})
				14&#39;b101zzzzzzzzzzz: pcinsel &lt;= PC_SELECT_K;
				14&#39;b1001zzzzzzzzzz: pcinsel &lt;= PC_SELECT_K;
				14&#39;b1000zzzzzzzz00: pcinsel &lt;= PC_SELECT_STACK1;
				14&#39;b1000zzzzzzzz01: pcinsel &lt;= PC_SELECT_STACK1;
				14&#39;b1000zzzzzzzz10: pcinsel &lt;= PC_SELECT_STACK2;
				14&#39;b1000zzzzzzzz11: pcinsel &lt;= PC_SELECT_STACK2;
				14&#39;b001000100010zz: pcinsel &lt;= PC_SELECT_DBUS;
				default: pcinsel &lt;= PC_SELECT_PCPLUS1;
			endcase
	always @(posedge clk)
		if (reset)
			stack1 &lt;= 9&#39;h000;
		else if (inst[11:8] == 4&#39;b1001)
			case (stacklevel)
				2&#39;b00: begin
					stack1 &lt;= pc;
					$display(&#34;Write to STACK1: %0h&#34;, pc);
				end
				2&#39;b01: begin
					stack2 &lt;= pc;
					$display(&#34;Write to STACK2: %0h&#34;, pc);
				end
				2&#39;b10:
					$display(&#34;Too many CALLs!!&#34;);
				2&#39;b11:
					$display(&#34;Too many CALLs!!&#34;);
			endcase
	always @(posedge clk)
		if (reset == 1&#39;b1)
			stacklevel &lt;= 2&#39;b00;
		else
			casex ({inst, stacklevel})
				14&#39;b1001zzzzzzzz00: stacklevel &lt;= 2&#39;b01;
				14&#39;b1001zzzzzzzz01: stacklevel &lt;= 2&#39;b10;
				14&#39;b1001zzzzzzzz10: stacklevel &lt;= 2&#39;b10;
				14&#39;b1001zzzzzzzz11: stacklevel &lt;= 2&#39;b00;
				14&#39;b1000zzzzzzzz00: stacklevel &lt;= 2&#39;b00;
				14&#39;b1000zzzzzzzz01: stacklevel &lt;= 2&#39;b00;
				14&#39;b1000zzzzzzzz10: stacklevel &lt;= 2&#39;b01;
				14&#39;b1000zzzzzzzz11: stacklevel &lt;= 2&#39;b10;
				default: stacklevel &lt;= stacklevel;
			endcase
	reg [3:0] special_peripheral_writeable_bits;
	reg [3:0] special_peripheral_readeable_bits;
	always @(posedge clk)
		if (reset)
			special_peripheral_writeable_bits &lt;= 4&#39;b0000;
		else if ((fwe &amp; expsel) &amp; (fileaddr == EXPADDRESS_LILADDER))
			special_peripheral_writeable_bits &lt;= dbus;
	always @(special_peripheral_writeable_bits) special_peripheral_readeable_bits &lt;= special_peripheral_writeable_bits + 1;
	always @(fileaddr or special_peripheral_readeable_bits)
		if (fileaddr == EXPADDRESS_LILADDER)
			ebus &lt;= special_peripheral_readeable_bits;
		else
			ebus &lt;= 8&#39;hff;
endmodule
module picidec (
	inst,
	aluasel,
	alubsel,
	aluop,
	wwe,
	fwe,
	zwe,
	cwe,
	bdpol,
	option,
	tris
);
	input [11:0] inst;
	output [1:0] aluasel;
	output [1:0] alubsel;
	output [3:0] aluop;
	output wwe;
	output fwe;
	output zwe;
	output cwe;
	output bdpol;
	output option;
	output tris;
	reg [14:0] decodes;
	assign {aluasel, alubsel, aluop, wwe, fwe, zwe, cwe, bdpol, tris, option} = decodes;
	always @(inst)
		casex (inst)
			12&#39;b000000000000: decodes &lt;= 15&#39;b000000000000000;
			12&#39;b0000001xxxxx: decodes &lt;= 15&#39;b000000100100000;
			12&#39;b000001000000: decodes &lt;= 15&#39;b000000111010000;
			12&#39;b0000011xxxxx: decodes &lt;= 15&#39;b000000110110000;
			12&#39;b0000100xxxxx: decodes &lt;= 15&#39;b010010001011000;
			12&#39;b0000101xxxxx: decodes &lt;= 15&#39;b010010000111000;
			12&#39;b0000110xxxxx: decodes &lt;= 15&#39;b011110001010000;
			12&#39;b0000111xxxxx: decodes &lt;= 15&#39;b011110000110000;
			12&#39;b0001000xxxxx: decodes &lt;= 15&#39;b000100101010000;
			12&#39;b0001001xxxxx: decodes &lt;= 15&#39;b000100100110000;
			12&#39;b0001010xxxxx: decodes &lt;= 15&#39;b000100011010000;
			12&#39;b0001011xxxxx: decodes &lt;= 15&#39;b000100010110000;
			12&#39;b0001100xxxxx: decodes &lt;= 15&#39;b000100111010000;
			12&#39;b0001101xxxxx: decodes &lt;= 15&#39;b000100110110000;
			12&#39;b0001110xxxxx: decodes &lt;= 15&#39;b000100001011000;
			12&#39;b0001111xxxxx: decodes &lt;= 15&#39;b000100000111000;
			12&#39;b0010000xxxxx: decodes &lt;= 15&#39;b010100101010000;
			12&#39;b0010001xxxxx: decodes &lt;= 15&#39;b010100100110000;
			12&#39;b0010010xxxxx: decodes &lt;= 15&#39;b010101001010000;
			12&#39;b0010011xxxxx: decodes &lt;= 15&#39;b010101000110000;
			12&#39;b0010100xxxxx: decodes &lt;= 15&#39;b011100001010000;
			12&#39;b0010101xxxxx: decodes &lt;= 15&#39;b011100000110000;
			12&#39;b0010110xxxxx: decodes &lt;= 15&#39;b011110001000000;
			12&#39;b0010111xxxxx: decodes &lt;= 15&#39;b011110000100000;
			12&#39;b0011000xxxxx: decodes &lt;= 15&#39;b010101011001000;
			12&#39;b0011001xxxxx: decodes &lt;= 15&#39;b010101010101000;
			12&#39;b0011010xxxxx: decodes &lt;= 15&#39;b010101101001000;
			12&#39;b0011011xxxxx: decodes &lt;= 15&#39;b010101100101000;
			12&#39;b0011100xxxxx: decodes &lt;= 15&#39;b010101111000000;
			12&#39;b0011101xxxxx: decodes &lt;= 15&#39;b010101110100000;
			12&#39;b0011110xxxxx: decodes &lt;= 15&#39;b011100001000000;
			12&#39;b0011111xxxxx: decodes &lt;= 15&#39;b011100000100000;
			12&#39;b0100xxxxxxxx: decodes &lt;= 15&#39;b110100010100100;
			12&#39;b0101xxxxxxxx: decodes &lt;= 15&#39;b110100100100000;
			12&#39;b0110xxxxxxxx: decodes &lt;= 15&#39;b110100010000000;
			12&#39;b0111xxxxxxxx: decodes &lt;= 15&#39;b110100010000000;
			12&#39;b000000000010: decodes &lt;= 15&#39;b000000100100001;
			12&#39;b000000000011: decodes &lt;= 15&#39;b000000000000000;
			12&#39;b000000000100: decodes &lt;= 15&#39;b000000000000000;
			12&#39;b000000000101: decodes &lt;= 15&#39;b000000000100010;
			12&#39;b000000000110: decodes &lt;= 15&#39;b000000100100010;
			12&#39;b000000000111: decodes &lt;= 15&#39;b000000100100010;
			12&#39;b1000xxxxxxxx: decodes &lt;= 15&#39;b101000101000000;
			12&#39;b1001xxxxxxxx: decodes &lt;= 15&#39;b101000100000000;
			12&#39;b101xxxxxxxxx: decodes &lt;= 15&#39;b101000100000000;
			12&#39;b1100xxxxxxxx: decodes &lt;= 15&#39;b101000101000000;
			12&#39;b1101xxxxxxxx: decodes &lt;= 15&#39;b001000101010000;
			12&#39;b1110xxxxxxxx: decodes &lt;= 15&#39;b001000011010000;
			12&#39;b1111xxxxxxxx: decodes &lt;= 15&#39;b001000111010000;
			default: decodes &lt;= 15&#39;b000000000000000;
		endcase
endmodule
module picregs (
	clk,
	reset,
	we,
	re,
	bank,
	location,
	din,
	dout
);
	input clk;
	input reset;
	input we;
	input re;
	input [1:0] bank;
	input [4:0] location;
	input [7:0] din;
	output [7:0] dout;
	integer index;
	reg [7:0] commonblockout;
	reg [7:0] highblock0out;
	reg [7:0] highblock1out;
	reg [7:0] highblock2out;
	reg [7:0] highblock3out;
	reg [7:0] commonblockin;
	reg [7:0] highblock0in;
	reg [7:0] highblock1in;
	reg [7:0] highblock2in;
	reg [7:0] highblock3in;
	reg commonblocksel;
	reg highblock0sel;
	reg highblock1sel;
	reg highblock2sel;
	reg highblock3sel;
	integer cycle_counter;
	initial cycle_counter = 0;
	always @(negedge clk) begin
		if (re)
			;
		if (we)
			;
		if (~reset)
			cycle_counter = cycle_counter + 1;
	end
	always @(bank or location or re or commonblockout or highblock0out or highblock1out or highblock2out or highblock3out)
		if (re) begin
			if (location[4:3] == 2&#39;b01)
				dout &lt;= commonblockout;
			else if (location[4])
				case (bank)
					2&#39;b00: dout &lt;= highblock0out;
					2&#39;b01: dout &lt;= highblock1out;
					2&#39;b10: dout &lt;= highblock2out;
					2&#39;b11: dout &lt;= highblock3out;
				endcase
			else
				dout &lt;= 8&#39;hff;
		end
		else
			dout &lt;= 8&#39;hff;
	always @(we or bank or location or reset)
		if (reset) begin
			commonblocksel &lt;= 1&#39;b0;
			highblock0sel &lt;= 1&#39;b0;
			highblock1sel &lt;= 1&#39;b0;
			highblock2sel &lt;= 1&#39;b0;
			highblock3sel &lt;= 1&#39;b0;
		end
		else if (we) begin
			if (location[4:3] == 2&#39;b01) begin
				commonblocksel &lt;= 1&#39;b1;
				highblock0sel &lt;= 1&#39;b0;
				highblock1sel &lt;= 1&#39;b0;
				highblock2sel &lt;= 1&#39;b0;
				highblock3sel &lt;= 1&#39;b0;
			end
			else if (location[4]) begin
				commonblocksel &lt;= 1&#39;b0;
				case (bank)
					2&#39;b00: {highblock0sel, highblock1sel, highblock2sel, highblock3sel} &lt;= 4&#39;b1000;
					2&#39;b01: {highblock0sel, highblock1sel, highblock2sel, highblock3sel} &lt;= 4&#39;b0100;
					2&#39;b10: {highblock0sel, highblock1sel, highblock2sel, highblock3sel} &lt;= 4&#39;b0010;
					2&#39;b11: {highblock0sel, highblock1sel, highblock2sel, highblock3sel} &lt;= 4&#39;b0001;
				endcase
			end
			else begin
				commonblocksel &lt;= 1&#39;b0;
				highblock0sel &lt;= 1&#39;b0;
				highblock1sel &lt;= 1&#39;b0;
				highblock2sel &lt;= 1&#39;b0;
				highblock3sel &lt;= 1&#39;b0;
			end
		end
		else begin
			commonblocksel &lt;= 1&#39;b0;
			highblock0sel &lt;= 1&#39;b0;
			highblock1sel &lt;= 1&#39;b0;
			highblock2sel &lt;= 1&#39;b0;
			highblock3sel &lt;= 1&#39;b0;
		end
	always @(din) commonblockin &lt;= din;
	always @(din) highblock0in &lt;= din;
	always @(din) highblock1in &lt;= din;
	always @(din) highblock2in &lt;= din;
	always @(din) highblock3in &lt;= din;
	reg [7:0] r8;
	reg [7:0] r9;
	reg [7:0] r10;
	reg [7:0] r11;
	reg [7:0] r12;
	reg [7:0] r13;
	reg [7:0] r14;
	reg [7:0] r15;
	always @(location or r8 or r9 or r10 or r11 or r12 or r13 or r14 or r15)
		case (location[2:0])
			3&#39;h0: commonblockout &lt;= r8;
			3&#39;h1: commonblockout &lt;= r9;
			3&#39;h2: commonblockout &lt;= r10;
			3&#39;h3: commonblockout &lt;= r11;
			3&#39;h4: commonblockout &lt;= r12;
			3&#39;h5: commonblockout &lt;= r13;
			3&#39;h6: commonblockout &lt;= r14;
			3&#39;h7: commonblockout &lt;= r15;
		endcase
	always @(posedge clk)
		if (we &amp; commonblocksel)
			case (location[2:0])
				3&#39;h0: r8 &lt;= commonblockin;
				3&#39;h1: r9 &lt;= commonblockin;
				3&#39;h2: r10 &lt;= commonblockin;
				3&#39;h3: r11 &lt;= commonblockin;
				3&#39;h4: r12 &lt;= commonblockin;
				3&#39;h5: r13 &lt;= commonblockin;
				3&#39;h6: r14 &lt;= commonblockin;
				3&#39;h7: r15 &lt;= commonblockin;
			endcase
	reg [7:0] r16;
	reg [7:0] r17;
	reg [7:0] r18;
	reg [7:0] r19;
	reg [7:0] r20;
	reg [7:0] r21;
	reg [7:0] r22;
	reg [7:0] r23;
	reg [7:0] r24;
	reg [7:0] r25;
	reg [7:0] r26;
	reg [7:0] r27;
	reg [7:0] r28;
	reg [7:0] r29;
	reg [7:0] r30;
	reg [7:0] r31;
	always @(location or r16 or r17 or r18 or r19 or r20 or r21 or r22 or r23 or r24 or r25 or r26 or r27 or r28 or r29 or r30 or r31)
		case (location[3:0])
			4&#39;h0: highblock0out &lt;= r16;
			4&#39;h1: highblock0out &lt;= r17;
			4&#39;h2: highblock0out &lt;= r18;
			4&#39;h3: highblock0out &lt;= r19;
			4&#39;h4: highblock0out &lt;= r20;
			4&#39;h5: highblock0out &lt;= r21;
			4&#39;h6: highblock0out &lt;= r22;
			4&#39;h7: highblock0out &lt;= r23;
			4&#39;h8: highblock0out &lt;= r24;
			4&#39;h9: highblock0out &lt;= r25;
			4&#39;ha: highblock0out &lt;= r26;
			4&#39;hb: highblock0out &lt;= r27;
			4&#39;hc: highblock0out &lt;= r28;
			4&#39;hd: highblock0out &lt;= r29;
			4&#39;he: highblock0out &lt;= r30;
			4&#39;hf: highblock0out &lt;= r31;
		endcase
	always @(posedge clk)
		if (we &amp; highblock0sel)
			case (location[3:0])
				4&#39;h0: r16 &lt;= highblock0in;
				4&#39;h1: r17 &lt;= highblock0in;
				4&#39;h2: r18 &lt;= highblock0in;
				4&#39;h3: r19 &lt;= highblock0in;
				4&#39;h4: r20 &lt;= highblock0in;
				4&#39;h5: r21 &lt;= highblock0in;
				4&#39;h6: r22 &lt;= highblock0in;
				4&#39;h7: r23 &lt;= highblock0in;
				4&#39;h8: r24 &lt;= highblock0in;
				4&#39;h9: r25 &lt;= highblock0in;
				4&#39;ha: r26 &lt;= highblock0in;
				4&#39;hb: r27 &lt;= highblock0in;
				4&#39;hc: r28 &lt;= highblock0in;
				4&#39;hd: r29 &lt;= highblock0in;
				4&#39;he: r30 &lt;= highblock0in;
				4&#39;hf: r31 &lt;= highblock0in;
			endcase
	reg [7:0] r48;
	reg [7:0] r49;
	reg [7:0] r50;
	reg [7:0] r51;
	reg [7:0] r52;
	reg [7:0] r53;
	reg [7:0] r54;
	reg [7:0] r55;
	reg [7:0] r56;
	reg [7:0] r57;
	reg [7:0] r58;
	reg [7:0] r59;
	reg [7:0] r60;
	reg [7:0] r61;
	reg [7:0] r62;
	reg [7:0] r63;
	always @(location or r48 or r49 or r50 or r51 or r52 or r53 or r54 or r55 or r56 or r57 or r58 or r59 or r60 or r61 or r62 or r63)
		case (location[3:0])
			4&#39;h0: highblock1out &lt;= r48;
			4&#39;h1: highblock1out &lt;= r49;
			4&#39;h2: highblock1out &lt;= r50;
			4&#39;h3: highblock1out &lt;= r51;
			4&#39;h4: highblock1out &lt;= r52;
			4&#39;h5: highblock1out &lt;= r53;
			4&#39;h6: highblock1out &lt;= r54;
			4&#39;h7: highblock1out &lt;= r55;
			4&#39;h8: highblock1out &lt;= r56;
			4&#39;h9: highblock1out &lt;= r57;
			4&#39;ha: highblock1out &lt;= r58;
			4&#39;hb: highblock1out &lt;= r59;
			4&#39;hc: highblock1out &lt;= r60;
			4&#39;hd: highblock1out &lt;= r61;
			4&#39;he: highblock1out &lt;= r62;
			4&#39;hf: highblock1out &lt;= r63;
		endcase
	always @(posedge clk)
		if (we &amp; highblock1sel)
			case (location[3:0])
				4&#39;h0: r48 &lt;= highblock1in;
				4&#39;h1: r49 &lt;= highblock1in;
				4&#39;h2: r50 &lt;= highblock1in;
				4&#39;h3: r51 &lt;= highblock1in;
				4&#39;h4: r52 &lt;= highblock1in;
				4&#39;h5: r53 &lt;= highblock1in;
				4&#39;h6: r54 &lt;= highblock1in;
				4&#39;h7: r55 &lt;= highblock1in;
				4&#39;h8: r56 &lt;= highblock1in;
				4&#39;h9: r57 &lt;= highblock1in;
				4&#39;ha: r58 &lt;= highblock1in;
				4&#39;hb: r59 &lt;= highblock1in;
				4&#39;hc: r60 &lt;= highblock1in;
				4&#39;hd: r61 &lt;= highblock1in;
				4&#39;he: r62 &lt;= highblock1in;
				4&#39;hf: r63 &lt;= highblock1in;
			endcase
	reg [7:0] r80;
	reg [7:0] r81;
	reg [7:0] r82;
	reg [7:0] r83;
	reg [7:0] r84;
	reg [7:0] r85;
	reg [7:0] r86;
	reg [7:0] r87;
	reg [7:0] r88;
	reg [7:0] r89;
	reg [7:0] r90;
	reg [7:0] r91;
	reg [7:0] r92;
	reg [7:0] r93;
	reg [7:0] r94;
	reg [7:0] r95;
	always @(location or r80 or r81 or r82 or r83 or r84 or r85 or r86 or r87 or r88 or r89 or r90 or r91 or r92 or r93 or r94 or r95)
		case (location[3:0])
			4&#39;h0: highblock2out &lt;= r80;
			4&#39;h1: highblock2out &lt;= r81;
			4&#39;h2: highblock2out &lt;= r82;
			4&#39;h3: highblock2out &lt;= r83;
			4&#39;h4: highblock2out &lt;= r84;
			4&#39;h5: highblock2out &lt;= r85;
			4&#39;h6: highblock2out &lt;= r86;
			4&#39;h7: highblock2out &lt;= r87;
			4&#39;h8: highblock2out &lt;= r88;
			4&#39;h9: highblock2out &lt;= r89;
			4&#39;ha: highblock2out &lt;= r90;
			4&#39;hb: highblock2out &lt;= r91;
			4&#39;hc: highblock2out &lt;= r92;
			4&#39;hd: highblock2out &lt;= r93;
			4&#39;he: highblock2out &lt;= r94;
			4&#39;hf: highblock2out &lt;= r95;
		endcase
	always @(posedge clk)
		if (we &amp; highblock2sel)
			case (location[3:0])
				4&#39;h0: r80 &lt;= highblock2in;
				4&#39;h1: r81 &lt;= highblock2in;
				4&#39;h2: r82 &lt;= highblock2in;
				4&#39;h3: r83 &lt;= highblock2in;
				4&#39;h4: r84 &lt;= highblock2in;
				4&#39;h5: r85 &lt;= highblock2in;
				4&#39;h6: r86 &lt;= highblock2in;
				4&#39;h7: r87 &lt;= highblock2in;
				4&#39;h8: r88 &lt;= highblock2in;
				4&#39;h9: r89 &lt;= highblock2in;
				4&#39;ha: r90 &lt;= highblock2in;
				4&#39;hb: r91 &lt;= highblock2in;
				4&#39;hc: r92 &lt;= highblock2in;
				4&#39;hd: r93 &lt;= highblock2in;
				4&#39;he: r94 &lt;= highblock2in;
				4&#39;hf: r95 &lt;= highblock2in;
			endcase
	reg [7:0] r112;
	reg [7:0] r113;
	reg [7:0] r114;
	reg [7:0] r115;
	reg [7:0] r116;
	reg [7:0] r117;
	reg [7:0] r118;
	reg [7:0] r119;
	reg [7:0] r120;
	reg [7:0] r121;
	reg [7:0] r122;
	reg [7:0] r123;
	reg [7:0] r124;
	reg [7:0] r125;
	reg [7:0] r126;
	always @(location or r112 or r113 or r114 or r115 or r116 or r117 or r118 or r119 or r120 or r121 or r122 or r123 or r124 or r125 or r126)
		case (location[3:0])
			4&#39;h0: highblock3out &lt;= r112;
			4&#39;h1: highblock3out &lt;= r113;
			4&#39;h2: highblock3out &lt;= r114;
			4&#39;h3: highblock3out &lt;= r115;
			4&#39;h4: highblock3out &lt;= r116;
			4&#39;h5: highblock3out &lt;= r117;
			4&#39;h6: highblock3out &lt;= r118;
			4&#39;h7: highblock3out &lt;= r119;
			4&#39;h8: highblock3out &lt;= r120;
			4&#39;h9: highblock3out &lt;= r121;
			4&#39;ha: highblock3out &lt;= r122;
			4&#39;hb: highblock3out &lt;= r123;
			4&#39;hc: highblock3out &lt;= r124;
			4&#39;hd: highblock3out &lt;= r125;
			4&#39;he: highblock3out &lt;= r126;
			4&#39;hf: highblock3out &lt;= 8&#39;hff;
		endcase
	always @(posedge clk)
		if (we &amp; highblock3sel)
			case (location[3:0])
				4&#39;h0: r112 &lt;= highblock3in;
				4&#39;h1: r113 &lt;= highblock3in;
				4&#39;h2: r114 &lt;= highblock3in;
				4&#39;h3: r115 &lt;= highblock3in;
				4&#39;h4: r116 &lt;= highblock3in;
				4&#39;h5: r117 &lt;= highblock3in;
				4&#39;h6: r118 &lt;= highblock3in;
				4&#39;h7: r119 &lt;= highblock3in;
				4&#39;h8: r120 &lt;= highblock3in;
				4&#39;h9: r121 &lt;= highblock3in;
				4&#39;ha: r122 &lt;= highblock3in;
				4&#39;hb: r123 &lt;= highblock3in;
				4&#39;hc: r124 &lt;= highblock3in;
				4&#39;hd: r125 &lt;= highblock3in;
				4&#39;he: r126 &lt;= highblock3in;
				4&#39;hf:
					;
			endcase
	task clear_memory;
		
		begin
			r8 = 0;
			r9 = 0;
			r10 = 0;
			r11 = 0;
			r12 = 0;
			r13 = 0;
			r14 = 0;
			r15 = 0;
			r16 = 0;
			r17 = 0;
			r18 = 0;
			r19 = 0;
			r20 = 0;
			r21 = 0;
			r22 = 0;
			r23 = 0;
			r24 = 0;
			r25 = 0;
			r26 = 0;
			r27 = 0;
			r28 = 0;
			r29 = 0;
			r30 = 0;
			r31 = 0;
			r48 = 0;
			r49 = 0;
			r50 = 0;
			r51 = 0;
			r52 = 0;
			r53 = 0;
			r54 = 0;
			r55 = 0;
			r56 = 0;
			r57 = 0;
			r58 = 0;
			r59 = 0;
			r60 = 0;
			r61 = 0;
			r62 = 0;
			r63 = 0;
			r80 = 0;
			r94 = 0;
			r112 = 0;
			r126 = 0;
		end
	endtask
	initial begin
		$display(&#34;Clearing SRAM.&#34;);
		clear_memory;
	end
endmodule
module pictest;
	parameter TEST_NUMBER = 9;
	integer dbg_showporta;
	integer dbg_showportb;
	integer dbg_showportc;
	integer dbg_showinst;
	integer dbg_showrom;
	integer dbg_showw;
	integer dbg_showpc;
	integer dbg_showcycles;
	integer dbg_limitcycles;
	integer dbg_maxcycles;
	integer cycles;
	reg clk;
	reg reset;
	reg [7:0] porta;
	wire [7:0] portb;
	wire [7:0] portc;
	reg [11:0] rom [0:511];
	wire [8:0] romaddr;
	reg [11:0] romdata;
	always @(romaddr) romdata = rom[romaddr];
	reg [7:0] last_debugw;
	reg [8:0] last_debugpc;
	reg [11:0] last_debuginst;
	reg [7:0] last_debugstatus;
	wire [7:0] debugw;
	wire [8:0] debugpc;
	wire [11:0] debuginst;
	wire [7:0] debugstatus;
	piccpu piccpu_inst(
		.clk(clk),
		.reset(reset),
		.paddr(romaddr),
		.pdata(romdata),
		.portain(porta),
		.portbout(portb),
		.portcout(portc),
		.debugw(debugw),
		.debugpc(debugpc),
		.debuginst(debuginst),
		.debugstatus(debugstatus)
	);
	initial begin
		reset = 1;
		#(200)
			;
		reset = 0;
	end
	initial begin
		clk = 0;
		forever begin
			#(50) clk = 1;
			#(50) clk = 0;
		end
	end
	initial begin
		dbg_showporta = 0;
		dbg_showportb = 0;
		dbg_showportc = 0;
		dbg_showinst = 0;
		dbg_showrom = 0;
		dbg_showw = 0;
		dbg_showpc = 0;
		dbg_showcycles = 0;
		dbg_limitcycles = 1;
		dbg_maxcycles = 50000;
	end
	task test1;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #1&#34;);
			#(1)
				;
			dbg_showportb = 1;
			dbg_showcycles = 1;
			$readmemh(&#34;TEST1.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test2;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #2&#34;);
			#(1)
				;
			dbg_showportb = 1;
			$readmemh(&#34;TEST2.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test3;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #3&#34;);
			#(1)
				;
			dbg_showportb = 1;
			$readmemh(&#34;TEST3.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test4;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #4&#34;);
			#(1)
				;
			dbg_showportb = 1;
			$readmemh(&#34;TEST4.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test5;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #5&#34;);
			#(1)
				;
			dbg_showportb = 1;
			$readmemh(&#34;TEST5.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test6;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #6&#34;);
			#(1)
				;
			dbg_showportb = 1;
			dbg_showportc = 1;
			dbg_limitcycles = 0;
			$readmemh(&#34;TEST6.ROM&#34;, rom);
			#(200)
				;
			repeat (20) begin
				porta = $random;
				#(10000)
					;
			end
			$finish;
		end
	endtask
	task test7;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #7&#34;);
			#(1)
				;
			dbg_showportb = 1;
			$readmemh(&#34;TEST7.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test8;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #8&#34;);
			#(1)
				;
			dbg_showporta = 1;
			dbg_showportb = 1;
			dbg_showportc = 1;
			$readmemh(&#34;TEST8.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 500;
		end
	endtask
	task test9;
		
		begin
			$display(&#34;SYNTHETIC PIC 2.0.  This is TEST #9&#34;);
			#(1)
				;
			dbg_showportb = 1;
			dbg_showportc = 1;
			$readmemh(&#34;contrib/TEST9.ROM&#34;, rom);
			dbg_limitcycles = 1;
			dbg_maxcycles = 2000;
		end
	endtask
	initial case (TEST_NUMBER)
		1:
			test1;
		2:
			test2;
		3:
			test3;
		4:
			test4;
		5:
			test5;
		6:
			test6;
		7:
			test7;
		8:
			test8;
		9:
			test9;
		default: begin
			$display(&#34;ERROR: Unknown Test Number: %0d&#34;, TEST_NUMBER);
			$finish;
		end
	endcase
	initial begin
		cycles = 0;
		#(1)
			;
		@(negedge reset)
			;
		forever begin
			@(posedge clk)
				;
			cycles = cycles + 1;
			if ((cycles % 256) == 0)
				if (dbg_showcycles)
					$display(&#34;#Cycles = %0d&#34;, cycles);
			if (dbg_limitcycles)
				if (cycles &gt; dbg_maxcycles) begin
					$display(&#34;Maximum cycles (%0d) Exceeded.  Halting simulation.&#34;, dbg_maxcycles);
					$finish;
				end
		end
	end
	always @(romaddr)
		if (dbg_showrom)
			$display(&#34;ROM Address = %h, Data = %h&#34;, romaddr, romdata);
	always @(porta)
		if (dbg_showporta)
			$display(&#34;%d: porta changes to: %h&#34;, $time, porta);
	always @(portb)
		if (dbg_showportb)
			$display(&#34;%d: portb changes to: %h&#34;, $time, portb);
	always @(portc)
		if (dbg_showportc)
			$display(&#34;%d: portc changes to: %h&#34;, $time, portc);
	initial if (dbg_showw)
		forever begin
			@(negedge clk)
				;
			if (debugw != last_debugw)
				$display(&#34;W = %0h&#34;, debugw);
			last_debugw = debugw;
		end
	initial if (dbg_showpc)
		forever begin
			@(negedge clk)
				;
			$display(&#34;PC = %0h&#34;, debugpc);
		end
	reg [11:0] last_pc;
	always @(posedge clk) last_pc = debugpc;
	initial if (dbg_showinst)
		forever begin
			@(negedge clk)
				;
			if (debuginst[11:0] == 12&#39;b000000000000)
				$display(&#34;%h NOP&#34;, last_pc);
			else if (debuginst[11:5] == 7&#39;b0000001)
				$display(&#34;%h MOVWF  f=0x%0h&#34;, last_pc, debuginst[4:0]);
			else if (debuginst == 12&#39;b000001000000)
				$display(&#34;%h CLRW&#34;, last_pc);
			else if (debuginst[11:5] == 7&#39;b0000011)
				$display(&#34;%h CLRF  f=0x%0h&#34;, last_pc, debuginst[4:0]);
			else if (debuginst[11:6] == 7&#39;b0000010) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h SUBWF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h SUBWF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0000011) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h DECF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h DECF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0000100) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h IORWF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h IORWF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0000101) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h ANDWF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h ANDWF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0000110) begin
				if (piccpu_inst.d == 0)
					$display(&#34;XORWF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h XORWF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0000111) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h ADDWF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h ADDWF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001000) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h MOVF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h MOVF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001001) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h COMF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h COMF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001010) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h INCF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h INCF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001011) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h DECFSZ  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h DECFSZ  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001100) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h RRF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h RRF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001101) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h RLF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h RLF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001110) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h SWAPF  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h SWAPF  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:6] == 7&#39;b0001111) begin
				if (piccpu_inst.d == 0)
					$display(&#34;%h INCFSZ  f=0x%0h, W&#34;, last_pc, debuginst[4:0]);
				else
					$display(&#34;%h INCFSZ  f=0x%0h, f&#34;, last_pc, debuginst[4:0]);
			end
			else if (debuginst[11:8] == 4&#39;b0100)
				$display(&#34;%h BCF  f=0x%0h, bit=%0d&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
			else if (debuginst[11:8] == 4&#39;b0101)
				$display(&#34;%h BCF  f=0x%0h, bit=%0d&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
			else if (debuginst[11:8] == 4&#39;b0110) begin
				if (piccpu_inst.skip)
					$display(&#34;%h BTFSC  f=0x%0h, bit=%0d  {Will Skip..}&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
				else
					$display(&#34;%h BTFSC  f=0x%0h, bit=%0d  {Will NOT Skip..}&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
			end
			else if (debuginst[11:8] == 4&#39;b0111) begin
				if (piccpu_inst.skip)
					$display(&#34;%h BTFSS  f=0x%0h, bit=%0d  {Will Skip..}&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
				else
					$display(&#34;%h BTFSS  f=0x%0h, bit=%0d  {Will NOT Skip..}&#34;, last_pc, debuginst[4:0], piccpu_inst.b);
			end
			else if (debuginst[11:0] == 16&#39;b0000000000000010)
				$display(&#34;%h OPTION&#34;, last_pc);
			else if (debuginst[11:0] == 16&#39;b0000000000000011)
				$display(&#34;%h SLEEP&#34;, last_pc);
			else if (debuginst[11:0] == 16&#39;b0000000000000100)
				$display(&#34;%h CLRWDT&#34;, last_pc);
			else if (debuginst[11:3] == 13&#39;b0000000000000)
				$display(&#34;%h TRIS,  f=0x%0h&#34;, last_pc, debuginst[2:0]);
			else if (debuginst[11:8] == 4&#39;b1000)
				$display(&#34;%h RETLW,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else if (debuginst[11:8] == 4&#39;b1001)
				$display(&#34;%h CALL,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else if (debuginst[11:9] == 3&#39;b101)
				$display(&#34;%h GOTO,  k=0x%0h&#34;, last_pc, debuginst[8:0]);
			else if (debuginst[11:8] == 4&#39;b1100)
				$display(&#34;%h MOVLW,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else if (debuginst[11:8] == 4&#39;b1101)
				$display(&#34;%h IORLW,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else if (debuginst[11:8] == 4&#39;b1110)
				$display(&#34;%h ANDLW,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else if (debuginst[11:8] == 4&#39;b1111)
				$display(&#34;%h XORLW,  k=0x%0h&#34;, last_pc, debuginst[7:0]);
			else
				$display(&#34;Hmmm!  instruction not recognized?! %0h&#34;, debuginst);
		end
endmodule

</pre>
</body>