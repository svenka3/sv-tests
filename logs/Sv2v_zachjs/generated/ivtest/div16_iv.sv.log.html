<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Test imported from ivtest
rc: 0 (means success: 1)
tags: ivtest
incdirs: /tmpfs/src/github/sv-tests/third_party/tests/ivtest /tmpfs/src/github/sv-tests/third_party/tests/ivtest/ivltests
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/tests/ivtest/contrib/div16.v.html" target="file-frame">third_party/tests/ivtest/contrib/div16.v</a>
defines: 
time_elapsed: 0.160s
ram usage: 10952 KB
</pre>
<pre class="log">

zachjs-sv2v -I/tmpfs/src/github/sv-tests/third_party/tests/ivtest -I/tmpfs/src/github/sv-tests/third_party/tests/ivtest/ivltests <a href="../../../../third_party/tests/ivtest/contrib/div16.v.html" target="file-frame">third_party/tests/ivtest/contrib/div16.v</a>
module div16 (
	clk,
	resetb,
	start,
	a,
	b,
	q,
	r,
	done
);
	parameter N = 16;
	input clk;
	input resetb;
	input start;
	input [N - 1:0] a;
	input [N - 1:0] b;
	output [N - 1:0] q;
	output [N - 1:0] r;
	output done;
	reg [N - 1:0] power;
	reg [N - 1:0] accum;
	reg [(2 * N) - 1:0] bpower;
	assign r = accum;
	wire [(2 * N) - 1:0] accum_minus_bpower = accum - bpower;
	always @(posedge clk or negedge resetb)
		if (~resetb) begin
			q &lt;= 0;
			accum &lt;= 0;
			power &lt;= 0;
			bpower &lt;= 0;
			done &lt;= 0;
		end
		else if (start) begin
			q &lt;= 0;
			accum &lt;= a;
			power[N - 1] &lt;= 1&#39;b1;
			bpower &lt;= b &lt;&lt; (N - 1);
			done &lt;= 0;
		end
		else if (power != 0) begin
			if (~accum_minus_bpower[(2 * N) - 1]) begin
				q &lt;= q | power;
				accum &lt;= accum_minus_bpower;
			end
			power &lt;= power &gt;&gt; 1;
			bpower &lt;= bpower &gt;&gt; 1;
		end
		else
			done &lt;= 1;
endmodule
module test_div16;
	reg clk;
	reg resetb;
	reg start;
	reg [15:0] a;
	reg [15:0] b;
	wire [15:0] q;
	wire [15:0] r;
	wire done;
	integer num_errors;
	div16 div16(
		.clk(clk),
		.resetb(resetb),
		.start(start),
		.a(a),
		.b(b),
		.q(q),
		.r(r),
		.done(done)
	);
	task do_divide;
		input reg [15:0] arga;
		input reg [15:0] argb;
		begin
			a = arga;
			b = argb;
			@(posedge clk)
				;
			#(1) start = 1;
			@(posedge clk)
				;
			#(1) start = 0;
			while (~done) @(posedge clk)
				;
			#(1)
				;
			$display(&#34;Circuit: %0d / %0d = %0d, rem = %0d\t\t......... Reality: %0d, rem = %0d&#34;, arga, argb, q, r, a / b, a % b);
			if (b !== 0) begin
				if (q !== (a / b)) begin
					$display(&#34;   Error!  Unexpected Quotient\n\n&#34;);
					num_errors = num_errors + 1;
				end
				if (r !== (a % b)) begin
					$display(&#34;   Error!  Unexpected Remainder\n\n&#34;);
					num_errors = num_errors + 1;
				end
			end
		end
	endtask
	initial begin
		num_errors = 0;
		start = 0;
		#(200)
			;
		$display(&#34;16-bit Dividend, 8-bit divisor&#34;);
		repeat (25) do_divide($random, $random &amp; 255);
		$display(&#34;\n16-bit Dividend, 12-bit divisor&#34;);
		repeat (25) do_divide($random, $random &amp; 4095);
		$display(&#34;\n16-bit Dividend, 16-bit divisor&#34;);
		repeat (25) do_divide($random, $random);
		$display(&#34;\nSpecial Cases:&#34;);
		do_divide(16&#39;hffff, 16&#39;hffff);
		do_divide(312, 1);
		do_divide(0, 42);
		do_divide(312, 0);
		if (num_errors === 0)
			$display(&#34;\n\nPASSED&#34;);
		else
			$display(&#34;\n\nFAILED - There were %0d Errors.&#34;, num_errors);
		$finish;
	end
	initial begin
		clk = 0;
		forever begin
			#(10) clk = 1;
			#(10) clk = 0;
		end
	end
	initial begin
		resetb = 0;
		#(133) resetb = 1;
	end
endmodule

</pre>
</body>